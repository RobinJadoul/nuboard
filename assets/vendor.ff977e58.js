var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,a=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))o.call(t,r)&&s(e,r,t[r]);return e},l=(e,n)=>t(e,r(n));function c(){}function h(e){return e()}function u(){return Object.create(null)}function d(e){e.forEach(h)}function p(e){return"function"==typeof e}function f(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let m,g=!1;function y(e,t,r,n){for(;e<t;){const i=e+(t-e>>1);r(i)<=n?e=i+1:t=i}return e}function v(e,t,r){const n=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;if(t&&t.host)return t;return e.ownerDocument}(e);if(!n.getElementById(t)){const e=k("style");e.id=t,e.textContent=r,function(e,t){!function(e,t){e.appendChild(t)}(e.head||e,t)}(n,e)}}function b(e,t){if(g){for(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if("HEAD"===e.nodeName){const e=[];for(let r=0;r<t.length;r++){const n=t[r];void 0!==n.claim_order&&e.push(n)}t=e}const r=new Int32Array(t.length+1),n=new Int32Array(t.length);r[0]=-1;let i=0;for(let l=0;l<t.length;l++){const e=t[l].claim_order,o=(i>0&&t[r[i]].claim_order<=e?i+1:y(1,i,(e=>t[r[e]].claim_order),e))-1;n[l]=r[o]+1;const s=o+1;r[s]=l,i=Math.max(s,i)}const o=[],s=[];let a=t.length-1;for(let l=r[i]+1;0!=l;l=n[l-1]){for(o.push(t[l-1]);a>=l;a--)s.push(t[a]);a--}for(;a>=0;a--)s.push(t[a]);o.reverse(),s.sort(((e,t)=>e.claim_order-t.claim_order));for(let l=0,c=0;l<s.length;l++){for(;c<o.length&&s[l].claim_order>=o[c].claim_order;)c++;const t=c<o.length?o[c]:null;e.insertBefore(s[l],t)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);null!==e.actual_end_child&&void 0===e.actual_end_child.claim_order;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?void 0===t.claim_order&&t.parentNode===e||e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else t.parentNode===e&&null===t.nextSibling||e.appendChild(t)}function w(e,t,r){g&&!r?b(e,t):t.parentNode===e&&t.nextSibling==r||e.insertBefore(t,r||null)}function x(e){e.parentNode.removeChild(e)}function k(e){return document.createElement(e)}function S(e){return document.createTextNode(e)}function _(){return S(" ")}function C(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function T(e){return Array.from(e.childNodes)}function M(e,t,r,n,i=!1){!function(e){void 0===e.claim_info&&(e.claim_info={last_index:0,total_claimed:0})}(e);const o=(()=>{for(let n=e.claim_info.last_index;n<e.length;n++){const o=e[n];if(t(o)){const t=r(o);return void 0===t?e.splice(n,1):e[n]=t,i||(e.claim_info.last_index=n),o}}for(let n=e.claim_info.last_index-1;n>=0;n--){const o=e[n];if(t(o)){const t=r(o);return void 0===t?e.splice(n,1):e[n]=t,i?void 0===t&&e.claim_info.last_index--:e.claim_info.last_index=n,o}}return n()})();return o.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,o}function A(e,t,r){return function(e,t,r,n){return M(e,(e=>e.nodeName===t),(e=>{const t=[];for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n];r[i.name]||t.push(i.name)}t.forEach((t=>e.removeAttribute(t)))}),(()=>n(t)))}(e,t,r,k)}function E(e){return function(e,t){return M(e,(e=>3===e.nodeType),(e=>{const r=""+t;if(e.data.startsWith(r)){if(e.data.length!==r.length)return e.splitText(r.length)}else e.data=r}),(()=>S(t)),!0)}(e," ")}function O(e){m=e}function N(){if(!m)throw new Error("Function called outside component initialization");return m}function R(e){N().$$.on_mount.push(e)}function D(){const e=N();return(t,r)=>{const n=e.$$.callbacks[t];if(n){const i=function(e,t,r=!1){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,r,!1,t),n}(t,r);n.slice().forEach((t=>{t.call(e,i)}))}}}const z=[],I=[],B=[],L=[],P=Promise.resolve();let F=!1;function q(e){B.push(e)}const U=new Set;let j=0;function V(){const e=m;do{for(;j<z.length;){const e=z[j];j++,O(e),$(e.$$)}for(O(null),z.length=0,j=0;I.length;)I.pop()();for(let e=0;e<B.length;e+=1){const t=B[e];U.has(t)||(U.add(t),t())}B.length=0}while(z.length);for(;L.length;)L.pop()();F=!1,U.clear(),O(e)}function $(e){if(null!==e.fragment){e.update(),d(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(q)}}const H=new Set;function W(e,t){e&&e.i&&(H.delete(e),e.i(t))}function G(e,t,r,n){if(e&&e.o){if(H.has(e))return;H.add(e),undefined.c.push((()=>{H.delete(e),n&&(r&&e.d(1),n())})),e.o(t)}}function J(e){e&&e.c()}function K(e,t){e&&e.l(t)}function Y(e,t,r,n){const{fragment:i,on_mount:o,on_destroy:s,after_update:a}=e.$$;i&&i.m(t,r),n||q((()=>{const t=o.map(h).filter(p);s?s.push(...t):d(t),e.$$.on_mount=[]})),a.forEach(q)}function X(e,t){const r=e.$$;null!==r.fragment&&(d(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(z.push(e),F||(F=!0,P.then(V)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Q(e,t,r,n,i,o,s,a=[-1]){const l=m;O(e);const h=e.$$={fragment:null,ctx:null,props:o,update:c,not_equal:i,bound:u(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:u(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(h.root);let p=!1;if(h.ctx=r?r(e,t.props||{},((t,r,...n)=>{const o=n.length?n[0]:r;return h.ctx&&i(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),p&&Z(e,t)),r})):[],h.update(),p=!0,d(h.before_update),h.fragment=!!n&&n(h.ctx),t.target){if(t.hydrate){g=!0;const e=T(t.target);h.fragment&&h.fragment.l(e),e.forEach(x)}else h.fragment&&h.fragment.c();t.intro&&W(e.$$.fragment),Y(e,t.target,t.anchor,t.customElement),g=!1,V()}O(l)}class ee{$destroy(){X(this,1),this.$destroy=c}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class te{constructor(e,t,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new te(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}class re{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new re(t,te.range(this,e))}}class ne{constructor(e,t){this.position=void 0;var r,n="KaTeX parse error: "+e,i=t&&t.loc;if(i&&i.start<=i.end){var o=i.lexer.input;r=i.start;var s=i.end;r===o.length?n+=" at end of input: ":n+=" at position "+(r+1)+": ";var a=o.slice(r,s).replace(/[^]/g,"$&̲");n+=(r>15?"…"+o.slice(r-15,r):o.slice(0,r))+a+(s+15<o.length?o.slice(s,s+15)+"…":o.slice(s))}var l=new Error(n);return l.name="ParseError",l.__proto__=ne.prototype,l.position=r,l}}ne.prototype.__proto__=Error.prototype;var ie=/([A-Z])/g,oe={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},se=/[&><"']/g;var ae=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},le={contains:function(e,t){return-1!==e.indexOf(t)},deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(se,(e=>oe[e]))},hyphenate:function(e){return e.replace(ie,"-$1").toLowerCase()},getBaseElem:ae,isCharacterBox:function(e){var t=ae(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){var t=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(e);return null!=t?t[1]:"_relative"}},ce={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>"Infinity"===e?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function he(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if("string"!=typeof r)return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class ue{constructor(e){for(var t in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{},ce)if(ce.hasOwnProperty(t)){var r=ce[t];this[t]=void 0!==e[t]?r.processor?r.processor(e[t]):e[t]:he(r)}}reportNonstrict(e,t,r){var n=this.strict;if("function"==typeof n&&(n=n(e,t,r)),n&&"ignore"!==n){if(!0===n||"error"===n)throw new ne("LaTeX-incompatible input and strict mode is set to 'error': "+t+" ["+e+"]",r);"warn"===n?"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"):"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+n+"': "+t+" ["+e+"]")}}useStrictBehavior(e,t,r){var n=this.strict;if("function"==typeof n)try{n=n(e,t,r)}catch(i){n="error"}return!(!n||"ignore"===n)&&(!0===n||"error"===n||("warn"===n?("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"),!1):("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+n+"': "+t+" ["+e+"]"),!1)))}isTrusted(e){e.url&&!e.protocol&&(e.protocol=le.protocolFromUrl(e.url));var t="function"==typeof this.trust?this.trust(e):this.trust;return Boolean(t)}}class de{constructor(e,t,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=r}sup(){return pe[fe[this.id]]}sub(){return pe[me[this.id]]}fracNum(){return pe[ge[this.id]]}fracDen(){return pe[ye[this.id]]}cramp(){return pe[ve[this.id]]}text(){return pe[be[this.id]]}isTight(){return this.size>=2}}var pe=[new de(0,0,!1),new de(1,0,!0),new de(2,1,!1),new de(3,1,!0),new de(4,2,!1),new de(5,2,!0),new de(6,3,!1),new de(7,3,!0)],fe=[4,5,4,5,6,7,6,7],me=[5,5,5,5,7,7,7,7],ge=[2,3,4,5,6,7,6,7],ye=[3,3,5,5,7,7,7,7],ve=[1,1,3,3,5,5,7,7],be=[0,1,2,3,2,3,2,3],we={DISPLAY:pe[0],TEXT:pe[2],SCRIPT:pe[4],SCRIPTSCRIPT:pe[6]},xe=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];var ke=[];function Se(e){for(var t=0;t<ke.length;t+=2)if(e>=ke[t]&&e<=ke[t+1])return!0;return!1}xe.forEach((e=>e.blocks.forEach((e=>ke.push(...e)))));var _e={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};class Ce{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return le.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){return this.children.map((e=>e.toText())).join("")}}var Te={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Me={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Ae={"Å":"A","Ð":"D","Þ":"o","å":"a","ð":"d","þ":"o","А":"A","Б":"B","В":"B","Г":"F","Д":"A","Е":"E","Ж":"K","З":"3","И":"N","Й":"N","К":"K","Л":"N","М":"M","Н":"H","О":"O","П":"N","Р":"P","С":"C","Т":"T","У":"y","Ф":"O","Х":"X","Ц":"U","Ч":"h","Ш":"W","Щ":"W","Ъ":"B","Ы":"X","Ь":"B","Э":"3","Ю":"X","Я":"R","а":"a","б":"b","в":"a","г":"r","д":"y","е":"e","ж":"m","з":"e","и":"n","й":"n","к":"n","л":"n","м":"m","н":"n","о":"o","п":"n","р":"p","с":"c","т":"o","у":"y","ф":"b","х":"x","ц":"n","ч":"n","ш":"w","щ":"w","ъ":"a","ы":"m","ь":"a","э":"e","ю":"m","я":"r"};function Ee(e,t,r){if(!Te[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),i=Te[t][n];if(!i&&e[0]in Ae&&(n=Ae[e[0]].charCodeAt(0),i=Te[t][n]),i||"text"!==r||Se(n)&&(i=Te[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var Oe={};var Ne=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Re=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],De=function(e,t){return t.size<2?e:Ne[e-1][t.size-1]};class ze{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||ze.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=Re[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return new ze(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:De(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:Re[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=De(ze.BASESIZE,e);return this.size===t&&this.textSize===ze.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==ze.BASESIZE?["sizing","reset-size"+this.size,"size"+ze.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!Oe[t=e>=5?0:e>=3?1:2]){var r=Oe[t]={cssEmPerMu:Me.quad[t]/18};for(var n in Me)Me.hasOwnProperty(n)&&(r[n]=Me[n][t])}return Oe[t]}(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}ze.BASESIZE=6;var Ie={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},Be={ex:!0,em:!0,mu:!0},Le=function(e){return"string"!=typeof e&&(e=e.unit),e in Ie||e in Be||"ex"===e},Pe=function(e,t){var r;if(e.unit in Ie)r=Ie[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)r=t.fontMetrics().cssEmPerMu;else{var n;if(n=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)r=n.fontMetrics().xHeight;else{if("em"!==e.unit)throw new ne("Invalid unit: '"+e.unit+"'");r=n.fontMetrics().quad}n!==t&&(r*=n.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*r,t.maxSize)},Fe=function(e){return+e.toFixed(4)+"em"},qe=function(e){return e.filter((e=>e)).join(" ")},Ue=function(e,t,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},t){t.style.isTight()&&this.classes.push("mtight");var n=t.getColor();n&&(this.style.color=n)}},je=function(e){var t=document.createElement(e);for(var r in t.className=qe(this.classes),this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&t.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},Ve=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+le.escape(qe(this.classes))+'"');var r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=le.hyphenate(n)+":"+this.style[n]+";");for(var i in r&&(t+=' style="'+le.escape(r)+'"'),this.attributes)this.attributes.hasOwnProperty(i)&&(t+=" "+i+'="'+le.escape(this.attributes[i])+'"');t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+="</"+e+">"};class $e{constructor(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Ue.call(this,e,r,n),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return le.contains(this.classes,e)}toNode(){return je.call(this,"span")}toMarkup(){return Ve.call(this,"span")}}class He{constructor(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Ue.call(this,t,n),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return le.contains(this.classes,e)}toNode(){return je.call(this,"a")}toMarkup(){return Ve.call(this,"a")}}class We{constructor(e,t,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return le.contains(this.classes,e)}toNode(){var e=document.createElement("img");for(var t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e="<img  src='"+this.src+" 'alt='"+this.alt+"' ",t="";for(var r in this.style)this.style.hasOwnProperty(r)&&(t+=le.hyphenate(r)+":"+this.style[r]+";");return t&&(e+=' style="'+le.escape(t)+'"'),e+="'/>"}}var Ge={"î":"ı̂","ï":"ı̈","í":"ı́","ì":"ı̀"};class Je{constructor(e,t,r,n,i,o,s,a){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=r||0,this.italic=n||0,this.skew=i||0,this.width=o||0,this.classes=s||[],this.style=a||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<xe.length;t++)for(var r=xe[t],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(e>=i[0]&&e<=i[1])return r.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=Ge[this.text])}hasClass(e){return le.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;for(var r in this.italic>0&&((t=document.createElement("span")).style.marginRight=Fe(this.italic)),this.classes.length>0&&((t=t||document.createElement("span")).className=qe(this.classes)),this.style)this.style.hasOwnProperty(r)&&((t=t||document.createElement("span")).style[r]=this.style[r]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=le.escape(qe(this.classes)),t+='"');var r="";for(var n in this.italic>0&&(r+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(n)&&(r+=le.hyphenate(n)+":"+this.style[n]+";");r&&(e=!0,t+=' style="'+le.escape(r)+'"');var i=le.escape(this.text);return e?(t+=">",t+=i,t+="</span>"):i}}class Ke{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>"}}class Ye{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",_e[this.pathName]),e}toMarkup(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+_e[this.pathName]+"'/>"}}class Xe{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");return e+="/>"}}function Ze(e){if(e instanceof Je)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}var Qe={bin:1,close:1,inner:1,open:1,punct:1,rel:1},et={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},tt={math:{},text:{}};function rt(e,t,r,n,i,o){tt[e][i]={font:t,group:r,replace:n},o&&n&&(tt[e][n]=tt[e][i])}var nt="math",it="main",ot="ams",st="accent-token",at="bin",lt="mathord",ct="op-token",ht="open",ut="rel",dt="textord";rt(nt,it,ut,"≡","\\equiv",!0),rt(nt,it,ut,"≺","\\prec",!0),rt(nt,it,ut,"≻","\\succ",!0),rt(nt,it,ut,"∼","\\sim",!0),rt(nt,it,ut,"⊥","\\perp"),rt(nt,it,ut,"⪯","\\preceq",!0),rt(nt,it,ut,"⪰","\\succeq",!0),rt(nt,it,ut,"≃","\\simeq",!0),rt(nt,it,ut,"∣","\\mid",!0),rt(nt,it,ut,"≪","\\ll",!0),rt(nt,it,ut,"≫","\\gg",!0),rt(nt,it,ut,"≍","\\asymp",!0),rt(nt,it,ut,"∥","\\parallel"),rt(nt,it,ut,"⋈","\\bowtie",!0),rt(nt,it,ut,"⌣","\\smile",!0),rt(nt,it,ut,"⊑","\\sqsubseteq",!0),rt(nt,it,ut,"⊒","\\sqsupseteq",!0),rt(nt,it,ut,"≐","\\doteq",!0),rt(nt,it,ut,"⌢","\\frown",!0),rt(nt,it,ut,"∋","\\ni",!0),rt(nt,it,ut,"∝","\\propto",!0),rt(nt,it,ut,"⊢","\\vdash",!0),rt(nt,it,ut,"⊣","\\dashv",!0),rt(nt,it,ut,"∋","\\owns"),rt(nt,it,"punct",".","\\ldotp"),rt(nt,it,"punct","⋅","\\cdotp"),rt(nt,it,dt,"#","\\#"),rt("text",it,dt,"#","\\#"),rt(nt,it,dt,"&","\\&"),rt("text",it,dt,"&","\\&"),rt(nt,it,dt,"ℵ","\\aleph",!0),rt(nt,it,dt,"∀","\\forall",!0),rt(nt,it,dt,"ℏ","\\hbar",!0),rt(nt,it,dt,"∃","\\exists",!0),rt(nt,it,dt,"∇","\\nabla",!0),rt(nt,it,dt,"♭","\\flat",!0),rt(nt,it,dt,"ℓ","\\ell",!0),rt(nt,it,dt,"♮","\\natural",!0),rt(nt,it,dt,"♣","\\clubsuit",!0),rt(nt,it,dt,"℘","\\wp",!0),rt(nt,it,dt,"♯","\\sharp",!0),rt(nt,it,dt,"♢","\\diamondsuit",!0),rt(nt,it,dt,"ℜ","\\Re",!0),rt(nt,it,dt,"♡","\\heartsuit",!0),rt(nt,it,dt,"ℑ","\\Im",!0),rt(nt,it,dt,"♠","\\spadesuit",!0),rt(nt,it,dt,"§","\\S",!0),rt("text",it,dt,"§","\\S"),rt(nt,it,dt,"¶","\\P",!0),rt("text",it,dt,"¶","\\P"),rt(nt,it,dt,"†","\\dag"),rt("text",it,dt,"†","\\dag"),rt("text",it,dt,"†","\\textdagger"),rt(nt,it,dt,"‡","\\ddag"),rt("text",it,dt,"‡","\\ddag"),rt("text",it,dt,"‡","\\textdaggerdbl"),rt(nt,it,"close","⎱","\\rmoustache",!0),rt(nt,it,ht,"⎰","\\lmoustache",!0),rt(nt,it,"close","⟯","\\rgroup",!0),rt(nt,it,ht,"⟮","\\lgroup",!0),rt(nt,it,at,"∓","\\mp",!0),rt(nt,it,at,"⊖","\\ominus",!0),rt(nt,it,at,"⊎","\\uplus",!0),rt(nt,it,at,"⊓","\\sqcap",!0),rt(nt,it,at,"∗","\\ast"),rt(nt,it,at,"⊔","\\sqcup",!0),rt(nt,it,at,"◯","\\bigcirc",!0),rt(nt,it,at,"∙","\\bullet"),rt(nt,it,at,"‡","\\ddagger"),rt(nt,it,at,"≀","\\wr",!0),rt(nt,it,at,"⨿","\\amalg"),rt(nt,it,at,"&","\\And"),rt(nt,it,ut,"⟵","\\longleftarrow",!0),rt(nt,it,ut,"⇐","\\Leftarrow",!0),rt(nt,it,ut,"⟸","\\Longleftarrow",!0),rt(nt,it,ut,"⟶","\\longrightarrow",!0),rt(nt,it,ut,"⇒","\\Rightarrow",!0),rt(nt,it,ut,"⟹","\\Longrightarrow",!0),rt(nt,it,ut,"↔","\\leftrightarrow",!0),rt(nt,it,ut,"⟷","\\longleftrightarrow",!0),rt(nt,it,ut,"⇔","\\Leftrightarrow",!0),rt(nt,it,ut,"⟺","\\Longleftrightarrow",!0),rt(nt,it,ut,"↦","\\mapsto",!0),rt(nt,it,ut,"⟼","\\longmapsto",!0),rt(nt,it,ut,"↗","\\nearrow",!0),rt(nt,it,ut,"↩","\\hookleftarrow",!0),rt(nt,it,ut,"↪","\\hookrightarrow",!0),rt(nt,it,ut,"↘","\\searrow",!0),rt(nt,it,ut,"↼","\\leftharpoonup",!0),rt(nt,it,ut,"⇀","\\rightharpoonup",!0),rt(nt,it,ut,"↙","\\swarrow",!0),rt(nt,it,ut,"↽","\\leftharpoondown",!0),rt(nt,it,ut,"⇁","\\rightharpoondown",!0),rt(nt,it,ut,"↖","\\nwarrow",!0),rt(nt,it,ut,"⇌","\\rightleftharpoons",!0),rt(nt,ot,ut,"≮","\\nless",!0),rt(nt,ot,ut,"","\\@nleqslant"),rt(nt,ot,ut,"","\\@nleqq"),rt(nt,ot,ut,"⪇","\\lneq",!0),rt(nt,ot,ut,"≨","\\lneqq",!0),rt(nt,ot,ut,"","\\@lvertneqq"),rt(nt,ot,ut,"⋦","\\lnsim",!0),rt(nt,ot,ut,"⪉","\\lnapprox",!0),rt(nt,ot,ut,"⊀","\\nprec",!0),rt(nt,ot,ut,"⋠","\\npreceq",!0),rt(nt,ot,ut,"⋨","\\precnsim",!0),rt(nt,ot,ut,"⪹","\\precnapprox",!0),rt(nt,ot,ut,"≁","\\nsim",!0),rt(nt,ot,ut,"","\\@nshortmid"),rt(nt,ot,ut,"∤","\\nmid",!0),rt(nt,ot,ut,"⊬","\\nvdash",!0),rt(nt,ot,ut,"⊭","\\nvDash",!0),rt(nt,ot,ut,"⋪","\\ntriangleleft"),rt(nt,ot,ut,"⋬","\\ntrianglelefteq",!0),rt(nt,ot,ut,"⊊","\\subsetneq",!0),rt(nt,ot,ut,"","\\@varsubsetneq"),rt(nt,ot,ut,"⫋","\\subsetneqq",!0),rt(nt,ot,ut,"","\\@varsubsetneqq"),rt(nt,ot,ut,"≯","\\ngtr",!0),rt(nt,ot,ut,"","\\@ngeqslant"),rt(nt,ot,ut,"","\\@ngeqq"),rt(nt,ot,ut,"⪈","\\gneq",!0),rt(nt,ot,ut,"≩","\\gneqq",!0),rt(nt,ot,ut,"","\\@gvertneqq"),rt(nt,ot,ut,"⋧","\\gnsim",!0),rt(nt,ot,ut,"⪊","\\gnapprox",!0),rt(nt,ot,ut,"⊁","\\nsucc",!0),rt(nt,ot,ut,"⋡","\\nsucceq",!0),rt(nt,ot,ut,"⋩","\\succnsim",!0),rt(nt,ot,ut,"⪺","\\succnapprox",!0),rt(nt,ot,ut,"≆","\\ncong",!0),rt(nt,ot,ut,"","\\@nshortparallel"),rt(nt,ot,ut,"∦","\\nparallel",!0),rt(nt,ot,ut,"⊯","\\nVDash",!0),rt(nt,ot,ut,"⋫","\\ntriangleright"),rt(nt,ot,ut,"⋭","\\ntrianglerighteq",!0),rt(nt,ot,ut,"","\\@nsupseteqq"),rt(nt,ot,ut,"⊋","\\supsetneq",!0),rt(nt,ot,ut,"","\\@varsupsetneq"),rt(nt,ot,ut,"⫌","\\supsetneqq",!0),rt(nt,ot,ut,"","\\@varsupsetneqq"),rt(nt,ot,ut,"⊮","\\nVdash",!0),rt(nt,ot,ut,"⪵","\\precneqq",!0),rt(nt,ot,ut,"⪶","\\succneqq",!0),rt(nt,ot,ut,"","\\@nsubseteqq"),rt(nt,ot,at,"⊴","\\unlhd"),rt(nt,ot,at,"⊵","\\unrhd"),rt(nt,ot,ut,"↚","\\nleftarrow",!0),rt(nt,ot,ut,"↛","\\nrightarrow",!0),rt(nt,ot,ut,"⇍","\\nLeftarrow",!0),rt(nt,ot,ut,"⇏","\\nRightarrow",!0),rt(nt,ot,ut,"↮","\\nleftrightarrow",!0),rt(nt,ot,ut,"⇎","\\nLeftrightarrow",!0),rt(nt,ot,ut,"△","\\vartriangle"),rt(nt,ot,dt,"ℏ","\\hslash"),rt(nt,ot,dt,"▽","\\triangledown"),rt(nt,ot,dt,"◊","\\lozenge"),rt(nt,ot,dt,"Ⓢ","\\circledS"),rt(nt,ot,dt,"®","\\circledR"),rt("text",ot,dt,"®","\\circledR"),rt(nt,ot,dt,"∡","\\measuredangle",!0),rt(nt,ot,dt,"∄","\\nexists"),rt(nt,ot,dt,"℧","\\mho"),rt(nt,ot,dt,"Ⅎ","\\Finv",!0),rt(nt,ot,dt,"⅁","\\Game",!0),rt(nt,ot,dt,"‵","\\backprime"),rt(nt,ot,dt,"▲","\\blacktriangle"),rt(nt,ot,dt,"▼","\\blacktriangledown"),rt(nt,ot,dt,"■","\\blacksquare"),rt(nt,ot,dt,"⧫","\\blacklozenge"),rt(nt,ot,dt,"★","\\bigstar"),rt(nt,ot,dt,"∢","\\sphericalangle",!0),rt(nt,ot,dt,"∁","\\complement",!0),rt(nt,ot,dt,"ð","\\eth",!0),rt("text",it,dt,"ð","ð"),rt(nt,ot,dt,"╱","\\diagup"),rt(nt,ot,dt,"╲","\\diagdown"),rt(nt,ot,dt,"□","\\square"),rt(nt,ot,dt,"□","\\Box"),rt(nt,ot,dt,"◊","\\Diamond"),rt(nt,ot,dt,"¥","\\yen",!0),rt("text",ot,dt,"¥","\\yen",!0),rt(nt,ot,dt,"✓","\\checkmark",!0),rt("text",ot,dt,"✓","\\checkmark"),rt(nt,ot,dt,"ℶ","\\beth",!0),rt(nt,ot,dt,"ℸ","\\daleth",!0),rt(nt,ot,dt,"ℷ","\\gimel",!0),rt(nt,ot,dt,"ϝ","\\digamma",!0),rt(nt,ot,dt,"ϰ","\\varkappa"),rt(nt,ot,ht,"┌","\\@ulcorner",!0),rt(nt,ot,"close","┐","\\@urcorner",!0),rt(nt,ot,ht,"└","\\@llcorner",!0),rt(nt,ot,"close","┘","\\@lrcorner",!0),rt(nt,ot,ut,"≦","\\leqq",!0),rt(nt,ot,ut,"⩽","\\leqslant",!0),rt(nt,ot,ut,"⪕","\\eqslantless",!0),rt(nt,ot,ut,"≲","\\lesssim",!0),rt(nt,ot,ut,"⪅","\\lessapprox",!0),rt(nt,ot,ut,"≊","\\approxeq",!0),rt(nt,ot,at,"⋖","\\lessdot"),rt(nt,ot,ut,"⋘","\\lll",!0),rt(nt,ot,ut,"≶","\\lessgtr",!0),rt(nt,ot,ut,"⋚","\\lesseqgtr",!0),rt(nt,ot,ut,"⪋","\\lesseqqgtr",!0),rt(nt,ot,ut,"≑","\\doteqdot"),rt(nt,ot,ut,"≓","\\risingdotseq",!0),rt(nt,ot,ut,"≒","\\fallingdotseq",!0),rt(nt,ot,ut,"∽","\\backsim",!0),rt(nt,ot,ut,"⋍","\\backsimeq",!0),rt(nt,ot,ut,"⫅","\\subseteqq",!0),rt(nt,ot,ut,"⋐","\\Subset",!0),rt(nt,ot,ut,"⊏","\\sqsubset",!0),rt(nt,ot,ut,"≼","\\preccurlyeq",!0),rt(nt,ot,ut,"⋞","\\curlyeqprec",!0),rt(nt,ot,ut,"≾","\\precsim",!0),rt(nt,ot,ut,"⪷","\\precapprox",!0),rt(nt,ot,ut,"⊲","\\vartriangleleft"),rt(nt,ot,ut,"⊴","\\trianglelefteq"),rt(nt,ot,ut,"⊨","\\vDash",!0),rt(nt,ot,ut,"⊪","\\Vvdash",!0),rt(nt,ot,ut,"⌣","\\smallsmile"),rt(nt,ot,ut,"⌢","\\smallfrown"),rt(nt,ot,ut,"≏","\\bumpeq",!0),rt(nt,ot,ut,"≎","\\Bumpeq",!0),rt(nt,ot,ut,"≧","\\geqq",!0),rt(nt,ot,ut,"⩾","\\geqslant",!0),rt(nt,ot,ut,"⪖","\\eqslantgtr",!0),rt(nt,ot,ut,"≳","\\gtrsim",!0),rt(nt,ot,ut,"⪆","\\gtrapprox",!0),rt(nt,ot,at,"⋗","\\gtrdot"),rt(nt,ot,ut,"⋙","\\ggg",!0),rt(nt,ot,ut,"≷","\\gtrless",!0),rt(nt,ot,ut,"⋛","\\gtreqless",!0),rt(nt,ot,ut,"⪌","\\gtreqqless",!0),rt(nt,ot,ut,"≖","\\eqcirc",!0),rt(nt,ot,ut,"≗","\\circeq",!0),rt(nt,ot,ut,"≜","\\triangleq",!0),rt(nt,ot,ut,"∼","\\thicksim"),rt(nt,ot,ut,"≈","\\thickapprox"),rt(nt,ot,ut,"⫆","\\supseteqq",!0),rt(nt,ot,ut,"⋑","\\Supset",!0),rt(nt,ot,ut,"⊐","\\sqsupset",!0),rt(nt,ot,ut,"≽","\\succcurlyeq",!0),rt(nt,ot,ut,"⋟","\\curlyeqsucc",!0),rt(nt,ot,ut,"≿","\\succsim",!0),rt(nt,ot,ut,"⪸","\\succapprox",!0),rt(nt,ot,ut,"⊳","\\vartriangleright"),rt(nt,ot,ut,"⊵","\\trianglerighteq"),rt(nt,ot,ut,"⊩","\\Vdash",!0),rt(nt,ot,ut,"∣","\\shortmid"),rt(nt,ot,ut,"∥","\\shortparallel"),rt(nt,ot,ut,"≬","\\between",!0),rt(nt,ot,ut,"⋔","\\pitchfork",!0),rt(nt,ot,ut,"∝","\\varpropto"),rt(nt,ot,ut,"◀","\\blacktriangleleft"),rt(nt,ot,ut,"∴","\\therefore",!0),rt(nt,ot,ut,"∍","\\backepsilon"),rt(nt,ot,ut,"▶","\\blacktriangleright"),rt(nt,ot,ut,"∵","\\because",!0),rt(nt,ot,ut,"⋘","\\llless"),rt(nt,ot,ut,"⋙","\\gggtr"),rt(nt,ot,at,"⊲","\\lhd"),rt(nt,ot,at,"⊳","\\rhd"),rt(nt,ot,ut,"≂","\\eqsim",!0),rt(nt,it,ut,"⋈","\\Join"),rt(nt,ot,ut,"≑","\\Doteq",!0),rt(nt,ot,at,"∔","\\dotplus",!0),rt(nt,ot,at,"∖","\\smallsetminus"),rt(nt,ot,at,"⋒","\\Cap",!0),rt(nt,ot,at,"⋓","\\Cup",!0),rt(nt,ot,at,"⩞","\\doublebarwedge",!0),rt(nt,ot,at,"⊟","\\boxminus",!0),rt(nt,ot,at,"⊞","\\boxplus",!0),rt(nt,ot,at,"⋇","\\divideontimes",!0),rt(nt,ot,at,"⋉","\\ltimes",!0),rt(nt,ot,at,"⋊","\\rtimes",!0),rt(nt,ot,at,"⋋","\\leftthreetimes",!0),rt(nt,ot,at,"⋌","\\rightthreetimes",!0),rt(nt,ot,at,"⋏","\\curlywedge",!0),rt(nt,ot,at,"⋎","\\curlyvee",!0),rt(nt,ot,at,"⊝","\\circleddash",!0),rt(nt,ot,at,"⊛","\\circledast",!0),rt(nt,ot,at,"⋅","\\centerdot"),rt(nt,ot,at,"⊺","\\intercal",!0),rt(nt,ot,at,"⋒","\\doublecap"),rt(nt,ot,at,"⋓","\\doublecup"),rt(nt,ot,at,"⊠","\\boxtimes",!0),rt(nt,ot,ut,"⇢","\\dashrightarrow",!0),rt(nt,ot,ut,"⇠","\\dashleftarrow",!0),rt(nt,ot,ut,"⇇","\\leftleftarrows",!0),rt(nt,ot,ut,"⇆","\\leftrightarrows",!0),rt(nt,ot,ut,"⇚","\\Lleftarrow",!0),rt(nt,ot,ut,"↞","\\twoheadleftarrow",!0),rt(nt,ot,ut,"↢","\\leftarrowtail",!0),rt(nt,ot,ut,"↫","\\looparrowleft",!0),rt(nt,ot,ut,"⇋","\\leftrightharpoons",!0),rt(nt,ot,ut,"↶","\\curvearrowleft",!0),rt(nt,ot,ut,"↺","\\circlearrowleft",!0),rt(nt,ot,ut,"↰","\\Lsh",!0),rt(nt,ot,ut,"⇈","\\upuparrows",!0),rt(nt,ot,ut,"↿","\\upharpoonleft",!0),rt(nt,ot,ut,"⇃","\\downharpoonleft",!0),rt(nt,it,ut,"⊶","\\origof",!0),rt(nt,it,ut,"⊷","\\imageof",!0),rt(nt,ot,ut,"⊸","\\multimap",!0),rt(nt,ot,ut,"↭","\\leftrightsquigarrow",!0),rt(nt,ot,ut,"⇉","\\rightrightarrows",!0),rt(nt,ot,ut,"⇄","\\rightleftarrows",!0),rt(nt,ot,ut,"↠","\\twoheadrightarrow",!0),rt(nt,ot,ut,"↣","\\rightarrowtail",!0),rt(nt,ot,ut,"↬","\\looparrowright",!0),rt(nt,ot,ut,"↷","\\curvearrowright",!0),rt(nt,ot,ut,"↻","\\circlearrowright",!0),rt(nt,ot,ut,"↱","\\Rsh",!0),rt(nt,ot,ut,"⇊","\\downdownarrows",!0),rt(nt,ot,ut,"↾","\\upharpoonright",!0),rt(nt,ot,ut,"⇂","\\downharpoonright",!0),rt(nt,ot,ut,"⇝","\\rightsquigarrow",!0),rt(nt,ot,ut,"⇝","\\leadsto"),rt(nt,ot,ut,"⇛","\\Rrightarrow",!0),rt(nt,ot,ut,"↾","\\restriction"),rt(nt,it,dt,"‘","`"),rt(nt,it,dt,"$","\\$"),rt("text",it,dt,"$","\\$"),rt("text",it,dt,"$","\\textdollar"),rt(nt,it,dt,"%","\\%"),rt("text",it,dt,"%","\\%"),rt(nt,it,dt,"_","\\_"),rt("text",it,dt,"_","\\_"),rt("text",it,dt,"_","\\textunderscore"),rt(nt,it,dt,"∠","\\angle",!0),rt(nt,it,dt,"∞","\\infty",!0),rt(nt,it,dt,"′","\\prime"),rt(nt,it,dt,"△","\\triangle"),rt(nt,it,dt,"Γ","\\Gamma",!0),rt(nt,it,dt,"Δ","\\Delta",!0),rt(nt,it,dt,"Θ","\\Theta",!0),rt(nt,it,dt,"Λ","\\Lambda",!0),rt(nt,it,dt,"Ξ","\\Xi",!0),rt(nt,it,dt,"Π","\\Pi",!0),rt(nt,it,dt,"Σ","\\Sigma",!0),rt(nt,it,dt,"Υ","\\Upsilon",!0),rt(nt,it,dt,"Φ","\\Phi",!0),rt(nt,it,dt,"Ψ","\\Psi",!0),rt(nt,it,dt,"Ω","\\Omega",!0),rt(nt,it,dt,"A","Α"),rt(nt,it,dt,"B","Β"),rt(nt,it,dt,"E","Ε"),rt(nt,it,dt,"Z","Ζ"),rt(nt,it,dt,"H","Η"),rt(nt,it,dt,"I","Ι"),rt(nt,it,dt,"K","Κ"),rt(nt,it,dt,"M","Μ"),rt(nt,it,dt,"N","Ν"),rt(nt,it,dt,"O","Ο"),rt(nt,it,dt,"P","Ρ"),rt(nt,it,dt,"T","Τ"),rt(nt,it,dt,"X","Χ"),rt(nt,it,dt,"¬","\\neg",!0),rt(nt,it,dt,"¬","\\lnot"),rt(nt,it,dt,"⊤","\\top"),rt(nt,it,dt,"⊥","\\bot"),rt(nt,it,dt,"∅","\\emptyset"),rt(nt,ot,dt,"∅","\\varnothing"),rt(nt,it,lt,"α","\\alpha",!0),rt(nt,it,lt,"β","\\beta",!0),rt(nt,it,lt,"γ","\\gamma",!0),rt(nt,it,lt,"δ","\\delta",!0),rt(nt,it,lt,"ϵ","\\epsilon",!0),rt(nt,it,lt,"ζ","\\zeta",!0),rt(nt,it,lt,"η","\\eta",!0),rt(nt,it,lt,"θ","\\theta",!0),rt(nt,it,lt,"ι","\\iota",!0),rt(nt,it,lt,"κ","\\kappa",!0),rt(nt,it,lt,"λ","\\lambda",!0),rt(nt,it,lt,"μ","\\mu",!0),rt(nt,it,lt,"ν","\\nu",!0),rt(nt,it,lt,"ξ","\\xi",!0),rt(nt,it,lt,"ο","\\omicron",!0),rt(nt,it,lt,"π","\\pi",!0),rt(nt,it,lt,"ρ","\\rho",!0),rt(nt,it,lt,"σ","\\sigma",!0),rt(nt,it,lt,"τ","\\tau",!0),rt(nt,it,lt,"υ","\\upsilon",!0),rt(nt,it,lt,"ϕ","\\phi",!0),rt(nt,it,lt,"χ","\\chi",!0),rt(nt,it,lt,"ψ","\\psi",!0),rt(nt,it,lt,"ω","\\omega",!0),rt(nt,it,lt,"ε","\\varepsilon",!0),rt(nt,it,lt,"ϑ","\\vartheta",!0),rt(nt,it,lt,"ϖ","\\varpi",!0),rt(nt,it,lt,"ϱ","\\varrho",!0),rt(nt,it,lt,"ς","\\varsigma",!0),rt(nt,it,lt,"φ","\\varphi",!0),rt(nt,it,at,"∗","*",!0),rt(nt,it,at,"+","+"),rt(nt,it,at,"−","-",!0),rt(nt,it,at,"⋅","\\cdot",!0),rt(nt,it,at,"∘","\\circ"),rt(nt,it,at,"÷","\\div",!0),rt(nt,it,at,"±","\\pm",!0),rt(nt,it,at,"×","\\times",!0),rt(nt,it,at,"∩","\\cap",!0),rt(nt,it,at,"∪","\\cup",!0),rt(nt,it,at,"∖","\\setminus"),rt(nt,it,at,"∧","\\land"),rt(nt,it,at,"∨","\\lor"),rt(nt,it,at,"∧","\\wedge",!0),rt(nt,it,at,"∨","\\vee",!0),rt(nt,it,dt,"√","\\surd"),rt(nt,it,ht,"⟨","\\langle",!0),rt(nt,it,ht,"∣","\\lvert"),rt(nt,it,ht,"∥","\\lVert"),rt(nt,it,"close","?","?"),rt(nt,it,"close","!","!"),rt(nt,it,"close","⟩","\\rangle",!0),rt(nt,it,"close","∣","\\rvert"),rt(nt,it,"close","∥","\\rVert"),rt(nt,it,ut,"=","="),rt(nt,it,ut,":",":"),rt(nt,it,ut,"≈","\\approx",!0),rt(nt,it,ut,"≅","\\cong",!0),rt(nt,it,ut,"≥","\\ge"),rt(nt,it,ut,"≥","\\geq",!0),rt(nt,it,ut,"←","\\gets"),rt(nt,it,ut,">","\\gt",!0),rt(nt,it,ut,"∈","\\in",!0),rt(nt,it,ut,"","\\@not"),rt(nt,it,ut,"⊂","\\subset",!0),rt(nt,it,ut,"⊃","\\supset",!0),rt(nt,it,ut,"⊆","\\subseteq",!0),rt(nt,it,ut,"⊇","\\supseteq",!0),rt(nt,ot,ut,"⊈","\\nsubseteq",!0),rt(nt,ot,ut,"⊉","\\nsupseteq",!0),rt(nt,it,ut,"⊨","\\models"),rt(nt,it,ut,"←","\\leftarrow",!0),rt(nt,it,ut,"≤","\\le"),rt(nt,it,ut,"≤","\\leq",!0),rt(nt,it,ut,"<","\\lt",!0),rt(nt,it,ut,"→","\\rightarrow",!0),rt(nt,it,ut,"→","\\to"),rt(nt,ot,ut,"≱","\\ngeq",!0),rt(nt,ot,ut,"≰","\\nleq",!0),rt(nt,it,"spacing"," ","\\ "),rt(nt,it,"spacing"," ","\\space"),rt(nt,it,"spacing"," ","\\nobreakspace"),rt("text",it,"spacing"," ","\\ "),rt("text",it,"spacing"," "," "),rt("text",it,"spacing"," ","\\space"),rt("text",it,"spacing"," ","\\nobreakspace"),rt(nt,it,"spacing",null,"\\nobreak"),rt(nt,it,"spacing",null,"\\allowbreak"),rt(nt,it,"punct",",",","),rt(nt,it,"punct",";",";"),rt(nt,ot,at,"⊼","\\barwedge",!0),rt(nt,ot,at,"⊻","\\veebar",!0),rt(nt,it,at,"⊙","\\odot",!0),rt(nt,it,at,"⊕","\\oplus",!0),rt(nt,it,at,"⊗","\\otimes",!0),rt(nt,it,dt,"∂","\\partial",!0),rt(nt,it,at,"⊘","\\oslash",!0),rt(nt,ot,at,"⊚","\\circledcirc",!0),rt(nt,ot,at,"⊡","\\boxdot",!0),rt(nt,it,at,"△","\\bigtriangleup"),rt(nt,it,at,"▽","\\bigtriangledown"),rt(nt,it,at,"†","\\dagger"),rt(nt,it,at,"⋄","\\diamond"),rt(nt,it,at,"⋆","\\star"),rt(nt,it,at,"◃","\\triangleleft"),rt(nt,it,at,"▹","\\triangleright"),rt(nt,it,ht,"{","\\{"),rt("text",it,dt,"{","\\{"),rt("text",it,dt,"{","\\textbraceleft"),rt(nt,it,"close","}","\\}"),rt("text",it,dt,"}","\\}"),rt("text",it,dt,"}","\\textbraceright"),rt(nt,it,ht,"{","\\lbrace"),rt(nt,it,"close","}","\\rbrace"),rt(nt,it,ht,"[","\\lbrack",!0),rt("text",it,dt,"[","\\lbrack",!0),rt(nt,it,"close","]","\\rbrack",!0),rt("text",it,dt,"]","\\rbrack",!0),rt(nt,it,ht,"(","\\lparen",!0),rt(nt,it,"close",")","\\rparen",!0),rt("text",it,dt,"<","\\textless",!0),rt("text",it,dt,">","\\textgreater",!0),rt(nt,it,ht,"⌊","\\lfloor",!0),rt(nt,it,"close","⌋","\\rfloor",!0),rt(nt,it,ht,"⌈","\\lceil",!0),rt(nt,it,"close","⌉","\\rceil",!0),rt(nt,it,dt,"\\","\\backslash"),rt(nt,it,dt,"∣","|"),rt(nt,it,dt,"∣","\\vert"),rt("text",it,dt,"|","\\textbar",!0),rt(nt,it,dt,"∥","\\|"),rt(nt,it,dt,"∥","\\Vert"),rt("text",it,dt,"∥","\\textbardbl"),rt("text",it,dt,"~","\\textasciitilde"),rt("text",it,dt,"\\","\\textbackslash"),rt("text",it,dt,"^","\\textasciicircum"),rt(nt,it,ut,"↑","\\uparrow",!0),rt(nt,it,ut,"⇑","\\Uparrow",!0),rt(nt,it,ut,"↓","\\downarrow",!0),rt(nt,it,ut,"⇓","\\Downarrow",!0),rt(nt,it,ut,"↕","\\updownarrow",!0),rt(nt,it,ut,"⇕","\\Updownarrow",!0),rt(nt,it,ct,"∐","\\coprod"),rt(nt,it,ct,"⋁","\\bigvee"),rt(nt,it,ct,"⋀","\\bigwedge"),rt(nt,it,ct,"⨄","\\biguplus"),rt(nt,it,ct,"⋂","\\bigcap"),rt(nt,it,ct,"⋃","\\bigcup"),rt(nt,it,ct,"∫","\\int"),rt(nt,it,ct,"∫","\\intop"),rt(nt,it,ct,"∬","\\iint"),rt(nt,it,ct,"∭","\\iiint"),rt(nt,it,ct,"∏","\\prod"),rt(nt,it,ct,"∑","\\sum"),rt(nt,it,ct,"⨂","\\bigotimes"),rt(nt,it,ct,"⨁","\\bigoplus"),rt(nt,it,ct,"⨀","\\bigodot"),rt(nt,it,ct,"∮","\\oint"),rt(nt,it,ct,"∯","\\oiint"),rt(nt,it,ct,"∰","\\oiiint"),rt(nt,it,ct,"⨆","\\bigsqcup"),rt(nt,it,ct,"∫","\\smallint"),rt("text",it,"inner","…","\\textellipsis"),rt(nt,it,"inner","…","\\mathellipsis"),rt("text",it,"inner","…","\\ldots",!0),rt(nt,it,"inner","…","\\ldots",!0),rt(nt,it,"inner","⋯","\\@cdots",!0),rt(nt,it,"inner","⋱","\\ddots",!0),rt(nt,it,dt,"⋮","\\varvdots"),rt(nt,it,st,"ˊ","\\acute"),rt(nt,it,st,"ˋ","\\grave"),rt(nt,it,st,"¨","\\ddot"),rt(nt,it,st,"~","\\tilde"),rt(nt,it,st,"ˉ","\\bar"),rt(nt,it,st,"˘","\\breve"),rt(nt,it,st,"ˇ","\\check"),rt(nt,it,st,"^","\\hat"),rt(nt,it,st,"⃗","\\vec"),rt(nt,it,st,"˙","\\dot"),rt(nt,it,st,"˚","\\mathring"),rt(nt,it,lt,"","\\@imath"),rt(nt,it,lt,"","\\@jmath"),rt(nt,it,dt,"ı","ı"),rt(nt,it,dt,"ȷ","ȷ"),rt("text",it,dt,"ı","\\i",!0),rt("text",it,dt,"ȷ","\\j",!0),rt("text",it,dt,"ß","\\ss",!0),rt("text",it,dt,"æ","\\ae",!0),rt("text",it,dt,"œ","\\oe",!0),rt("text",it,dt,"ø","\\o",!0),rt("text",it,dt,"Æ","\\AE",!0),rt("text",it,dt,"Œ","\\OE",!0),rt("text",it,dt,"Ø","\\O",!0),rt("text",it,st,"ˊ","\\'"),rt("text",it,st,"ˋ","\\`"),rt("text",it,st,"ˆ","\\^"),rt("text",it,st,"˜","\\~"),rt("text",it,st,"ˉ","\\="),rt("text",it,st,"˘","\\u"),rt("text",it,st,"˙","\\."),rt("text",it,st,"¸","\\c"),rt("text",it,st,"˚","\\r"),rt("text",it,st,"ˇ","\\v"),rt("text",it,st,"¨",'\\"'),rt("text",it,st,"˝","\\H"),rt("text",it,st,"◯","\\textcircled");var pt={"--":!0,"---":!0,"``":!0,"''":!0};rt("text",it,dt,"–","--",!0),rt("text",it,dt,"–","\\textendash"),rt("text",it,dt,"—","---",!0),rt("text",it,dt,"—","\\textemdash"),rt("text",it,dt,"‘","`",!0),rt("text",it,dt,"‘","\\textquoteleft"),rt("text",it,dt,"’","'",!0),rt("text",it,dt,"’","\\textquoteright"),rt("text",it,dt,"“","``",!0),rt("text",it,dt,"“","\\textquotedblleft"),rt("text",it,dt,"”","''",!0),rt("text",it,dt,"”","\\textquotedblright"),rt(nt,it,dt,"°","\\degree",!0),rt("text",it,dt,"°","\\degree"),rt("text",it,dt,"°","\\textdegree",!0),rt(nt,it,dt,"£","\\pounds"),rt(nt,it,dt,"£","\\mathsterling",!0),rt("text",it,dt,"£","\\pounds"),rt("text",it,dt,"£","\\textsterling",!0),rt(nt,ot,dt,"✠","\\maltese"),rt("text",ot,dt,"✠","\\maltese");for(var ft=0;ft<'0123456789/@."'.length;ft++){var mt='0123456789/@."'.charAt(ft);rt(nt,it,dt,mt,mt)}for(var gt=0;gt<'0123456789!@*()-=+";:?/.,'.length;gt++){var yt='0123456789!@*()-=+";:?/.,'.charAt(gt);rt("text",it,dt,yt,yt)}for(var vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",bt=0;bt<vt.length;bt++){var wt=vt.charAt(bt);rt(nt,it,lt,wt,wt),rt("text",it,dt,wt,wt)}rt(nt,ot,dt,"C","ℂ"),rt("text",ot,dt,"C","ℂ"),rt(nt,ot,dt,"H","ℍ"),rt("text",ot,dt,"H","ℍ"),rt(nt,ot,dt,"N","ℕ"),rt("text",ot,dt,"N","ℕ"),rt(nt,ot,dt,"P","ℙ"),rt("text",ot,dt,"P","ℙ"),rt(nt,ot,dt,"Q","ℚ"),rt("text",ot,dt,"Q","ℚ"),rt(nt,ot,dt,"R","ℝ"),rt("text",ot,dt,"R","ℝ"),rt(nt,ot,dt,"Z","ℤ"),rt("text",ot,dt,"Z","ℤ"),rt(nt,it,lt,"h","ℎ"),rt("text",it,lt,"h","ℎ");for(var xt="",kt=0;kt<vt.length;kt++){var St=vt.charAt(kt);rt(nt,it,lt,St,xt=String.fromCharCode(55349,56320+kt)),rt("text",it,dt,St,xt),rt(nt,it,lt,St,xt=String.fromCharCode(55349,56372+kt)),rt("text",it,dt,St,xt),rt(nt,it,lt,St,xt=String.fromCharCode(55349,56424+kt)),rt("text",it,dt,St,xt),rt(nt,it,lt,St,xt=String.fromCharCode(55349,56580+kt)),rt("text",it,dt,St,xt),rt(nt,it,lt,St,xt=String.fromCharCode(55349,56736+kt)),rt("text",it,dt,St,xt),rt(nt,it,lt,St,xt=String.fromCharCode(55349,56788+kt)),rt("text",it,dt,St,xt),rt(nt,it,lt,St,xt=String.fromCharCode(55349,56840+kt)),rt("text",it,dt,St,xt),rt(nt,it,lt,St,xt=String.fromCharCode(55349,56944+kt)),rt("text",it,dt,St,xt),kt<26&&(rt(nt,it,lt,St,xt=String.fromCharCode(55349,56632+kt)),rt("text",it,dt,St,xt),rt(nt,it,lt,St,xt=String.fromCharCode(55349,56476+kt)),rt("text",it,dt,St,xt))}rt(nt,it,lt,"k",xt=String.fromCharCode(55349,56668)),rt("text",it,dt,"k",xt);for(var _t=0;_t<10;_t++){var Ct=_t.toString();rt(nt,it,lt,Ct,xt=String.fromCharCode(55349,57294+_t)),rt("text",it,dt,Ct,xt),rt(nt,it,lt,Ct,xt=String.fromCharCode(55349,57314+_t)),rt("text",it,dt,Ct,xt),rt(nt,it,lt,Ct,xt=String.fromCharCode(55349,57324+_t)),rt("text",it,dt,Ct,xt),rt(nt,it,lt,Ct,xt=String.fromCharCode(55349,57334+_t)),rt("text",it,dt,Ct,xt)}for(var Tt=0;Tt<"ÐÞþ".length;Tt++){var Mt="ÐÞþ".charAt(Tt);rt(nt,it,lt,Mt,Mt),rt("text",it,dt,Mt,Mt)}var At=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Et=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Ot=function(e,t,r){return tt[r][e]&&tt[r][e].replace&&(e=tt[r][e].replace),{value:e,metrics:Ee(e,t,r)}},Nt=function(e,t,r,n,i){var o,s=Ot(e,t,r),a=s.metrics;if(e=s.value,a){var l=a.italic;("text"===r||n&&"mathit"===n.font)&&(l=0),o=new Je(e,a.height,a.depth,l,a.skew,a.width,i)}else"undefined"!=typeof console&&console.warn("No character metrics for '"+e+"' in style '"+t+"' and mode '"+r+"'"),o=new Je(e,0,0,0,0,0,i);if(n){o.maxFontSize=n.sizeMultiplier,n.style.isTight()&&o.classes.push("mtight");var c=n.getColor();c&&(o.style.color=c)}return o},Rt=(e,t)=>{if(qe(e.classes)!==qe(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(1===e.classes.length){var r=e.classes[0];if("mbin"===r||"mord"===r)return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var i in t.style)if(t.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;return!0},Dt=function(e){for(var t=0,r=0,n=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>t&&(t=o.height),o.depth>r&&(r=o.depth),o.maxFontSize>n&&(n=o.maxFontSize)}e.height=t,e.depth=r,e.maxFontSize=n},zt=function(e,t,r,n){var i=new $e(e,t,r,n);return Dt(i),i},It=(e,t,r,n)=>new $e(e,t,r,n),Bt=function(e){var t=new Ce(e);return Dt(t),t},Lt=function(e,t,r){var n="";switch(e){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=e}return n+"-"+("textbf"===t&&"textit"===r?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},Pt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Ft={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},qt={fontMap:Pt,makeSymbol:Nt,mathsym:function(e,t,r,n){return void 0===n&&(n=[]),"boldsymbol"===r.font&&Ot(e,"Main-Bold",t).metrics?Nt(e,"Main-Bold",t,r,n.concat(["mathbf"])):"\\"===e||"main"===tt[t][e].font?Nt(e,"Main-Regular",t,r,n):Nt(e,"AMS-Regular",t,r,n.concat(["amsrm"]))},makeSpan:zt,makeSvgSpan:It,makeLineSpan:function(e,t,r){var n=zt([e],[],t);return n.height=Math.max(r||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),n.style.borderBottomWidth=Fe(n.height),n.maxFontSize=1,n},makeAnchor:function(e,t,r,n){var i=new He(e,t,r,n);return Dt(i),i},makeFragment:Bt,wrapFragment:function(e,t){return e instanceof Ce?zt([],[e],t):e},makeVList:function(e,t){for(var{children:r,depth:n}=function(e){if("individualShift"===e.positionType){for(var t=e.children,r=[t[0]],n=-t[0].shift-t[0].elem.depth,i=n,o=1;o<t.length;o++){var s=-t[o].shift-i-t[o].elem.depth,a=s-(t[o-1].elem.height+t[o-1].elem.depth);i+=s,r.push({type:"kern",size:a}),r.push(t[o])}return{children:r,depth:n}}var l;if("top"===e.positionType){for(var c=e.positionData,h=0;h<e.children.length;h++){var u=e.children[h];c-="kern"===u.type?u.size:u.elem.height+u.elem.depth}l=c}else if("bottom"===e.positionType)l=-e.positionData;else{var d=e.children[0];if("elem"!==d.type)throw new Error('First child must have type "elem".');if("shift"===e.positionType)l=-d.elem.depth-e.positionData;else{if("firstBaseline"!==e.positionType)throw new Error("Invalid positionType "+e.positionType+".");l=-d.elem.depth}}return{children:e.children,depth:l}}(e),i=0,o=0;o<r.length;o++){var s=r[o];if("elem"===s.type){var a=s.elem;i=Math.max(i,a.maxFontSize,a.height)}}i+=2;var l=zt(["pstrut"],[]);l.style.height=Fe(i);for(var c=[],h=n,u=n,d=n,p=0;p<r.length;p++){var f=r[p];if("kern"===f.type)d+=f.size;else{var m=f.elem,g=f.wrapperClasses||[],y=f.wrapperStyle||{},v=zt(g,[l,m],void 0,y);v.style.top=Fe(-i-d-m.depth),f.marginLeft&&(v.style.marginLeft=f.marginLeft),f.marginRight&&(v.style.marginRight=f.marginRight),c.push(v),d+=m.height+m.depth}h=Math.min(h,d),u=Math.max(u,d)}var b,w=zt(["vlist"],c);if(w.style.height=Fe(u),h<0){var x=zt([],[]),k=zt(["vlist"],[x]);k.style.height=Fe(-h);var S=zt(["vlist-s"],[new Je("​")]);b=[zt(["vlist-r"],[w,S]),zt(["vlist-r"],[k])]}else b=[zt(["vlist-r"],[w])];var _=zt(["vlist-t"],b);return 2===b.length&&_.classes.push("vlist-t2"),_.height=u,_.depth=-h,_},makeOrd:function(e,t,r){var n=e.mode,i=e.text,o=["mord"],s="math"===n||"text"===n&&t.font,a=s?t.font:t.fontFamily;if(55349===i.charCodeAt(0)){var[l,c]=function(e,t){var r=1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536,n="math"===t?0:1;if(119808<=r&&r<120484){var i=Math.floor((r-119808)/26);return[At[i][2],At[i][n]]}if(120782<=r&&r<=120831){var o=Math.floor((r-120782)/10);return[Et[o][2],Et[o][n]]}if(120485===r||120486===r)return[At[0][2],At[0][n]];if(120486<r&&r<120782)return["",""];throw new ne("Unsupported character: "+e)}(i,n);return Nt(i,l,n,t,o.concat(c))}if(a){var h,u;if("boldsymbol"===a){var d=function(e,t,r,n,i){return"textord"!==i&&Ot(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(i,n,0,0,r);h=d.fontName,u=[d.fontClass]}else s?(h=Pt[a].fontName,u=[a]):(h=Lt(a,t.fontWeight,t.fontShape),u=[a,t.fontWeight,t.fontShape]);if(Ot(i,h,n).metrics)return Nt(i,h,n,t,o.concat(u));if(pt.hasOwnProperty(i)&&"Typewriter"===h.substr(0,10)){for(var p=[],f=0;f<i.length;f++)p.push(Nt(i[f],h,n,t,o.concat(u)));return Bt(p)}}if("mathord"===r)return Nt(i,"Math-Italic",n,t,o.concat(["mathnormal"]));if("textord"===r){var m=tt[n][i]&&tt[n][i].font;if("ams"===m){var g=Lt("amsrm",t.fontWeight,t.fontShape);return Nt(i,g,n,t,o.concat("amsrm",t.fontWeight,t.fontShape))}if("main"!==m&&m){var y=Lt(m,t.fontWeight,t.fontShape);return Nt(i,y,n,t,o.concat(y,t.fontWeight,t.fontShape))}var v=Lt("textrm",t.fontWeight,t.fontShape);return Nt(i,v,n,t,o.concat(t.fontWeight,t.fontShape))}throw new Error("unexpected type: "+r+" in makeOrd")},makeGlue:(e,t)=>{var r=zt(["mspace"],[],t),n=Pe(e,t);return r.style.marginRight=Fe(n),r},staticSvg:function(e,t){var[r,n,i]=Ft[e],o=new Ye(r),s=new Ke([o],{width:Fe(n),height:Fe(i),style:"width:"+Fe(n),viewBox:"0 0 "+1e3*n+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),a=It(["overlay"],[s],t);return a.height=i,a.style.height=Fe(i),a.style.width=Fe(n),a},svgData:Ft,tryCombineChars:e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof Je&&n instanceof Je&&Rt(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e}},Ut={number:3,unit:"mu"},jt={number:4,unit:"mu"},Vt={number:5,unit:"mu"},$t={mord:{mop:Ut,mbin:jt,mrel:Vt,minner:Ut},mop:{mord:Ut,mop:Ut,mrel:Vt,minner:Ut},mbin:{mord:jt,mop:jt,mopen:jt,minner:jt},mrel:{mord:Vt,mop:Vt,mopen:Vt,minner:Vt},mopen:{},mclose:{mop:Ut,mbin:jt,mrel:Vt,minner:Ut},mpunct:{mord:Ut,mop:Ut,mrel:Vt,mopen:Ut,mclose:Ut,mpunct:Ut,minner:Ut},minner:{mord:Ut,mop:Ut,mbin:jt,mrel:Vt,mopen:Ut,mpunct:Ut,minner:Ut}},Ht={mord:{mop:Ut},mop:{mord:Ut,mop:Ut},mbin:{},mrel:{},mopen:{},mclose:{mop:Ut},mpunct:{},minner:{mop:Ut}},Wt={},Gt={},Jt={};function Kt(e){for(var{type:t,names:r,props:n,handler:i,htmlBuilder:o,mathmlBuilder:s}=e,a={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:void 0===n.allowedInMath||n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},l=0;l<r.length;++l)Wt[r[l]]=a;t&&(o&&(Gt[t]=o),s&&(Jt[t]=s))}function Yt(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;Kt({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Xt=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},Zt=function(e){return"ordgroup"===e.type?e.body:[e]},Qt=qt.makeSpan,er=["leftmost","mbin","mopen","mrel","mop","mpunct"],tr=["rightmost","mrel","mclose","mpunct"],rr={display:we.DISPLAY,text:we.TEXT,script:we.SCRIPT,scriptscript:we.SCRIPTSCRIPT},nr={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ir=function(e,t,r,n){void 0===n&&(n=[null,null]);for(var i=[],o=0;o<e.length;o++){var s=hr(e[o],t);if(s instanceof Ce){var a=s.children;i.push(...a)}else i.push(s)}if(qt.tryCombineChars(i),!r)return i;var l=t;if(1===e.length){var c=e[0];"sizing"===c.type?l=t.havingSize(c.size):"styling"===c.type&&(l=t.havingStyle(rr[c.style]))}var h=Qt([n[0]||"leftmost"],[],t),u=Qt([n[1]||"rightmost"],[],t),d="root"===r;return or(i,((e,t)=>{var r=t.classes[0],n=e.classes[0];"mbin"===r&&le.contains(tr,n)?t.classes[0]="mord":"mbin"===n&&le.contains(er,r)&&(e.classes[0]="mord")}),{node:h},u,d),or(i,((e,t)=>{var r=lr(t),n=lr(e),i=r&&n?e.hasClass("mtight")?Ht[r][n]:$t[r][n]:null;if(i)return qt.makeGlue(i,l)}),{node:h},u,d),i},or=function e(t,r,n,i,o){i&&t.push(i);for(var s=0;s<t.length;s++){var a=t[s],l=sr(a);if(l)e(l.children,r,n,null,o);else{var c=!a.hasClass("mspace");if(c){var h=r(a,n.node);h&&(n.insertAfter?n.insertAfter(h):(t.unshift(h),s++))}c?n.node=a:o&&a.hasClass("newline")&&(n.node=Qt(["leftmost"])),n.insertAfter=(e=>r=>{t.splice(e+1,0,r),s++})(s)}}i&&t.pop()},sr=function(e){return e instanceof Ce||e instanceof He||e instanceof $e&&e.hasClass("enclosing")?e:null},ar=function e(t,r){var n=sr(t);if(n){var i=n.children;if(i.length){if("right"===r)return e(i[i.length-1],"right");if("left"===r)return e(i[0],"left")}}return t},lr=function(e,t){return e?(t&&(e=ar(e,t)),nr[e.classes[0]]||null):null},cr=function(e,t){var r=["nulldelimiter"].concat(e.baseSizingClasses());return Qt(t.concat(r))},hr=function(e,t,r){if(!e)return Qt();if(Gt[e.type]){var n=Gt[e.type](e,t);if(r&&t.size!==r.size){n=Qt(t.sizingClasses(r),[n],t);var i=t.sizeMultiplier/r.sizeMultiplier;n.height*=i,n.depth*=i}return n}throw new ne("Got group of unknown type: '"+e.type+"'")};function ur(e,t){var r=Qt(["base"],e,t),n=Qt(["strut"]);return n.style.height=Fe(r.height+r.depth),r.depth&&(n.style.verticalAlign=Fe(-r.depth)),r.children.unshift(n),r}function dr(e,t){var r=null;1===e.length&&"tag"===e[0].type&&(r=e[0].tag,e=e[0].body);var n,i=ir(e,t,"root");2===i.length&&i[1].hasClass("tag")&&(n=i.pop());for(var o,s=[],a=[],l=0;l<i.length;l++)if(a.push(i[l]),i[l].hasClass("mbin")||i[l].hasClass("mrel")||i[l].hasClass("allowbreak")){for(var c=!1;l<i.length-1&&i[l+1].hasClass("mspace")&&!i[l+1].hasClass("newline");)l++,a.push(i[l]),i[l].hasClass("nobreak")&&(c=!0);c||(s.push(ur(a,t)),a=[])}else i[l].hasClass("newline")&&(a.pop(),a.length>0&&(s.push(ur(a,t)),a=[]),s.push(i[l]));a.length>0&&s.push(ur(a,t)),r?((o=ur(ir(r,t,!0))).classes=["tag"],s.push(o)):n&&s.push(n);var h=Qt(["katex-html"],s);if(h.setAttribute("aria-hidden","true"),o){var u=o.children[0];u.style.height=Fe(h.height+h.depth),h.depth&&(u.style.verticalAlign=Fe(-h.depth))}return h}function pr(e){return new Ce(e)}class fr{constructor(e,t,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=r||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=qe(this.classes));for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=le.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+le.escape(qe(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">"}toText(){return this.children.map((e=>e.toText())).join("")}}class mr{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return le.escape(this.toText())}toText(){return this.text}}var gr={MathNode:fr,TextNode:mr,SpaceNode:class{constructor(e){this.width=void 0,this.character=void 0,this.width=e,this.character=e>=.05555&&e<=.05556?" ":e>=.1666&&e<=.1667?" ":e>=.2222&&e<=.2223?" ":e>=.2777&&e<=.2778?"  ":e>=-.05556&&e<=-.05555?" ⁣":e>=-.1667&&e<=-.1666?" ⁣":e>=-.2223&&e<=-.2222?" ⁣":e>=-.2778&&e<=-.2777?" ⁣":null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Fe(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Fe(this.width)+'"/>'}toText(){return this.character?this.character:" "}},newDocumentFragment:pr},yr=function(e,t,r){return!tt[t][e]||!tt[t][e].replace||55349===e.charCodeAt(0)||pt.hasOwnProperty(e)&&r&&(r.fontFamily&&"tt"===r.fontFamily.substr(4,2)||r.font&&"tt"===r.font.substr(4,2))||(e=tt[t][e].replace),new gr.TextNode(e)},vr=function(e){return 1===e.length?e[0]:new gr.MathNode("mrow",e)},br=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var r=t.font;if(!r||"mathnormal"===r)return null;var n=e.mode;if("mathit"===r)return"italic";if("boldsymbol"===r)return"textord"===e.type?"bold":"bold-italic";if("mathbf"===r)return"bold";if("mathbb"===r)return"double-struck";if("mathfrak"===r)return"fraktur";if("mathscr"===r||"mathcal"===r)return"script";if("mathsf"===r)return"sans-serif";if("mathtt"===r)return"monospace";var i=e.text;return le.contains(["\\imath","\\jmath"],i)?null:(tt[n][i]&&tt[n][i].replace&&(i=tt[n][i].replace),Ee(i,qt.fontMap[r].fontName,n)?qt.fontMap[r].variant:null)},wr=function(e,t,r){if(1===e.length){var n=kr(e[0],t);return r&&n instanceof fr&&"mo"===n.type&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var i,o=[],s=0;s<e.length;s++){var a=kr(e[s],t);if(a instanceof fr&&i instanceof fr){if("mtext"===a.type&&"mtext"===i.type&&a.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...a.children);continue}if("mn"===a.type&&"mn"===i.type){i.children.push(...a.children);continue}if("mi"===a.type&&1===a.children.length&&"mn"===i.type){var l=a.children[0];if(l instanceof mr&&"."===l.text){i.children.push(...a.children);continue}}else if("mi"===i.type&&1===i.children.length){var c=i.children[0];if(c instanceof mr&&"̸"===c.text&&("mo"===a.type||"mi"===a.type||"mn"===a.type)){var h=a.children[0];h instanceof mr&&h.text.length>0&&(h.text=h.text.slice(0,1)+"̸"+h.text.slice(1),o.pop())}}}o.push(a),i=a}return o},xr=function(e,t,r){return vr(wr(e,t,r))},kr=function(e,t){if(!e)return new gr.MathNode("mrow");if(Jt[e.type])return Jt[e.type](e,t);throw new ne("Got group of unknown type: '"+e.type+"'")};function Sr(e,t,r,n,i){var o,s=wr(e,r);o=1===s.length&&s[0]instanceof fr&&le.contains(["mrow","mtable"],s[0].type)?s[0]:new gr.MathNode("mrow",s);var a=new gr.MathNode("annotation",[new gr.TextNode(t)]);a.setAttribute("encoding","application/x-tex");var l=new gr.MathNode("semantics",[o,a]),c=new gr.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");var h=i?"katex":"katex-mathml";return qt.makeSpan([h],[c])}var _r=function(e){return new ze({style:e.displayMode?we.DISPLAY:we.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Cr=function(e,t){if(t.displayMode){var r=["katex-display"];t.leqno&&r.push("leqno"),t.fleqn&&r.push("fleqn"),e=qt.makeSpan(r,[e])}return e},Tr={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},Mr={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Ar=function(e,t,r,n,i){var o,s=e.height+e.depth+r+n;if(/fbox|color|angl/.test(t)){if(o=qt.makeSpan(["stretchy",t],[],i),"fbox"===t){var a=i.color&&i.getColor();a&&(o.style.borderColor=a)}}else{var l=[];/^[bx]cancel$/.test(t)&&l.push(new Xe({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&l.push(new Xe({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new Ke(l,{width:"100%",height:Fe(s)});o=qt.makeSvgSpan([],[c],i)}return o.height=s,o.style.height=Fe(s),o},Er=function(e){var t=new gr.MathNode("mo",[new gr.TextNode(Tr[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},Or=function(e,t){var{span:r,minWidth:n,height:i}=function(){var r=4e5,n=e.label.substr(1);if(le.contains(["widehat","widecheck","widetilde","utilde"],n)){var i,o,s,a="ordgroup"===(p=e.base).type?p.body.length:1;if(a>5)"widehat"===n||"widecheck"===n?(i=420,r=2364,s=.42,o=n+"4"):(i=312,r=2340,s=.34,o="tilde4");else{var l=[1,1,2,2,3,3][a];"widehat"===n||"widecheck"===n?(r=[0,1062,2364,2364,2364][l],i=[0,239,300,360,420][l],s=[0,.24,.3,.3,.36,.42][l],o=n+l):(r=[0,600,1033,2339,2340][l],i=[0,260,286,306,312][l],s=[0,.26,.286,.3,.306,.34][l],o="tilde"+l)}var c=new Ye(o),h=new Ke([c],{width:"100%",height:Fe(s),viewBox:"0 0 "+r+" "+i,preserveAspectRatio:"none"});return{span:qt.makeSvgSpan([],[h],t),minWidth:0,height:s}}var u,d,p,f=[],m=Mr[n],[g,y,v]=m,b=v/1e3,w=g.length;if(1===w)u=["hide-tail"],d=[m[3]];else if(2===w)u=["halfarrow-left","halfarrow-right"],d=["xMinYMin","xMaxYMin"];else{if(3!==w)throw new Error("Correct katexImagesData or update code here to support\n                    "+w+" children.");u=["brace-left","brace-center","brace-right"],d=["xMinYMin","xMidYMin","xMaxYMin"]}for(var x=0;x<w;x++){var k=new Ye(g[x]),S=new Ke([k],{width:"400em",height:Fe(b),viewBox:"0 0 "+r+" "+v,preserveAspectRatio:d[x]+" slice"}),_=qt.makeSvgSpan([u[x]],[S],t);if(1===w)return{span:_,minWidth:y,height:b};_.style.height=Fe(b),f.push(_)}return{span:qt.makeSpan(["stretchy"],f,t),minWidth:y,height:b}}();return r.height=i,r.style.height=Fe(i),n>0&&(r.style.minWidth=Fe(n)),r};function Nr(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function Rr(e){var t=Dr(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function Dr(e){return e&&("atom"===e.type||et.hasOwnProperty(e.type))?e:null}var zr=(e,t)=>{var r,n,i;e&&"supsub"===e.type?(r=(n=Nr(e.base,"accent")).base,e.base=r,i=function(e){if(e instanceof $e)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(hr(e,t)),e.base=n):r=(n=Nr(e,"accent")).base;var o=hr(r,t.havingCrampedStyle()),s=0;if(n.isShifty&&le.isCharacterBox(r)){var a=le.getBaseElem(r);s=Ze(hr(a,t.havingCrampedStyle())).skew}var l,c="\\c"===n.label,h=c?o.height+o.depth:Math.min(o.height,t.fontMetrics().xHeight);if(n.isStretchy)l=Or(n,t),l=qt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:s>0?{width:"calc(100% - "+Fe(2*s)+")",marginLeft:Fe(2*s)}:void 0}]},t);else{var u,d;"\\vec"===n.label?(u=qt.staticSvg("vec",t),d=qt.svgData.vec[1]):((u=Ze(u=qt.makeOrd({mode:n.mode,text:n.label},t,"textord"))).italic=0,d=u.width,c&&(h+=u.depth)),l=qt.makeSpan(["accent-body"],[u]);var p="\\textcircled"===n.label;p&&(l.classes.push("accent-full"),h=o.height);var f=s;p||(f-=d/2),l.style.left=Fe(f),"\\textcircled"===n.label&&(l.style.top=".2em"),l=qt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-h},{type:"elem",elem:l}]},t)}var m=qt.makeSpan(["mord","accent"],[l],t);return i?(i.children[0]=m,i.height=Math.max(m.height,i.height),i.classes[0]="mord",i):m},Ir=(e,t)=>{var r=e.isStretchy?Er(e.label):new gr.MathNode("mo",[yr(e.label,e.mode)]),n=new gr.MathNode("mover",[kr(e.base,t),r]);return n.setAttribute("accent","true"),n},Br=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((e=>"\\"+e)).join("|"));Kt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=Xt(t[0]),n=!Br.test(e.funcName),i=!n||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:i,base:r}},htmlBuilder:zr,mathmlBuilder:Ir}),Kt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return"math"===n&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:zr,mathmlBuilder:Ir}),Kt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}},htmlBuilder:(e,t)=>{var r=hr(e.base,t),n=Or(e,t),i="\\utilde"===e.label?.12:0,o=qt.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},t);return qt.makeSpan(["mord","accentunder"],[o],t)},mathmlBuilder:(e,t)=>{var r=Er(e.label),n=new gr.MathNode("munder",[kr(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var Lr=e=>{var t=new gr.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Kt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:i}=e;return{type:"xArrow",mode:n.mode,label:i,body:t[0],below:r[0]}},htmlBuilder(e,t){var r,n=t.style,i=t.havingStyle(n.sup()),o=qt.wrapFragment(hr(e.body,i,t),t),s="\\x"===e.label.slice(0,2)?"x":"cd";o.classes.push(s+"-arrow-pad"),e.below&&(i=t.havingStyle(n.sub()),(r=qt.wrapFragment(hr(e.below,i,t),t)).classes.push(s+"-arrow-pad"));var a,l=Or(e,t),c=-t.fontMetrics().axisHeight+.5*l.height,h=-t.fontMetrics().axisHeight-.5*l.height-.111;if((o.depth>.25||"\\xleftequilibrium"===e.label)&&(h-=o.depth),r){var u=-t.fontMetrics().axisHeight+r.height+.5*l.height+.111;a=qt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:h},{type:"elem",elem:l,shift:c},{type:"elem",elem:r,shift:u}]},t)}else a=qt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:h},{type:"elem",elem:l,shift:c}]},t);return a.children[0].children[0].children[1].classes.push("svg-align"),qt.makeSpan(["mrel","x-arrow"],[a],t)},mathmlBuilder(e,t){var r,n=Er(e.label);if(n.setAttribute("minsize","x"===e.label.charAt(0)?"1.75em":"3.0em"),e.body){var i=Lr(kr(e.body,t));if(e.below){var o=Lr(kr(e.below,t));r=new gr.MathNode("munderover",[n,o,i])}else r=new gr.MathNode("mover",[n,i])}else if(e.below){var s=Lr(kr(e.below,t));r=new gr.MathNode("munder",[n,s])}else r=Lr(),r=new gr.MathNode("mover",[n,r]);return r}});var Pr={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Fr=e=>"textord"===e.type&&"@"===e.text;function qr(e,t,r){var n=Pr[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":var i={type:"atom",text:n,mode:"math",family:"rel"},o={type:"ordgroup",mode:"math",body:[r.callFunction("\\\\cdleft",[t[0]],[]),r.callFunction("\\Big",[i],[]),r.callFunction("\\\\cdright",[t[1]],[])]};return r.callFunction("\\\\cdparent",[o],[]);case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return r.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}Kt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=qt.wrapFragment(hr(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=Fe(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new gr.MathNode("mrow",[kr(e.label,t)]);return(r=new gr.MathNode("mpadded",[r])).setAttribute("width","0"),"left"===e.side&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),(r=new gr.MathNode("mstyle",[r])).setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}}),Kt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=qt.wrapFragment(hr(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder:(e,t)=>new gr.MathNode("mrow",[kr(e.fragment,t)])}),Kt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=Nr(t[0],"ordgroup").body,i="",o=0;o<n.length;o++){i+=Nr(n[o],"textord").text}var s,a=parseInt(i);if(isNaN(a))throw new ne("\\@char has non-numeric argument "+i);if(a<0||a>=1114111)throw new ne("\\@char with invalid code point "+i);return a<=65535?s=String.fromCharCode(a):(a-=65536,s=String.fromCharCode(55296+(a>>10),56320+(1023&a))),{type:"textord",mode:r.mode,text:s}}});var Ur=(e,t)=>{var r=ir(e.body,t.withColor(e.color),!1);return qt.makeFragment(r)},jr=(e,t)=>{var r=wr(e.body,t.withColor(e.color)),n=new gr.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};Kt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=Nr(t[0],"color-token").color,i=t[1];return{type:"color",mode:r.mode,color:n,body:Zt(i)}},htmlBuilder:Ur,mathmlBuilder:jr}),Kt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,i=Nr(t[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var o=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:o}},htmlBuilder:Ur,mathmlBuilder:jr}),Kt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler(e,t,r){var{parser:n}=e,i=r[0],o=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:o,size:i&&Nr(i,"size").value}},htmlBuilder(e,t){var r=qt.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=Fe(Pe(e.size,t)))),r},mathmlBuilder(e,t){var r=new gr.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",Fe(Pe(e.size,t)))),r}});var Vr={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},$r=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new ne("Expected a control sequence",e);return t},Hr=(e,t,r,n)=>{var i=e.gullet.macros.get(r.text);null==i&&(r.noexpand=!0,i={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,i,n)};Kt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(Vr[n.text])return"\\global"!==r&&"\\\\globallong"!==r||(n.text=Vr[n.text]),Nr(t.parseFunction(),"internal");throw new ne("Invalid token after macro prefix",n)}}),Kt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new ne("Expected a control sequence",n);for(var o,s=0,a=[[]];"{"!==t.gullet.future().text;)if("#"===(n=t.gullet.popToken()).text){if("{"===t.gullet.future().text){o=t.gullet.future(),a[s].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ne('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==s+1)throw new ne('Argument number "'+n.text+'" out of order');s++,a.push([])}else{if("EOF"===n.text)throw new ne("Expected a macro definition");a[s].push(n.text)}var{tokens:l}=t.gullet.consumeArg();return o&&l.unshift(o),"\\edef"!==r&&"\\xdef"!==r||(l=t.gullet.expandTokens(l)).reverse(),t.gullet.macros.set(i,{tokens:l,numArgs:s,delimiters:a},r===Vr[r]),{type:"internal",mode:t.mode}}}),Kt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=$r(t.gullet.popToken());t.gullet.consumeSpaces();var i=(e=>{var t=e.gullet.popToken();return"="===t.text&&" "===(t=e.gullet.popToken()).text&&(t=e.gullet.popToken()),t})(t);return Hr(t,n,i,"\\\\globallet"===r),{type:"internal",mode:t.mode}}}),Kt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=$r(t.gullet.popToken()),i=t.gullet.popToken(),o=t.gullet.popToken();return Hr(t,n,o,"\\\\globalfuture"===r),t.gullet.pushToken(o),t.gullet.pushToken(i),{type:"internal",mode:t.mode}}});var Wr=function(e,t,r){var n=Ee(tt.math[e]&&tt.math[e].replace||e,t,r);if(!n)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return n},Gr=function(e,t,r,n){var i=r.havingBaseStyle(t),o=qt.makeSpan(n.concat(i.sizingClasses(r)),[e],r),s=i.sizeMultiplier/r.sizeMultiplier;return o.height*=s,o.depth*=s,o.maxFontSize=i.sizeMultiplier,o},Jr=function(e,t,r){var n=t.havingBaseStyle(r),i=(1-t.sizeMultiplier/n.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Fe(i),e.height-=i,e.depth+=i},Kr=function(e,t,r,n,i,o){var s=function(e,t,r,n){return qt.makeSymbol(e,"Size"+t+"-Regular",r,n)}(e,t,i,n),a=Gr(qt.makeSpan(["delimsizing","size"+t],[s],n),we.TEXT,n,o);return r&&Jr(a,n,we.TEXT),a},Yr=function(e,t,r){var n;return n="Size1-Regular"===t?"delim-size1":"delim-size4",{type:"elem",elem:qt.makeSpan(["delimsizinginner",n],[qt.makeSpan([],[qt.makeSymbol(e,t,r)])])}},Xr=function(e,t,r){var n=Te["Size4-Regular"][e.charCodeAt(0)]?Te["Size4-Regular"][e.charCodeAt(0)][4]:Te["Size1-Regular"][e.charCodeAt(0)][4],i=new Ye("inner",function(e,t){switch(e){case"⎜":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"∣":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"∥":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145zM367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z";case"⎟":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"⎢":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"⎥":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"⎪":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"⏐":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"‖":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257zM478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z";default:return""}}(e,Math.round(1e3*t))),o=new Ke([i],{width:Fe(n),height:Fe(t),style:"width:"+Fe(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),s=qt.makeSvgSpan([],[o],r);return s.height=t,s.style.height=Fe(t),s.style.width=Fe(n),{type:"elem",elem:s}},Zr={type:"kern",size:-.008},Qr=["|","\\lvert","\\rvert","\\vert"],en=["\\|","\\lVert","\\rVert","\\Vert"],tn=function(e,t,r,n,i,o){var s,a,l,c;s=l=c=e,a=null;var h="Size1-Regular";"\\uparrow"===e?l=c="⏐":"\\Uparrow"===e?l=c="‖":"\\downarrow"===e?s=l="⏐":"\\Downarrow"===e?s=l="‖":"\\updownarrow"===e?(s="\\uparrow",l="⏐",c="\\downarrow"):"\\Updownarrow"===e?(s="\\Uparrow",l="‖",c="\\Downarrow"):le.contains(Qr,e)?l="∣":le.contains(en,e)?l="∥":"["===e||"\\lbrack"===e?(s="⎡",l="⎢",c="⎣",h="Size4-Regular"):"]"===e||"\\rbrack"===e?(s="⎤",l="⎥",c="⎦",h="Size4-Regular"):"\\lfloor"===e||"⌊"===e?(l=s="⎢",c="⎣",h="Size4-Regular"):"\\lceil"===e||"⌈"===e?(s="⎡",l=c="⎢",h="Size4-Regular"):"\\rfloor"===e||"⌋"===e?(l=s="⎥",c="⎦",h="Size4-Regular"):"\\rceil"===e||"⌉"===e?(s="⎤",l=c="⎥",h="Size4-Regular"):"("===e||"\\lparen"===e?(s="⎛",l="⎜",c="⎝",h="Size4-Regular"):")"===e||"\\rparen"===e?(s="⎞",l="⎟",c="⎠",h="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(s="⎧",a="⎨",c="⎩",l="⎪",h="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(s="⎫",a="⎬",c="⎭",l="⎪",h="Size4-Regular"):"\\lgroup"===e||"⟮"===e?(s="⎧",c="⎩",l="⎪",h="Size4-Regular"):"\\rgroup"===e||"⟯"===e?(s="⎫",c="⎭",l="⎪",h="Size4-Regular"):"\\lmoustache"===e||"⎰"===e?(s="⎧",c="⎭",l="⎪",h="Size4-Regular"):"\\rmoustache"!==e&&"⎱"!==e||(s="⎫",c="⎩",l="⎪",h="Size4-Regular");var u=Wr(s,h,i),d=u.height+u.depth,p=Wr(l,h,i),f=p.height+p.depth,m=Wr(c,h,i),g=m.height+m.depth,y=0,v=1;if(null!==a){var b=Wr(a,h,i);y=b.height+b.depth,v=2}var w=d+g+y,x=w+Math.max(0,Math.ceil((t-w)/(v*f)))*v*f,k=n.fontMetrics().axisHeight;r&&(k*=n.sizeMultiplier);var S=x/2-k,_=[];if(_.push(Yr(c,h,i)),_.push(Zr),null===a){var C=x-d-g+.016;_.push(Xr(l,C,n))}else{var T=(x-d-g-y)/2+.016;_.push(Xr(l,T,n)),_.push(Zr),_.push(Yr(a,h,i)),_.push(Zr),_.push(Xr(l,T,n))}_.push(Zr),_.push(Yr(s,h,i));var M=n.havingBaseStyle(we.TEXT),A=qt.makeVList({positionType:"bottom",positionData:S,children:_},M);return Gr(qt.makeSpan(["delimsizing","mult"],[A],M),we.TEXT,n,o)},rn=function(e,t,r,n,i){var o=function(e,t,r){t*=1e3;var n="";switch(e){case"sqrtMain":n=function(e,t){return"M95,"+(622+e+t)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+e/2.075+" -"+e+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+e)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,80);break;case"sqrtSize1":n=function(e,t){return"M263,"+(601+e+t)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+e/2.084+" -"+e+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+e)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,80);break;case"sqrtSize2":n=function(e,t){return"M983 "+(10+e+t)+"\nl"+e/3.13+" -"+e+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+e)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,80);break;case"sqrtSize3":n=function(e,t){return"M424,"+(2398+e+t)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+e/4.223+" -"+e+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+e)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+e)+" "+t+"\nh400000v"+(40+e)+"h-400000z"}(t,80);break;case"sqrtSize4":n=function(e,t){return"M473,"+(2713+e+t)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+e/5.298+" -"+e+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+e)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"}(t,80);break;case"sqrtTall":n=function(e,t,r){return"M702 "+(e+t)+"H400000"+(40+e)+"\nH742v"+(r-54-t-e)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+t+"H400000v"+(40+e)+"H742z"}(t,80,r)}return n}(e,n,r),s=new Ye(e,o),a=new Ke([s],{width:"400em",height:Fe(t),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return qt.makeSvgSpan(["hide-tail"],[a],i)},nn=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],on=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],sn=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],an=[0,1.2,1.8,2.4,3],ln=[{type:"small",style:we.SCRIPTSCRIPT},{type:"small",style:we.SCRIPT},{type:"small",style:we.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],cn=[{type:"small",style:we.SCRIPTSCRIPT},{type:"small",style:we.SCRIPT},{type:"small",style:we.TEXT},{type:"stack"}],hn=[{type:"small",style:we.SCRIPTSCRIPT},{type:"small",style:we.SCRIPT},{type:"small",style:we.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],un=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},dn=function(e,t,r,n){for(var i=Math.min(2,3-n.style.size);i<r.length&&"stack"!==r[i].type;i++){var o=Wr(e,un(r[i]),"math"),s=o.height+o.depth;if("small"===r[i].type&&(s*=n.havingBaseStyle(r[i].style).sizeMultiplier),s>t)return r[i]}return r[r.length-1]},pn=function(e,t,r,n,i,o){var s;"<"===e||"\\lt"===e||"⟨"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"⟩"!==e||(e="\\rangle"),s=le.contains(sn,e)?ln:le.contains(nn,e)?hn:cn;var a=dn(e,t,s,n);return"small"===a.type?function(e,t,r,n,i,o){var s=qt.makeSymbol(e,"Main-Regular",i,n),a=Gr(s,t,n,o);return r&&Jr(a,n,t),a}(e,a.style,r,n,i,o):"large"===a.type?Kr(e,a.size,r,n,i,o):tn(e,t,r,n,i,o)},fn={sqrtImage:function(e,t){var r,n,i=t.havingBaseSizing(),o=dn("\\surd",e*i.sizeMultiplier,hn,i),s=i.sizeMultiplier,a=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l=0,c=0,h=0;return"small"===o.type?(e<1?s=1:e<1.4&&(s=.7),c=(1+a)/s,(r=rn("sqrtMain",l=(1+a+.08)/s,h=1e3+1e3*a+80,a,t)).style.minWidth="0.853em",n=.833/s):"large"===o.type?(h=1080*an[o.size],c=(an[o.size]+a)/s,l=(an[o.size]+a+.08)/s,(r=rn("sqrtSize"+o.size,l,h,a,t)).style.minWidth="1.02em",n=1/s):(l=e+a+.08,c=e+a,h=Math.floor(1e3*e+a)+80,(r=rn("sqrtTall",l,h,a,t)).style.minWidth="0.742em",n=1.056),r.height=c,r.style.height=Fe(l),{span:r,advanceWidth:n,ruleWidth:(t.fontMetrics().sqrtRuleThickness+a)*s}},sizedDelim:function(e,t,r,n,i){if("<"===e||"\\lt"===e||"⟨"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"⟩"!==e||(e="\\rangle"),le.contains(nn,e)||le.contains(sn,e))return Kr(e,t,!1,r,n,i);if(le.contains(on,e))return tn(e,an[t],!1,r,n,i);throw new ne("Illegal delimiter: '"+e+"'")},sizeToMaxHeight:an,customSizedDelim:pn,leftRightDelim:function(e,t,r,n,i,o){var s=n.fontMetrics().axisHeight*n.sizeMultiplier,a=5/n.fontMetrics().ptPerEm,l=Math.max(t-s,r+s),c=Math.max(l/500*901,2*l-a);return pn(e,c,!0,n,i,o)}},mn={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},gn=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function yn(e,t){var r=Dr(e);if(r&&le.contains(gn,r.text))return r;throw new ne(r?"Invalid delimiter '"+r.text+"' after '"+t.funcName+"'":"Invalid delimiter type '"+e.type+"'",e)}function vn(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Kt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=yn(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:mn[e.funcName].size,mclass:mn[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>"."===e.delim?qt.makeSpan([e.mclass]):fn.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];"."!==e.delim&&t.push(yr(e.delim,e.mode));var r=new gr.MathNode("mo",t);"mopen"===e.mclass||"mclose"===e.mclass?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=Fe(fn.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}}),Kt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&"string"!=typeof r)throw new ne("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:yn(t[0],e).text,color:r}}}),Kt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=yn(t[0],e),n=e.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var o=Nr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:o.delim,rightColor:o.color}},htmlBuilder:(e,t)=>{vn(e);for(var r,n,i=ir(e.body,t,!0,["mopen","mclose"]),o=0,s=0,a=!1,l=0;l<i.length;l++)i[l].isMiddle?a=!0:(o=Math.max(i[l].height,o),s=Math.max(i[l].depth,s));if(o*=t.sizeMultiplier,s*=t.sizeMultiplier,r="."===e.left?cr(t,["mopen"]):fn.leftRightDelim(e.left,o,s,t,e.mode,["mopen"]),i.unshift(r),a)for(var c=1;c<i.length;c++){var h=i[c].isMiddle;h&&(i[c]=fn.leftRightDelim(h.delim,o,s,h.options,e.mode,[]))}if("."===e.right)n=cr(t,["mclose"]);else{var u=e.rightColor?t.withColor(e.rightColor):t;n=fn.leftRightDelim(e.right,o,s,u,e.mode,["mclose"])}return i.push(n),qt.makeSpan(["minner"],i,t)},mathmlBuilder:(e,t)=>{vn(e);var r=wr(e.body,t);if("."!==e.left){var n=new gr.MathNode("mo",[yr(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if("."!==e.right){var i=new gr.MathNode("mo",[yr(e.right,e.mode)]);i.setAttribute("fence","true"),e.rightColor&&i.setAttribute("mathcolor",e.rightColor),r.push(i)}return vr(r)}}),Kt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=yn(t[0],e);if(!e.parser.leftrightDepth)throw new ne("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if("."===e.delim)r=cr(t,[]);else{r=fn.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r="\\vert"===e.delim||"|"===e.delim?yr("|","text"):yr(e.delim,e.mode),n=new gr.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var bn=(e,t)=>{var r,n,i,o=qt.wrapFragment(hr(e.body,t),t),s=e.label.substr(1),a=t.sizeMultiplier,l=0,c=le.isCharacterBox(e.body);if("sout"===s)(r=qt.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/a,l=-.5*t.fontMetrics().xHeight;else if("phase"===s){var h=Pe({number:.6,unit:"pt"},t),u=Pe({number:.35,unit:"ex"},t);a/=t.havingBaseSizing().sizeMultiplier;var d=o.height+o.depth+h+u;o.style.paddingLeft=Fe(d/2+h);var p=Math.floor(1e3*d*a),f="M400000 "+(n=p)+" H0 L"+n/2+" 0 l65 45 L145 "+(n-80)+" H400000z",m=new Ke([new Ye("phase",f)],{width:"400em",height:Fe(p/1e3),viewBox:"0 0 400000 "+p,preserveAspectRatio:"xMinYMin slice"});(r=qt.makeSvgSpan(["hide-tail"],[m],t)).style.height=Fe(d),l=o.depth+h+u}else{/cancel/.test(s)?c||o.classes.push("cancel-pad"):"angl"===s?o.classes.push("anglpad"):o.classes.push("boxpad");var g=0,y=0,v=0;/box/.test(s)?(v=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),y=g=t.fontMetrics().fboxsep+("colorbox"===s?0:v)):"angl"===s?(g=4*(v=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness)),y=Math.max(0,.25-o.depth)):y=g=c?.2:0,r=Ar(o,s,g,y,t),/fbox|boxed|fcolorbox/.test(s)?(r.style.borderStyle="solid",r.style.borderWidth=Fe(v)):"angl"===s&&.049!==v&&(r.style.borderTopWidth=Fe(v),r.style.borderRightWidth=Fe(v)),l=o.depth+y,e.backgroundColor&&(r.style.backgroundColor=e.backgroundColor,e.borderColor&&(r.style.borderColor=e.borderColor))}if(e.backgroundColor)i=qt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:l},{type:"elem",elem:o,shift:0}]},t);else{var b=/cancel|phase/.test(s)?["svg-align"]:[];i=qt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:r,shift:l,wrapperClasses:b}]},t)}return/cancel/.test(s)&&(i.height=o.height,i.depth=o.depth),/cancel/.test(s)&&!c?qt.makeSpan(["mord","cancel-lap"],[i],t):qt.makeSpan(["mord"],[i],t)},wn=(e,t)=>{var r=0,n=new gr.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[kr(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),"\\fcolorbox"===e.label){var i=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};Kt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:i}=e,o=Nr(t[0],"color-token").color,s=t[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:o,body:s}},htmlBuilder:bn,mathmlBuilder:wn}),Kt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:i}=e,o=Nr(t[0],"color-token").color,s=Nr(t[1],"color-token").color,a=t[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,borderColor:o,body:a}},htmlBuilder:bn,mathmlBuilder:wn}),Kt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}}),Kt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"enclose",mode:r.mode,label:n,body:i}},htmlBuilder:bn,mathmlBuilder:wn}),Kt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var xn={};function kn(e){for(var{type:t,names:r,props:n,handler:i,htmlBuilder:o,mathmlBuilder:s}=e,a={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<r.length;++l)xn[r[l]]=a;o&&(Gt[t]=o),s&&(Jt[t]=s)}var Sn={};function _n(e,t){Sn[e]=t}function Cn(e){var t=[];e.consumeSpaces();for(var r=e.fetch().text;"\\hline"===r||"\\hdashline"===r;)e.consume(),t.push("\\hdashline"===r),e.consumeSpaces(),r=e.fetch().text;return t}var Tn=e=>{if(!e.parser.settings.displayMode)throw new ne("{"+e.envName+"} can be used only in display mode.")};function Mn(e){if(-1===e.indexOf("ed"))return-1===e.indexOf("*")}function An(e,t,r){var{hskipBeforeAndAfter:n,addJot:i,cols:o,arraystretch:s,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:h,maxNumCols:u,leqno:d}=t;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!s){var p=e.gullet.expandMacroAsText("\\arraystretch");if(null==p)s=1;else if(!(s=parseFloat(p))||s<0)throw new ne("Invalid \\arraystretch: "+p)}e.gullet.beginGroup();var f=[],m=[f],g=[],y=[],v=null!=l?[]:void 0;function b(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function w(){v&&(e.gullet.macros.get("\\df@tag")?(v.push(e.subparse([new re("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):v.push(Boolean(l)&&"1"===e.gullet.macros.get("\\@eqnsw")))}for(b(),y.push(Cn(e));;){var x=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),x={type:"ordgroup",mode:e.mode,body:x},r&&(x={type:"styling",mode:e.mode,style:r,body:[x]}),f.push(x);var k=e.fetch().text;if("&"===k){if(u&&f.length===u){if(c||a)throw new ne("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else{if("\\end"===k){w(),1===f.length&&"styling"===x.type&&0===x.body[0].body.length&&(m.length>1||!h)&&m.pop(),y.length<m.length+1&&y.push([]);break}if("\\\\"!==k)throw new ne("Expected & or \\\\ or \\cr or \\end",e.nextToken);e.consume();var S=void 0;" "!==e.gullet.future().text&&(S=e.parseSizeGroup(!0)),g.push(S?S.value:null),w(),y.push(Cn(e)),f=[],m.push(f),b()}}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:i,arraystretch:s,body:m,cols:o,rowGaps:g,hskipBeforeAndAfter:n,hLinesBeforeRow:y,colSeparationType:a,tags:v,leqno:d}}function En(e){return"d"===e.substr(0,1)?"display":"text"}var On=function(e,t){var r,n,i=e.body.length,o=e.hLinesBeforeRow,s=0,a=new Array(i),l=[],c=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),h=1/t.fontMetrics().ptPerEm,u=5*h;e.colSeparationType&&"small"===e.colSeparationType&&(u=t.havingStyle(we.SCRIPT).sizeMultiplier/t.sizeMultiplier*.2778);var d="CD"===e.colSeparationType?Pe({number:3,unit:"ex"},t):12*h,p=3*h,f=e.arraystretch*d,m=.7*f,g=.3*f,y=0;function v(e){for(var t=0;t<e.length;++t)t>0&&(y+=.25),l.push({pos:y,isDashed:e[t]})}for(v(o[0]),r=0;r<e.body.length;++r){var b=e.body[r],w=m,x=g;s<b.length&&(s=b.length);var k=new Array(b.length);for(n=0;n<b.length;++n){var S=hr(b[n],t);x<S.depth&&(x=S.depth),w<S.height&&(w=S.height),k[n]=S}var _=e.rowGaps[r],C=0;_&&(C=Pe(_,t))>0&&(x<(C+=g)&&(x=C),C=0),e.addJot&&(x+=p),k.height=w,k.depth=x,y+=w,k.pos=y,y+=x+C,a[r]=k,v(o[r+1])}var T,M,A=y/2+t.fontMetrics().axisHeight,E=e.cols||[],O=[],N=[];if(e.tags&&e.tags.some((e=>e)))for(r=0;r<i;++r){var R=a[r],D=R.pos-A,z=e.tags[r],I=void 0;(I=!0===z?qt.makeSpan(["eqn-num"],[],t):!1===z?qt.makeSpan([],[],t):qt.makeSpan([],ir(z,t,!0),t)).depth=R.depth,I.height=R.height,N.push({type:"elem",elem:I,shift:D})}for(n=0,M=0;n<s||M<E.length;++n,++M){for(var B=E[M]||{},L=!0;"separator"===B.type;){if(L||((T=qt.makeSpan(["arraycolsep"],[])).style.width=Fe(t.fontMetrics().doubleRuleSep),O.push(T)),"|"!==B.separator&&":"!==B.separator)throw new ne("Invalid separator type: "+B.separator);var P="|"===B.separator?"solid":"dashed",F=qt.makeSpan(["vertical-separator"],[],t);F.style.height=Fe(y),F.style.borderRightWidth=Fe(c),F.style.borderRightStyle=P,F.style.margin="0 "+Fe(-c/2);var q=y-A;q&&(F.style.verticalAlign=Fe(-q)),O.push(F),B=E[++M]||{},L=!1}if(!(n>=s)){var U=void 0;(n>0||e.hskipBeforeAndAfter)&&0!==(U=le.deflt(B.pregap,u))&&((T=qt.makeSpan(["arraycolsep"],[])).style.width=Fe(U),O.push(T));var j=[];for(r=0;r<i;++r){var V=a[r],$=V[n];if($){var H=V.pos-A;$.depth=V.depth,$.height=V.height,j.push({type:"elem",elem:$,shift:H})}}j=qt.makeVList({positionType:"individualShift",children:j},t),j=qt.makeSpan(["col-align-"+(B.align||"c")],[j]),O.push(j),(n<s-1||e.hskipBeforeAndAfter)&&0!==(U=le.deflt(B.postgap,u))&&((T=qt.makeSpan(["arraycolsep"],[])).style.width=Fe(U),O.push(T))}}if(a=qt.makeSpan(["mtable"],O),l.length>0){for(var W=qt.makeLineSpan("hline",t,c),G=qt.makeLineSpan("hdashline",t,c),J=[{type:"elem",elem:a,shift:0}];l.length>0;){var K=l.pop(),Y=K.pos-A;K.isDashed?J.push({type:"elem",elem:G,shift:Y}):J.push({type:"elem",elem:W,shift:Y})}a=qt.makeVList({positionType:"individualShift",children:J},t)}if(0===N.length)return qt.makeSpan(["mord"],[a],t);var X=qt.makeVList({positionType:"individualShift",children:N},t);return X=qt.makeSpan(["tag"],[X],t),qt.makeFragment([a,X])},Nn={c:"center ",l:"left ",r:"right "},Rn=function(e,t){for(var r=[],n=new gr.MathNode("mtd",[],["mtr-glue"]),i=new gr.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var s=e.body[o],a=[],l=0;l<s.length;l++)a.push(new gr.MathNode("mtd",[kr(s[l],t)]));e.tags&&e.tags[o]&&(a.unshift(n),a.push(n),e.leqno?a.unshift(i):a.push(i)),r.push(new gr.MathNode("mtr",a))}var c=new gr.MathNode("mtable",r),h=.5===e.arraystretch?.1:.16+e.arraystretch-1+(e.addJot?.09:0);c.setAttribute("rowspacing",Fe(h));var u="",d="";if(e.cols&&e.cols.length>0){var p=e.cols,f="",m=!1,g=0,y=p.length;"separator"===p[0].type&&(u+="top ",g=1),"separator"===p[p.length-1].type&&(u+="bottom ",y-=1);for(var v=g;v<y;v++)"align"===p[v].type?(d+=Nn[p[v].align],m&&(f+="none "),m=!0):"separator"===p[v].type&&m&&(f+="|"===p[v].separator?"solid ":"dashed ",m=!1);c.setAttribute("columnalign",d.trim()),/[sd]/.test(f)&&c.setAttribute("columnlines",f.trim())}if("align"===e.colSeparationType){for(var b=e.cols||[],w="",x=1;x<b.length;x++)w+=x%2?"0em ":"1em ";c.setAttribute("columnspacing",w.trim())}else"alignat"===e.colSeparationType||"gather"===e.colSeparationType?c.setAttribute("columnspacing","0em"):"small"===e.colSeparationType?c.setAttribute("columnspacing","0.2778em"):"CD"===e.colSeparationType?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var k="",S=e.hLinesBeforeRow;u+=S[0].length>0?"left ":"",u+=S[S.length-1].length>0?"right ":"";for(var _=1;_<S.length-1;_++)k+=0===S[_].length?"none ":S[_][0]?"dashed ":"solid ";return/[sd]/.test(k)&&c.setAttribute("rowlines",k.trim()),""!==u&&(c=new gr.MathNode("menclose",[c])).setAttribute("notation",u.trim()),e.arraystretch&&e.arraystretch<1&&(c=new gr.MathNode("mstyle",[c])).setAttribute("scriptlevel","1"),c},Dn=function(e,t){-1===e.envName.indexOf("ed")&&Tn(e);var r,n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",o="split"===e.envName,s=An(e.parser,{cols:n,addJot:!0,autoTag:o?void 0:Mn(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:o?2:void 0,leqno:e.parser.settings.leqno},"display"),a=0,l={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&"ordgroup"===t[0].type){for(var c="",h=0;h<t[0].body.length;h++){c+=Nr(t[0].body[h],"textord").text}r=Number(c),a=2*r}var u=!a;s.body.forEach((function(e){for(var t=1;t<e.length;t+=2){var n=Nr(e[t],"styling");Nr(n.body[0],"ordgroup").body.unshift(l)}if(u)a<e.length&&(a=e.length);else{var i=e.length/2;if(r<i)throw new ne("Too many math in a row: expected "+r+", but got "+i,e[0])}}));for(var d=0;d<a;++d){var p="r",f=0;d%2==1?p="l":d>0&&u&&(f=1),n[d]={type:"align",align:p,pregap:f,postgap:0}}return s.colSeparationType=u?"align":"alignat",s};kn({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=(Dr(t[0])?[t[0]]:Nr(t[0],"ordgroup").body).map((function(e){var t=Rr(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new ne("Unknown column alignment: "+t,e)})),n={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return An(e.parser,n,En(e.envName))},htmlBuilder:On,mathmlBuilder:Rn}),kn({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if("*"===e.envName.charAt(e.envName.length-1)){var i=e.parser;if(i.consumeSpaces(),"["===i.fetch().text){if(i.consume(),i.consumeSpaces(),r=i.fetch().text,-1==="lcr".indexOf(r))throw new ne("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:r}]}}var o=An(e.parser,n,En(e.envName)),s=Math.max(0,...o.body.map((e=>e.length)));return o.cols=new Array(s).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[o],left:t[0],right:t[1],rightColor:void 0}:o},htmlBuilder:On,mathmlBuilder:Rn}),kn({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t=An(e.parser,{arraystretch:.5},"script");return t.colSeparationType="small",t},htmlBuilder:On,mathmlBuilder:Rn}),kn({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=(Dr(t[0])?[t[0]]:Nr(t[0],"ordgroup").body).map((function(e){var t=Rr(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new ne("Unknown column alignment: "+t,e)}));if(r.length>1)throw new ne("{subarray} can contain only one column");var n={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if((n=An(e.parser,n,"script")).body.length>0&&n.body[0].length>1)throw new ne("{subarray} can contain only one column");return n},htmlBuilder:On,mathmlBuilder:Rn}),kn({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t=An(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},En(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:On,mathmlBuilder:Rn}),kn({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Dn,htmlBuilder:On,mathmlBuilder:Rn}),kn({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){le.contains(["gather","gather*"],e.envName)&&Tn(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Mn(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return An(e.parser,t,"display")},htmlBuilder:On,mathmlBuilder:Rn}),kn({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Dn,htmlBuilder:On,mathmlBuilder:Rn}),kn({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){Tn(e);var t={autoTag:Mn(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return An(e.parser,t,"display")},htmlBuilder:On,mathmlBuilder:Rn}),kn({type:"array",names:["CD"],props:{numArgs:0},handler:e=>(Tn(e),function(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if("&"!==r&&"\\\\"!==r){if("\\end"===r){0===t[t.length-1].length&&t.pop();break}throw new ne("Expected \\\\ or \\cr or \\end",e.nextToken)}e.consume()}for(var n,i,o=[],s=[o],a=0;a<t.length;a++){for(var l=t[a],c={type:"styling",body:[],mode:"math",style:"display"},h=0;h<l.length;h++)if(Fr(l[h])){o.push(c);var u=Rr(l[h+=1]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(u)>-1);else{if(!("<>AV".indexOf(u)>-1))throw new ne('Expected one of "<>AV=|." after @',l[h]);for(var p=0;p<2;p++){for(var f=!0,m=h+1;m<l.length;m++){if(i=u,("mathord"===(n=l[m]).type||"atom"===n.type)&&n.text===i){f=!1,h=m;break}if(Fr(l[m]))throw new ne("Missing a "+u+" character to complete a CD arrow.",l[m]);d[p].body.push(l[m])}if(f)throw new ne("Missing a "+u+" character to complete a CD arrow.",l[h])}}var g={type:"styling",body:[qr(u,d,e)],mode:"math",style:"display"};o.push(g),c={type:"styling",body:[],mode:"math",style:"display"}}else c.body.push(l[h]);a%2==0?o.push(c):o.shift(),o=[],s.push(o)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}(e.parser)),htmlBuilder:On,mathmlBuilder:Rn}),_n("\\nonumber","\\gdef\\@eqnsw{0}"),_n("\\notag","\\nonumber"),Kt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new ne(e.funcName+" valid only within array environment")}});var zn=xn;Kt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];if("ordgroup"!==i.type)throw new ne("Invalid environment name",i);for(var o="",s=0;s<i.body.length;++s)o+=Nr(i.body[s],"textord").text;if("\\begin"===n){if(!zn.hasOwnProperty(o))throw new ne("No such environment: "+o,i);var a=zn[o],{args:l,optArgs:c}=r.parseArguments("\\begin{"+o+"}",a),h={mode:r.mode,envName:o,parser:r},u=a.handler(h,l,c);r.expect("\\end",!1);var d=r.nextToken,p=Nr(r.parseFunction(),"environment");if(p.name!==o)throw new ne("Mismatch: \\begin{"+o+"} matched by \\end{"+p.name+"}",d);return u}return{type:"environment",mode:r.mode,name:o,nameGroup:i}}});var In=qt.makeSpan;function Bn(e,t){var r=ir(e.body,t,!0);return In([e.mclass],r,t)}function Ln(e,t){var r,n=wr(e.body,t);return"minner"===e.mclass?r=new gr.MathNode("mpadded",n):"mord"===e.mclass?e.isCharacterBox?(r=n[0]).type="mi":r=new gr.MathNode("mi",n):(e.isCharacterBox?(r=n[0]).type="mo":r=new gr.MathNode("mo",n),"mbin"===e.mclass?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):"mpunct"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):"mopen"===e.mclass||"mclose"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0em"):"minner"===e.mclass&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Kt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.substr(5),body:Zt(i),isCharacterBox:le.isCharacterBox(i)}},htmlBuilder:Bn,mathmlBuilder:Ln});var Pn=e=>{var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};Kt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:Pn(t[0]),body:Zt(t[1]),isCharacterBox:le.isCharacterBox(t[1])}}}),Kt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var r,{parser:n,funcName:i}=e,o=t[1],s=t[0];r="\\stackrel"!==i?Pn(o):"mrel";var a={type:"op",mode:o.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:Zt(o)},l={type:"supsub",mode:s.mode,base:a,sup:"\\underset"===i?null:s,sub:"\\underset"===i?s:null};return{type:"mclass",mode:n.mode,mclass:r,body:[l],isCharacterBox:le.isCharacterBox(l)}},htmlBuilder:Bn,mathmlBuilder:Ln});var Fn=(e,t)=>{var r=e.font,n=t.withFont(r);return hr(e.body,n)},qn=(e,t)=>{var r=e.font,n=t.withFont(r);return kr(e.body,n)},Un={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Kt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=Xt(t[0]),o=n;return o in Un&&(o=Un[o]),{type:"font",mode:r.mode,font:o.slice(1),body:i}},htmlBuilder:Fn,mathmlBuilder:qn}),Kt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],i=le.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:Pn(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}}),Kt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:i}=e,{mode:o}=r,s=r.parseExpression(!0,i);return{type:"font",mode:o,font:"math"+n.slice(1),body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:Fn,mathmlBuilder:qn});var jn=(e,t)=>{var r=t;return"display"===e?r=r.id>=we.SCRIPT.id?r.text():we.DISPLAY:"text"===e&&r.size===we.DISPLAY.size?r=we.TEXT:"script"===e?r=we.SCRIPT:"scriptscript"===e&&(r=we.SCRIPTSCRIPT),r},Vn=(e,t)=>{var r,n=jn(e.size,t.style),i=n.fracNum(),o=n.fracDen();r=t.havingStyle(i);var s=hr(e.numer,r,t);if(e.continued){var a=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;s.height=s.height<a?a:s.height,s.depth=s.depth<l?l:s.depth}r=t.havingStyle(o);var c,h,u,d,p,f,m,g,y,v,b=hr(e.denom,r,t);if(e.hasBarLine?(e.barSize?(h=Pe(e.barSize,t),c=qt.makeLineSpan("frac-line",t,h)):c=qt.makeLineSpan("frac-line",t),h=c.height,u=c.height):(c=null,h=0,u=t.fontMetrics().defaultRuleThickness),n.size===we.DISPLAY.size||"display"===e.size?(d=t.fontMetrics().num1,p=h>0?3*u:7*u,f=t.fontMetrics().denom1):(h>0?(d=t.fontMetrics().num2,p=u):(d=t.fontMetrics().num3,p=3*u),f=t.fontMetrics().denom2),c){var w=t.fontMetrics().axisHeight;d-s.depth-(w+.5*h)<p&&(d+=p-(d-s.depth-(w+.5*h))),w-.5*h-(b.height-f)<p&&(f+=p-(w-.5*h-(b.height-f)));var x=-(w-.5*h);m=qt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:f},{type:"elem",elem:c,shift:x},{type:"elem",elem:s,shift:-d}]},t)}else{var k=d-s.depth-(b.height-f);k<p&&(d+=.5*(p-k),f+=.5*(p-k)),m=qt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:f},{type:"elem",elem:s,shift:-d}]},t)}return r=t.havingStyle(n),m.height*=r.sizeMultiplier/t.sizeMultiplier,m.depth*=r.sizeMultiplier/t.sizeMultiplier,g=n.size===we.DISPLAY.size?t.fontMetrics().delim1:n.size===we.SCRIPTSCRIPT.size?t.havingStyle(we.SCRIPT).fontMetrics().delim2:t.fontMetrics().delim2,y=null==e.leftDelim?cr(t,["mopen"]):fn.customSizedDelim(e.leftDelim,g,!0,t.havingStyle(n),e.mode,["mopen"]),v=e.continued?qt.makeSpan([]):null==e.rightDelim?cr(t,["mclose"]):fn.customSizedDelim(e.rightDelim,g,!0,t.havingStyle(n),e.mode,["mclose"]),qt.makeSpan(["mord"].concat(r.sizingClasses(t)),[y,qt.makeSpan(["mfrac"],[m]),v],t)},$n=(e,t)=>{var r=new gr.MathNode("mfrac",[kr(e.numer,t),kr(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var n=Pe(e.barSize,t);r.setAttribute("linethickness",Fe(n))}}else r.setAttribute("linethickness","0px");var i=jn(e.size,t.style);if(i.size!==t.style.size){r=new gr.MathNode("mstyle",[r]);var o=i.size===we.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",o),r.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var s=[];if(null!=e.leftDelim){var a=new gr.MathNode("mo",[new gr.TextNode(e.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),s.push(a)}if(s.push(r),null!=e.rightDelim){var l=new gr.MathNode("mo",[new gr.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),s.push(l)}return vr(s)}return r};Kt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var r,{parser:n,funcName:i}=e,o=t[0],s=t[1],a=null,l=null,c="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":r=!0;break;case"\\\\atopfrac":r=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":r=!1,a="(",l=")";break;case"\\\\bracefrac":r=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":r=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text"}return{type:"genfrac",mode:n.mode,continued:!1,numer:o,denom:s,hasBarLine:r,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:Vn,mathmlBuilder:$n}),Kt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0],o=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:i,denom:o,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),Kt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var t,{parser:r,funcName:n,token:i}=e;switch(n){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:r.mode,replaceWith:t,token:i}}});var Hn=["display","text","script","scriptscript"],Wn=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};Kt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var r,{parser:n}=e,i=t[4],o=t[5],s=Xt(t[0]),a="atom"===s.type&&"open"===s.family?Wn(s.text):null,l=Xt(t[1]),c="atom"===l.type&&"close"===l.family?Wn(l.text):null,h=Nr(t[2],"size"),u=null;r=!!h.isBlank||(u=h.value).number>0;var d="auto",p=t[3];if("ordgroup"===p.type){if(p.body.length>0){var f=Nr(p.body[0],"textord");d=Hn[Number(f.text)]}}else p=Nr(p,"textord"),d=Hn[Number(p.text)];return{type:"genfrac",mode:n.mode,numer:i,denom:o,continued:!1,hasBarLine:r,barSize:u,leftDelim:a,rightDelim:c,size:d}},htmlBuilder:Vn,mathmlBuilder:$n}),Kt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:i}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Nr(t[0],"size").value,token:i}}}),Kt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0],o=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(Nr(t[1],"infix").size),s=t[2],a=o.number>0;return{type:"genfrac",mode:r.mode,numer:i,denom:s,continued:!1,hasBarLine:a,barSize:o,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Vn,mathmlBuilder:$n});var Gn=(e,t)=>{var r,n,i=t.style;"supsub"===e.type?(r=e.sup?hr(e.sup,t.havingStyle(i.sup()),t):hr(e.sub,t.havingStyle(i.sub()),t),n=Nr(e.base,"horizBrace")):n=Nr(e,"horizBrace");var o,s=hr(n.base,t.havingBaseStyle(we.DISPLAY)),a=Or(n,t);if(n.isOver?(o=qt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(o=qt.makeVList({positionType:"bottom",positionData:s.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},t)).children[0].children[0].children[0].classes.push("svg-align"),r){var l=qt.makeSpan(["mord",n.isOver?"mover":"munder"],[o],t);o=n.isOver?qt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},t):qt.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return qt.makeSpan(["mord",n.isOver?"mover":"munder"],[o],t)};Kt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:Gn,mathmlBuilder:(e,t)=>{var r=Er(e.label);return new gr.MathNode(e.isOver?"mover":"munder",[kr(e.base,t),r])}}),Kt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],i=Nr(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:Zt(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=ir(e.body,t,!1);return qt.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=xr(e.body,t);return r instanceof fr||(r=new fr("mrow",[r])),r.setAttribute("href",e.href),r}}),Kt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=Nr(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],o=0;o<n.length;o++){var s=n[o];"~"===s&&(s="\\textasciitilde"),i.push({type:"textord",mode:"text",text:s})}var a={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:Zt(a)}}}),Kt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:Zt(t[0])}},htmlBuilder(e,t){var r=ir(e.body,t,!1);return qt.makeFragment(r)},mathmlBuilder:(e,t)=>new gr.MathNode("mrow",wr(e.body,t))}),Kt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var r,{parser:n,funcName:i,token:o}=e,s=Nr(t[0],"raw").string,a=t[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l={};switch(i){case"\\htmlClass":l.class=s,r={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,r={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,r={command:"\\htmlStyle",style:s};break;case"\\htmlData":for(var c=s.split(","),h=0;h<c.length;h++){var u=c[h].split("=");if(2!==u.length)throw new ne("Error parsing key-value for \\htmlData");l["data-"+u[0].trim()]=u[1].trim()}r={command:"\\htmlData",attributes:l};break;default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(r)?{type:"html",mode:n.mode,attributes:l,body:Zt(a)}:n.formatUnsupportedCmd(i)},htmlBuilder:(e,t)=>{var r=ir(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var i=qt.makeSpan(n,r,t);for(var o in e.attributes)"class"!==o&&e.attributes.hasOwnProperty(o)&&i.setAttribute(o,e.attributes[o]);return i},mathmlBuilder:(e,t)=>xr(e.body,t)}),Kt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:Zt(t[0]),mathml:Zt(t[1])}},htmlBuilder:(e,t)=>{var r=ir(e.html,t,!1);return qt.makeFragment(r)},mathmlBuilder:(e,t)=>xr(e.mathml,t)});var Jn=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new ne("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(t[1]+t[2]),unit:t[3]};if(!Le(r))throw new ne("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};Kt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,i={number:0,unit:"em"},o={number:.9,unit:"em"},s={number:0,unit:"em"},a="";if(r[0])for(var l=Nr(r[0],"raw").string.split(","),c=0;c<l.length;c++){var h=l[c].split("=");if(2===h.length){var u=h[1].trim();switch(h[0].trim()){case"alt":a=u;break;case"width":i=Jn(u);break;case"height":o=Jn(u);break;case"totalheight":s=Jn(u);break;default:throw new ne("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var d=Nr(t[0],"url").url;return""===a&&(a=(a=(a=d).replace(/^.*[\\/]/,"")).substring(0,a.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:d})?{type:"includegraphics",mode:n.mode,alt:a,width:i,height:o,totalheight:s,src:d}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=Pe(e.height,t),n=0;e.totalheight.number>0&&(n=Pe(e.totalheight,t)-r);var i=0;e.width.number>0&&(i=Pe(e.width,t));var o={height:Fe(r+n)};i>0&&(o.width=Fe(i)),n>0&&(o.verticalAlign=Fe(-n));var s=new We(e.src,e.alt,o);return s.height=r,s.depth=n,s},mathmlBuilder:(e,t)=>{var r=new gr.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=Pe(e.height,t),i=0;if(e.totalheight.number>0&&(i=Pe(e.totalheight,t)-n,r.setAttribute("valign",Fe(-i))),r.setAttribute("height",Fe(n+i)),e.width.number>0){var o=Pe(e.width,t);r.setAttribute("width",Fe(o))}return r.setAttribute("src",e.src),r}}),Kt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,i=Nr(t[0],"size");if(r.settings.strict){var o="m"===n[1],s="mu"===i.value.unit;o?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, not "+i.value.unit+" units"),"math"!==r.mode&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder:(e,t)=>qt.makeGlue(e.dimension,t),mathmlBuilder(e,t){var r=Pe(e.dimension,t);return new gr.SpaceNode(r)}}),Kt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}},htmlBuilder:(e,t)=>{var r;"clap"===e.alignment?(r=qt.makeSpan([],[hr(e.body,t)]),r=qt.makeSpan(["inner"],[r],t)):r=qt.makeSpan(["inner"],[hr(e.body,t)]);var n=qt.makeSpan(["fix"],[]),i=qt.makeSpan([e.alignment],[r,n],t),o=qt.makeSpan(["strut"]);return o.style.height=Fe(i.height+i.depth),i.depth&&(o.style.verticalAlign=Fe(-i.depth)),i.children.unshift(o),i=qt.makeSpan(["thinbox"],[i],t),qt.makeSpan(["mord","vbox"],[i],t)},mathmlBuilder:(e,t)=>{var r=new gr.MathNode("mpadded",[kr(e.body,t)]);if("rlap"!==e.alignment){var n="llap"===e.alignment?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}}),Kt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,i=n.mode;n.switchMode("math");var o="\\("===r?"\\)":"$",s=n.parseExpression(!1,o);return n.expect(o),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:s}}}),Kt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new ne("Mismatched "+e.funcName)}});var Kn=(e,t)=>{switch(t.style.size){case we.DISPLAY.size:return e.display;case we.TEXT.size:return e.text;case we.SCRIPT.size:return e.script;case we.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};Kt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:Zt(t[0]),text:Zt(t[1]),script:Zt(t[2]),scriptscript:Zt(t[3])}},htmlBuilder:(e,t)=>{var r=Kn(e,t),n=ir(r,t,!1);return qt.makeFragment(n)},mathmlBuilder:(e,t)=>{var r=Kn(e,t);return xr(r,t)}});var Yn=(e,t,r,n,i,o,s)=>{e=qt.makeSpan([],[e]);var a,l,c,h=r&&le.isCharacterBox(r);if(t){var u=hr(t,n.havingStyle(i.sup()),n);l={elem:u,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-u.depth)}}if(r){var d=hr(r,n.havingStyle(i.sub()),n);a={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-d.height)}}if(l&&a){var p=n.fontMetrics().bigOpSpacing5+a.elem.height+a.elem.depth+a.kern+e.depth+s;c=qt.makeVList({positionType:"bottom",positionData:p,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:Fe(-o)},{type:"kern",size:a.kern},{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:Fe(o)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(a){var f=e.height-s;c=qt.makeVList({positionType:"top",positionData:f,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:Fe(-o)},{type:"kern",size:a.kern},{type:"elem",elem:e}]},n)}else{if(!l)return e;var m=e.depth+s;c=qt.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:Fe(o)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}var g=[c];if(a&&0!==o&&!h){var y=qt.makeSpan(["mspace"],[],n);y.style.marginRight=Fe(o),g.unshift(y)}return qt.makeSpan(["mop","op-limits"],g,n)},Xn=["\\smallint"],Zn=(e,t)=>{var r,n,i,o=!1;"supsub"===e.type?(r=e.sup,n=e.sub,i=Nr(e.base,"op"),o=!0):i=Nr(e,"op");var s,a=t.style,l=!1;if(a.size===we.DISPLAY.size&&i.symbol&&!le.contains(Xn,i.name)&&(l=!0),i.symbol){var c=l?"Size2-Regular":"Size1-Regular",h="";if("\\oiint"!==i.name&&"\\oiiint"!==i.name||(h=i.name.substr(1),i.name="oiint"===h?"\\iint":"\\iiint"),s=qt.makeSymbol(i.name,c,"math",t,["mop","op-symbol",l?"large-op":"small-op"]),h.length>0){var u=s.italic,d=qt.staticSvg(h+"Size"+(l?"2":"1"),t);s=qt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:0},{type:"elem",elem:d,shift:l?.08:0}]},t),i.name="\\"+h,s.classes.unshift("mop"),s.italic=u}}else if(i.body){var p=ir(i.body,t,!0);1===p.length&&p[0]instanceof Je?(s=p[0]).classes[0]="mop":s=qt.makeSpan(["mop"],p,t)}else{for(var f=[],m=1;m<i.name.length;m++)f.push(qt.mathsym(i.name[m],i.mode,t));s=qt.makeSpan(["mop"],f,t)}var g=0,y=0;return(s instanceof Je||"\\oiint"===i.name||"\\oiiint"===i.name)&&!i.suppressBaseShift&&(g=(s.height-s.depth)/2-t.fontMetrics().axisHeight,y=s.italic),o?Yn(s,r,n,t,a,y,g):(g&&(s.style.position="relative",s.style.top=Fe(g)),s)},Qn=(e,t)=>{var r;if(e.symbol)r=new fr("mo",[yr(e.name,e.mode)]),le.contains(Xn,e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new fr("mo",wr(e.body,t));else{r=new fr("mi",[new mr(e.name.slice(1))]);var n=new fr("mo",[yr("⁡","text")]);r=e.parentIsSupSub?new fr("mrow",[r,n]):pr([r,n])}return r},ei={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};Kt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=n;return 1===i.length&&(i=ei[i]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:Zn,mathmlBuilder:Qn}),Kt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Zt(n)}},htmlBuilder:Zn,mathmlBuilder:Qn});var ti={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};Kt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Zn,mathmlBuilder:Qn}),Kt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Zn,mathmlBuilder:Qn}),Kt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,n=r;return 1===n.length&&(n=ti[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Zn,mathmlBuilder:Qn});var ri=(e,t)=>{var r,n,i,o,s=!1;if("supsub"===e.type?(r=e.sup,n=e.sub,i=Nr(e.base,"operatorname"),s=!0):i=Nr(e,"operatorname"),i.body.length>0){for(var a=i.body.map((e=>{var t=e.text;return"string"==typeof t?{type:"textord",mode:e.mode,text:t}:e})),l=ir(a,t.withFont("mathrm"),!0),c=0;c<l.length;c++){var h=l[c];h instanceof Je&&(h.text=h.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=qt.makeSpan(["mop"],l,t)}else o=qt.makeSpan(["mop"],[],t);return s?Yn(o,r,n,t,t.style,0,0):o};function ni(e,t,r){for(var n=ir(e,t,!1),i=t.sizeMultiplier/r.sizeMultiplier,o=0;o<n.length;o++){var s=n[o].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[o].classes,t.sizingClasses(r)):n[o].classes[s+1]==="reset-size"+t.size&&(n[o].classes[s+1]="reset-size"+r.size),n[o].height*=i,n[o].depth*=i}return qt.makeFragment(n)}Kt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"operatorname",mode:r.mode,body:Zt(i),alwaysHandleSupSub:"\\operatornamewithlimits"===n,limits:!1,parentIsSupSub:!1}},htmlBuilder:ri,mathmlBuilder:(e,t)=>{for(var r=wr(e.body,t.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var o=r[i];if(o instanceof gr.SpaceNode);else if(o instanceof gr.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var s=o.children[0];1===o.children.length&&s instanceof gr.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break;default:n=!1}else n=!1}if(n){var a=r.map((e=>e.toText())).join("");r=[new gr.TextNode(a)]}var l=new gr.MathNode("mi",r);l.setAttribute("mathvariant","normal");var c=new gr.MathNode("mo",[yr("⁡","text")]);return e.parentIsSupSub?new gr.MathNode("mrow",[l,c]):gr.newDocumentFragment([l,c])}}),_n("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),Yt({type:"ordgroup",htmlBuilder:(e,t)=>e.semisimple?qt.makeFragment(ir(e.body,t,!1)):qt.makeSpan(["mord"],ir(e.body,t,!0),t),mathmlBuilder:(e,t)=>xr(e.body,t,!0)}),Kt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=hr(e.body,t.havingCrampedStyle()),n=qt.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,o=qt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},t);return qt.makeSpan(["mord","overline"],[o],t)},mathmlBuilder(e,t){var r=new gr.MathNode("mo",[new gr.TextNode("‾")]);r.setAttribute("stretchy","true");var n=new gr.MathNode("mover",[kr(e.body,t),r]);return n.setAttribute("accent","true"),n}}),Kt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:Zt(n)}},htmlBuilder:(e,t)=>{var r=ir(e.body,t.withPhantom(),!1);return qt.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=wr(e.body,t);return new gr.MathNode("mphantom",r)}}),Kt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=qt.makeSpan([],[hr(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=qt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),qt.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=wr(Zt(e.body),t),n=new gr.MathNode("mphantom",r),i=new gr.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),Kt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=qt.makeSpan(["inner"],[hr(e.body,t.withPhantom())]),n=qt.makeSpan(["fix"],[]);return qt.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=wr(Zt(e.body),t),n=new gr.MathNode("mphantom",r),i=new gr.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}}),Kt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=Nr(t[0],"size").value,i=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder(e,t){var r=hr(e.body,t),n=Pe(e.dy,t);return qt.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new gr.MathNode("mpadded",[kr(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}}),Kt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}}),Kt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,i=r[0],o=Nr(t[0],"size"),s=Nr(t[1],"size");return{type:"rule",mode:n.mode,shift:i&&Nr(i,"size").value,width:o.value,height:s.value}},htmlBuilder(e,t){var r=qt.makeSpan(["mord","rule"],[],t),n=Pe(e.width,t),i=Pe(e.height,t),o=e.shift?Pe(e.shift,t):0;return r.style.borderRightWidth=Fe(n),r.style.borderTopWidth=Fe(i),r.style.bottom=Fe(o),r.width=n,r.height=i+o,r.depth=-o,r.maxFontSize=1.125*i*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=Pe(e.width,t),n=Pe(e.height,t),i=e.shift?Pe(e.shift,t):0,o=t.color&&t.getColor()||"black",s=new gr.MathNode("mspace");s.setAttribute("mathbackground",o),s.setAttribute("width",Fe(r)),s.setAttribute("height",Fe(n));var a=new gr.MathNode("mpadded",[s]);return i>=0?a.setAttribute("height",Fe(i)):(a.setAttribute("height",Fe(i)),a.setAttribute("depth",Fe(-i))),a.setAttribute("voffset",Fe(i)),a}});var ii=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];Kt({type:"sizing",names:ii,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:i}=e,o=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:ii.indexOf(n)+1,body:o}},htmlBuilder:(e,t)=>{var r=t.havingSize(e.size);return ni(e.body,r,t)},mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=wr(e.body,r),i=new gr.MathNode("mstyle",n);return i.setAttribute("mathsize",Fe(r.sizeMultiplier)),i}}),Kt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,i=!1,o=!1,s=r[0]&&Nr(r[0],"ordgroup");if(s)for(var a="",l=0;l<s.body.length;++l){if("t"===(a=s.body[l].text))i=!0;else{if("b"!==a){i=!1,o=!1;break}o=!0}}else i=!0,o=!0;var c=t[0];return{type:"smash",mode:n.mode,body:c,smashHeight:i,smashDepth:o}},htmlBuilder:(e,t)=>{var r=qt.makeSpan([],[hr(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var o=qt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return qt.makeSpan(["mord"],[o],t)},mathmlBuilder:(e,t)=>{var r=new gr.MathNode("mpadded",[kr(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}}),Kt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,i=r[0],o=t[0];return{type:"sqrt",mode:n.mode,body:o,index:i}},htmlBuilder(e,t){var r=hr(e.body,t.havingCrampedStyle());0===r.height&&(r.height=t.fontMetrics().xHeight),r=qt.wrapFragment(r,t);var n=t.fontMetrics().defaultRuleThickness,i=n;t.style.id<we.TEXT.id&&(i=t.fontMetrics().xHeight);var o=n+i/4,s=r.height+r.depth+o+n,{span:a,ruleWidth:l,advanceWidth:c}=fn.sqrtImage(s,t),h=a.height-l;h>r.height+r.depth+o&&(o=(o+h-r.height-r.depth)/2);var u=a.height-r.height-o-l;r.style.paddingLeft=Fe(c);var d=qt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+u)},{type:"elem",elem:a},{type:"kern",size:l}]},t);if(e.index){var p=t.havingStyle(we.SCRIPTSCRIPT),f=hr(e.index,p,t),m=.6*(d.height-d.depth),g=qt.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:f}]},t),y=qt.makeSpan(["root"],[g]);return qt.makeSpan(["mord","sqrt"],[y,d],t)}return qt.makeSpan(["mord","sqrt"],[d],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new gr.MathNode("mroot",[kr(r,t),kr(n,t)]):new gr.MathNode("msqrt",[kr(r,t)])}});var oi={display:we.DISPLAY,text:we.TEXT,script:we.SCRIPT,scriptscript:we.SCRIPTSCRIPT};Kt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:i}=e,o=i.parseExpression(!0,r),s=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:s,body:o}},htmlBuilder(e,t){var r=oi[e.style],n=t.havingStyle(r).withFont("");return ni(e.body,n,t)},mathmlBuilder(e,t){var r=oi[e.style],n=t.havingStyle(r),i=wr(e.body,n),o=new gr.MathNode("mstyle",i),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return o.setAttribute("scriptlevel",s[0]),o.setAttribute("displaystyle",s[1]),o}});Yt({type:"supsub",htmlBuilder(e,t){var r=function(e,t){var r=e.base;return r?"op"===r.type?r.limits&&(t.style.size===we.DISPLAY.size||r.alwaysHandleSupSub)?Zn:null:"operatorname"===r.type?r.alwaysHandleSupSub&&(t.style.size===we.DISPLAY.size||r.limits)?ri:null:"accent"===r.type?le.isCharacterBox(r.base)?zr:null:"horizBrace"===r.type&&!e.sub===r.isOver?Gn:null:null}(e,t);if(r)return r(e,t);var n,i,o,{base:s,sup:a,sub:l}=e,c=hr(s,t),h=t.fontMetrics(),u=0,d=0,p=s&&le.isCharacterBox(s);if(a){var f=t.havingStyle(t.style.sup());n=hr(a,f,t),p||(u=c.height-f.fontMetrics().supDrop*f.sizeMultiplier/t.sizeMultiplier)}if(l){var m=t.havingStyle(t.style.sub());i=hr(l,m,t),p||(d=c.depth+m.fontMetrics().subDrop*m.sizeMultiplier/t.sizeMultiplier)}o=t.style===we.DISPLAY?h.sup1:t.style.cramped?h.sup3:h.sup2;var g,y=t.sizeMultiplier,v=Fe(.5/h.ptPerEm/y),b=null;if(i){var w=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(c instanceof Je||w)&&(b=Fe(-c.italic))}if(n&&i){u=Math.max(u,o,n.depth+.25*h.xHeight),d=Math.max(d,h.sub2);var x=4*h.defaultRuleThickness;if(u-n.depth-(i.height-d)<x){d=x-(u-n.depth)+i.height;var k=.8*h.xHeight-(u-n.depth);k>0&&(u+=k,d-=k)}var S=[{type:"elem",elem:i,shift:d,marginRight:v,marginLeft:b},{type:"elem",elem:n,shift:-u,marginRight:v}];g=qt.makeVList({positionType:"individualShift",children:S},t)}else if(i){d=Math.max(d,h.sub1,i.height-.8*h.xHeight);var _=[{type:"elem",elem:i,marginLeft:b,marginRight:v}];g=qt.makeVList({positionType:"shift",positionData:d,children:_},t)}else{if(!n)throw new Error("supsub must have either sup or sub.");u=Math.max(u,o,n.depth+.25*h.xHeight),g=qt.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:n,marginRight:v}]},t)}var C=lr(c,"right")||"mord";return qt.makeSpan([C],[c,qt.makeSpan(["msupsub"],[g])],t)},mathmlBuilder(e,t){var r,n=!1;e.base&&"horizBrace"===e.base.type&&!!e.sup===e.base.isOver&&(n=!0,r=e.base.isOver),!e.base||"op"!==e.base.type&&"operatorname"!==e.base.type||(e.base.parentIsSupSub=!0);var i,o=[kr(e.base,t)];if(e.sub&&o.push(kr(e.sub,t)),e.sup&&o.push(kr(e.sup,t)),n)i=r?"mover":"munder";else if(e.sub)if(e.sup){var s=e.base;i=s&&"op"===s.type&&s.limits&&t.style===we.DISPLAY||s&&"operatorname"===s.type&&s.alwaysHandleSupSub&&(t.style===we.DISPLAY||s.limits)?"munderover":"msubsup"}else{var a=e.base;i=a&&"op"===a.type&&a.limits&&(t.style===we.DISPLAY||a.alwaysHandleSupSub)||a&&"operatorname"===a.type&&a.alwaysHandleSupSub&&(a.limits||t.style===we.DISPLAY)?"munder":"msub"}else{var l=e.base;i=l&&"op"===l.type&&l.limits&&(t.style===we.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||t.style===we.DISPLAY)?"mover":"msup"}return new gr.MathNode(i,o)}}),Yt({type:"atom",htmlBuilder:(e,t)=>qt.mathsym(e.text,e.mode,t,["m"+e.family]),mathmlBuilder(e,t){var r=new gr.MathNode("mo",[yr(e.text,e.mode)]);if("bin"===e.family){var n=br(e,t);"bold-italic"===n&&r.setAttribute("mathvariant",n)}else"punct"===e.family?r.setAttribute("separator","true"):"open"!==e.family&&"close"!==e.family||r.setAttribute("stretchy","false");return r}});var si={mi:"italic",mn:"normal",mtext:"normal"};Yt({type:"mathord",htmlBuilder:(e,t)=>qt.makeOrd(e,t,"mathord"),mathmlBuilder(e,t){var r=new gr.MathNode("mi",[yr(e.text,e.mode,t)]),n=br(e,t)||"italic";return n!==si[r.type]&&r.setAttribute("mathvariant",n),r}}),Yt({type:"textord",htmlBuilder:(e,t)=>qt.makeOrd(e,t,"textord"),mathmlBuilder(e,t){var r,n=yr(e.text,e.mode,t),i=br(e,t)||"normal";return r="text"===e.mode?new gr.MathNode("mtext",[n]):/[0-9]/.test(e.text)?new gr.MathNode("mn",[n]):"\\prime"===e.text?new gr.MathNode("mo",[n]):new gr.MathNode("mi",[n]),i!==si[r.type]&&r.setAttribute("mathvariant",i),r}});var ai={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},li={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Yt({type:"spacing",htmlBuilder(e,t){if(li.hasOwnProperty(e.text)){var r=li[e.text].className||"";if("text"===e.mode){var n=qt.makeOrd(e,t,"textord");return n.classes.push(r),n}return qt.makeSpan(["mspace",r],[qt.mathsym(e.text,e.mode,t)],t)}if(ai.hasOwnProperty(e.text))return qt.makeSpan(["mspace",ai[e.text]],[],t);throw new ne('Unknown type of space "'+e.text+'"')},mathmlBuilder(e,t){if(!li.hasOwnProperty(e.text)){if(ai.hasOwnProperty(e.text))return new gr.MathNode("mspace");throw new ne('Unknown type of space "'+e.text+'"')}return new gr.MathNode("mtext",[new gr.TextNode(" ")])}});var ci=()=>{var e=new gr.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};Yt({type:"tag",mathmlBuilder(e,t){var r=new gr.MathNode("mtable",[new gr.MathNode("mtr",[ci(),new gr.MathNode("mtd",[xr(e.body,t)]),ci(),new gr.MathNode("mtd",[xr(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var hi={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},ui={"\\textbf":"textbf","\\textmd":"textmd"},di={"\\textit":"textit","\\textup":"textup"},pi=(e,t)=>{var r=e.font;return r?hi[r]?t.withTextFontFamily(hi[r]):ui[r]?t.withTextFontWeight(ui[r]):t.withTextFontShape(di[r]):t};Kt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"text",mode:r.mode,body:Zt(i),font:n}},htmlBuilder(e,t){var r=pi(e,t),n=ir(e.body,r,!0);return qt.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=pi(e,t);return xr(e.body,r)}}),Kt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=hr(e.body,t),n=qt.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,o=qt.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},t);return qt.makeSpan(["mord","underline"],[o],t)},mathmlBuilder(e,t){var r=new gr.MathNode("mo",[new gr.TextNode("‾")]);r.setAttribute("stretchy","true");var n=new gr.MathNode("munder",[kr(e.body,t),r]);return n.setAttribute("accentunder","true"),n}}),Kt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=hr(e.body,t),n=t.fontMetrics().axisHeight,i=.5*(r.height-n-(r.depth+n));return qt.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:r}]},t)},mathmlBuilder:(e,t)=>new gr.MathNode("mpadded",[kr(e.body,t)],["vcenter"])}),Kt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new ne("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=fi(e),n=[],i=t.havingStyle(t.style.text()),o=0;o<r.length;o++){var s=r[o];"~"===s&&(s="\\textasciitilde"),n.push(qt.makeSymbol(s,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return qt.makeSpan(["mord","text"].concat(i.sizingClasses(t)),qt.tryCombineChars(n),i)},mathmlBuilder(e,t){var r=new gr.TextNode(fi(e)),n=new gr.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var fi=e=>e.body.replace(/ /g,e.star?"␣":" "),mi=Wt,gi=new RegExp("[̀-ͯ]+$");class yi{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp("([ \r\n\t]+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]-‧‪-퟿豈-￿][̀-ͯ]*|[\ud800-\udbff][\udc00-\udfff][̀-ͯ]*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|(\\\\[a-zA-Z@]+)[ \r\n\t]*|\\\\[^\ud800-\udfff])","g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new re("EOF",new te(this,t,t));var r=this.tokenRegex.exec(e);if(null===r||r.index!==t)throw new ne("Unexpected character: '"+e[t]+"'",new re(e[t],new te(this,t,t+1)));var n=r[6]||r[3]||(r[2]?"\\ ":" ");if(14===this.catcodes[n]){var i=e.indexOf("\n",this.tokenRegex.lastIndex);return-1===i?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new re(n,new te(this,t,this.tokenRegex.lastIndex))}}class vi{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new ne("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(null==e[t]?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,r){if(void 0===r&&(r=!1),r){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}null==t?delete this.current[e]:this.current[e]=t}}var bi=Sn;_n("\\noexpand",(function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}})),_n("\\expandafter",(function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}})),_n("\\@firstoftwo",(function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}})),_n("\\@secondoftwo",(function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}})),_n("\\@ifnextchar",(function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return 1===t[0].length&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}})),_n("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),_n("\\TextOrMath",(function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}}));var wi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};_n("\\char",(function(e){var t,r=e.popToken(),n="";if("'"===r.text)t=8,r=e.popToken();else if('"'===r.text)t=16,r=e.popToken();else if("`"===r.text)if("\\"===(r=e.popToken()).text[0])n=r.text.charCodeAt(1);else{if("EOF"===r.text)throw new ne("\\char` missing argument");n=r.text.charCodeAt(0)}else t=10;if(t){if(null==(n=wi[r.text])||n>=t)throw new ne("Invalid base-"+t+" digit "+r.text);for(var i;null!=(i=wi[e.future().text])&&i<t;)n*=t,n+=i,e.popToken()}return"\\@char{"+n+"}"}));var xi=(e,t,r)=>{var n=e.consumeArg().tokens;if(1!==n.length)throw new ne("\\newcommand's first argument must be a macro name");var i=n[0].text,o=e.isDefined(i);if(o&&!t)throw new ne("\\newcommand{"+i+"} attempting to redefine "+i+"; use \\renewcommand");if(!o&&!r)throw new ne("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var s=0;if(1===(n=e.consumeArg().tokens).length&&"["===n[0].text){for(var a="",l=e.expandNextToken();"]"!==l.text&&"EOF"!==l.text;)a+=l.text,l=e.expandNextToken();if(!a.match(/^\s*[0-9]+\s*$/))throw new ne("Invalid number of arguments: "+a);s=parseInt(a),n=e.consumeArg().tokens}return e.macros.set(i,{tokens:n,numArgs:s}),""};_n("\\newcommand",(e=>xi(e,!1,!0))),_n("\\renewcommand",(e=>xi(e,!0,!1))),_n("\\providecommand",(e=>xi(e,!0,!0))),_n("\\message",(e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map((e=>e.text)).join("")),""})),_n("\\errmessage",(e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map((e=>e.text)).join("")),""})),_n("\\show",(e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),mi[r],tt.math[r],tt.text[r]),""})),_n("\\bgroup","{"),_n("\\egroup","}"),_n("~","\\nobreakspace"),_n("\\lq","`"),_n("\\rq","'"),_n("\\aa","\\r a"),_n("\\AA","\\r A"),_n("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),_n("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),_n("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),_n("ℬ","\\mathscr{B}"),_n("ℰ","\\mathscr{E}"),_n("ℱ","\\mathscr{F}"),_n("ℋ","\\mathscr{H}"),_n("ℐ","\\mathscr{I}"),_n("ℒ","\\mathscr{L}"),_n("ℳ","\\mathscr{M}"),_n("ℛ","\\mathscr{R}"),_n("ℭ","\\mathfrak{C}"),_n("ℌ","\\mathfrak{H}"),_n("ℨ","\\mathfrak{Z}"),_n("\\Bbbk","\\Bbb{k}"),_n("·","\\cdotp"),_n("\\llap","\\mathllap{\\textrm{#1}}"),_n("\\rlap","\\mathrlap{\\textrm{#1}}"),_n("\\clap","\\mathclap{\\textrm{#1}}"),_n("\\mathstrut","\\vphantom{(}"),_n("\\underbar","\\underline{\\text{#1}}"),_n("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),_n("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),_n("\\ne","\\neq"),_n("≠","\\neq"),_n("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),_n("∉","\\notin"),_n("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),_n("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),_n("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),_n("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),_n("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),_n("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),_n("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),_n("⟂","\\perp"),_n("‼","\\mathclose{!\\mkern-0.8mu!}"),_n("∌","\\notni"),_n("⌜","\\ulcorner"),_n("⌝","\\urcorner"),_n("⌞","\\llcorner"),_n("⌟","\\lrcorner"),_n("©","\\copyright"),_n("®","\\textregistered"),_n("️","\\textregistered"),_n("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),_n("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),_n("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),_n("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),_n("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),_n("⋮","\\vdots"),_n("\\varGamma","\\mathit{\\Gamma}"),_n("\\varDelta","\\mathit{\\Delta}"),_n("\\varTheta","\\mathit{\\Theta}"),_n("\\varLambda","\\mathit{\\Lambda}"),_n("\\varXi","\\mathit{\\Xi}"),_n("\\varPi","\\mathit{\\Pi}"),_n("\\varSigma","\\mathit{\\Sigma}"),_n("\\varUpsilon","\\mathit{\\Upsilon}"),_n("\\varPhi","\\mathit{\\Phi}"),_n("\\varPsi","\\mathit{\\Psi}"),_n("\\varOmega","\\mathit{\\Omega}"),_n("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),_n("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),_n("\\boxed","\\fbox{$\\displaystyle{#1}$}"),_n("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),_n("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),_n("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var ki={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};_n("\\dots",(function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in ki?t=ki[r]:("\\not"===r.substr(0,4)||r in tt.math&&le.contains(["bin","rel"],tt.math[r].group))&&(t="\\dotsb"),t}));var Si={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};_n("\\dotso",(function(e){return e.future().text in Si?"\\ldots\\,":"\\ldots"})),_n("\\dotsc",(function(e){var t=e.future().text;return t in Si&&","!==t?"\\ldots\\,":"\\ldots"})),_n("\\cdots",(function(e){return e.future().text in Si?"\\@cdots\\,":"\\@cdots"})),_n("\\dotsb","\\cdots"),_n("\\dotsm","\\cdots"),_n("\\dotsi","\\!\\cdots"),_n("\\dotsx","\\ldots\\,"),_n("\\DOTSI","\\relax"),_n("\\DOTSB","\\relax"),_n("\\DOTSX","\\relax"),_n("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),_n("\\,","\\tmspace+{3mu}{.1667em}"),_n("\\thinspace","\\,"),_n("\\>","\\mskip{4mu}"),_n("\\:","\\tmspace+{4mu}{.2222em}"),_n("\\medspace","\\:"),_n("\\;","\\tmspace+{5mu}{.2777em}"),_n("\\thickspace","\\;"),_n("\\!","\\tmspace-{3mu}{.1667em}"),_n("\\negthinspace","\\!"),_n("\\negmedspace","\\tmspace-{4mu}{.2222em}"),_n("\\negthickspace","\\tmspace-{5mu}{.277em}"),_n("\\enspace","\\kern.5em "),_n("\\enskip","\\hskip.5em\\relax"),_n("\\quad","\\hskip1em\\relax"),_n("\\qquad","\\hskip2em\\relax"),_n("\\tag","\\@ifstar\\tag@literal\\tag@paren"),_n("\\tag@paren","\\tag@literal{({#1})}"),_n("\\tag@literal",(e=>{if(e.macros.get("\\df@tag"))throw new ne("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),_n("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),_n("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),_n("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),_n("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),_n("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),_n("\\newline","\\\\\\relax"),_n("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var _i=Fe(Te["Main-Regular"]["T".charCodeAt(0)][1]-.7*Te["Main-Regular"]["A".charCodeAt(0)][1]);_n("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+_i+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),_n("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+_i+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),_n("\\hspace","\\@ifstar\\@hspacer\\@hspace"),_n("\\@hspace","\\hskip #1\\relax"),_n("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),_n("\\ordinarycolon",":"),_n("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),_n("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),_n("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),_n("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),_n("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),_n("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),_n("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),_n("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),_n("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),_n("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),_n("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),_n("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),_n("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),_n("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),_n("∷","\\dblcolon"),_n("∹","\\eqcolon"),_n("≔","\\coloneqq"),_n("≕","\\eqqcolon"),_n("⩴","\\Coloneqq"),_n("\\ratio","\\vcentcolon"),_n("\\coloncolon","\\dblcolon"),_n("\\colonequals","\\coloneqq"),_n("\\coloncolonequals","\\Coloneqq"),_n("\\equalscolon","\\eqqcolon"),_n("\\equalscoloncolon","\\Eqqcolon"),_n("\\colonminus","\\coloneq"),_n("\\coloncolonminus","\\Coloneq"),_n("\\minuscolon","\\eqcolon"),_n("\\minuscoloncolon","\\Eqcolon"),_n("\\coloncolonapprox","\\Colonapprox"),_n("\\coloncolonsim","\\Colonsim"),_n("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),_n("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),_n("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),_n("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),_n("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),_n("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),_n("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),_n("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),_n("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),_n("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),_n("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),_n("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),_n("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),_n("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),_n("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),_n("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),_n("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),_n("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),_n("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),_n("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),_n("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),_n("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),_n("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),_n("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),_n("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),_n("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),_n("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),_n("\\imath","\\html@mathml{\\@imath}{ı}"),_n("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),_n("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),_n("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),_n("⟦","\\llbracket"),_n("⟧","\\rrbracket"),_n("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),_n("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),_n("⦃","\\lBrace"),_n("⦄","\\rBrace"),_n("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),_n("⦵","\\minuso"),_n("\\darr","\\downarrow"),_n("\\dArr","\\Downarrow"),_n("\\Darr","\\Downarrow"),_n("\\lang","\\langle"),_n("\\rang","\\rangle"),_n("\\uarr","\\uparrow"),_n("\\uArr","\\Uparrow"),_n("\\Uarr","\\Uparrow"),_n("\\N","\\mathbb{N}"),_n("\\R","\\mathbb{R}"),_n("\\Z","\\mathbb{Z}"),_n("\\alef","\\aleph"),_n("\\alefsym","\\aleph"),_n("\\Alpha","\\mathrm{A}"),_n("\\Beta","\\mathrm{B}"),_n("\\bull","\\bullet"),_n("\\Chi","\\mathrm{X}"),_n("\\clubs","\\clubsuit"),_n("\\cnums","\\mathbb{C}"),_n("\\Complex","\\mathbb{C}"),_n("\\Dagger","\\ddagger"),_n("\\diamonds","\\diamondsuit"),_n("\\empty","\\emptyset"),_n("\\Epsilon","\\mathrm{E}"),_n("\\Eta","\\mathrm{H}"),_n("\\exist","\\exists"),_n("\\harr","\\leftrightarrow"),_n("\\hArr","\\Leftrightarrow"),_n("\\Harr","\\Leftrightarrow"),_n("\\hearts","\\heartsuit"),_n("\\image","\\Im"),_n("\\infin","\\infty"),_n("\\Iota","\\mathrm{I}"),_n("\\isin","\\in"),_n("\\Kappa","\\mathrm{K}"),_n("\\larr","\\leftarrow"),_n("\\lArr","\\Leftarrow"),_n("\\Larr","\\Leftarrow"),_n("\\lrarr","\\leftrightarrow"),_n("\\lrArr","\\Leftrightarrow"),_n("\\Lrarr","\\Leftrightarrow"),_n("\\Mu","\\mathrm{M}"),_n("\\natnums","\\mathbb{N}"),_n("\\Nu","\\mathrm{N}"),_n("\\Omicron","\\mathrm{O}"),_n("\\plusmn","\\pm"),_n("\\rarr","\\rightarrow"),_n("\\rArr","\\Rightarrow"),_n("\\Rarr","\\Rightarrow"),_n("\\real","\\Re"),_n("\\reals","\\mathbb{R}"),_n("\\Reals","\\mathbb{R}"),_n("\\Rho","\\mathrm{P}"),_n("\\sdot","\\cdot"),_n("\\sect","\\S"),_n("\\spades","\\spadesuit"),_n("\\sub","\\subset"),_n("\\sube","\\subseteq"),_n("\\supe","\\supseteq"),_n("\\Tau","\\mathrm{T}"),_n("\\thetasym","\\vartheta"),_n("\\weierp","\\wp"),_n("\\Zeta","\\mathrm{Z}"),_n("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),_n("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),_n("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),_n("\\bra","\\mathinner{\\langle{#1}|}"),_n("\\ket","\\mathinner{|{#1}\\rangle}"),_n("\\braket","\\mathinner{\\langle{#1}\\rangle}"),_n("\\Bra","\\left\\langle#1\\right|"),_n("\\Ket","\\left|#1\\right\\rangle"),_n("\\angln","{\\angl n}"),_n("\\blue","\\textcolor{##6495ed}{#1}"),_n("\\orange","\\textcolor{##ffa500}{#1}"),_n("\\pink","\\textcolor{##ff00af}{#1}"),_n("\\red","\\textcolor{##df0030}{#1}"),_n("\\green","\\textcolor{##28ae7b}{#1}"),_n("\\gray","\\textcolor{gray}{#1}"),_n("\\purple","\\textcolor{##9d38bd}{#1}"),_n("\\blueA","\\textcolor{##ccfaff}{#1}"),_n("\\blueB","\\textcolor{##80f6ff}{#1}"),_n("\\blueC","\\textcolor{##63d9ea}{#1}"),_n("\\blueD","\\textcolor{##11accd}{#1}"),_n("\\blueE","\\textcolor{##0c7f99}{#1}"),_n("\\tealA","\\textcolor{##94fff5}{#1}"),_n("\\tealB","\\textcolor{##26edd5}{#1}"),_n("\\tealC","\\textcolor{##01d1c1}{#1}"),_n("\\tealD","\\textcolor{##01a995}{#1}"),_n("\\tealE","\\textcolor{##208170}{#1}"),_n("\\greenA","\\textcolor{##b6ffb0}{#1}"),_n("\\greenB","\\textcolor{##8af281}{#1}"),_n("\\greenC","\\textcolor{##74cf70}{#1}"),_n("\\greenD","\\textcolor{##1fab54}{#1}"),_n("\\greenE","\\textcolor{##0d923f}{#1}"),_n("\\goldA","\\textcolor{##ffd0a9}{#1}"),_n("\\goldB","\\textcolor{##ffbb71}{#1}"),_n("\\goldC","\\textcolor{##ff9c39}{#1}"),_n("\\goldD","\\textcolor{##e07d10}{#1}"),_n("\\goldE","\\textcolor{##a75a05}{#1}"),_n("\\redA","\\textcolor{##fca9a9}{#1}"),_n("\\redB","\\textcolor{##ff8482}{#1}"),_n("\\redC","\\textcolor{##f9685d}{#1}"),_n("\\redD","\\textcolor{##e84d39}{#1}"),_n("\\redE","\\textcolor{##bc2612}{#1}"),_n("\\maroonA","\\textcolor{##ffbde0}{#1}"),_n("\\maroonB","\\textcolor{##ff92c6}{#1}"),_n("\\maroonC","\\textcolor{##ed5fa6}{#1}"),_n("\\maroonD","\\textcolor{##ca337c}{#1}"),_n("\\maroonE","\\textcolor{##9e034e}{#1}"),_n("\\purpleA","\\textcolor{##ddd7ff}{#1}"),_n("\\purpleB","\\textcolor{##c6b9fc}{#1}"),_n("\\purpleC","\\textcolor{##aa87ff}{#1}"),_n("\\purpleD","\\textcolor{##7854ab}{#1}"),_n("\\purpleE","\\textcolor{##543b78}{#1}"),_n("\\mintA","\\textcolor{##f5f9e8}{#1}"),_n("\\mintB","\\textcolor{##edf2df}{#1}"),_n("\\mintC","\\textcolor{##e0e5cc}{#1}"),_n("\\grayA","\\textcolor{##f6f7f7}{#1}"),_n("\\grayB","\\textcolor{##f0f1f2}{#1}"),_n("\\grayC","\\textcolor{##e3e5e6}{#1}"),_n("\\grayD","\\textcolor{##d6d8da}{#1}"),_n("\\grayE","\\textcolor{##babec2}{#1}"),_n("\\grayF","\\textcolor{##888d93}{#1}"),_n("\\grayG","\\textcolor{##626569}{#1}"),_n("\\grayH","\\textcolor{##3b3e40}{#1}"),_n("\\grayI","\\textcolor{##21242c}{#1}"),_n("\\kaBlue","\\textcolor{##314453}{#1}"),_n("\\kaGreen","\\textcolor{##71B307}{#1}");var Ci={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Ti{constructor(e,t,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new vi(bi,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new yi(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,r,n;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken(),({tokens:n,end:r}=this.consumeArg(["]"]))}else({tokens:n,start:t,end:r}=this.consumeArg());return this.pushToken(new re("EOF",r.loc)),this.pushTokens(n),t.range(r,"")}consumeSpaces(){for(;;){if(" "!==this.future().text)break;this.stack.pop()}}consumeArg(e){var t=[],r=e&&e.length>0;r||this.consumeSpaces();var n,i=this.future(),o=0,s=0;do{if(n=this.popToken(),t.push(n),"{"===n.text)++o;else if("}"===n.text){if(-1===--o)throw new ne("Extra }",n)}else if("EOF"===n.text)throw new ne("Unexpected end of input in a macro argument, expected '"+(e&&r?e[s]:"}")+"'",n);if(e&&r)if((0===o||1===o&&"{"===e[s])&&n.text===e[s]){if(++s===e.length){t.splice(-s,s);break}}else s=0}while(0!==o||r);return"{"===i.text&&"}"===t[t.length-1].text&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:n}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new ne("The length of delimiters doesn't match the number of args!");for(var r=t[0],n=0;n<r.length;n++){var i=this.popToken();if(r[n]!==i.text)throw new ne("Use of the macro doesn't match its definition",i)}}for(var o=[],s=0;s<e;s++)o.push(this.consumeArg(t&&t[s+1]).tokens);return o}expandOnce(e){var t=this.popToken(),r=t.text,n=t.noexpand?null:this._getExpansion(r);if(null==n||e&&n.unexpandable){if(e&&null==n&&"\\"===r[0]&&!this.isDefined(r))throw new ne("Undefined control sequence: "+r);return this.pushToken(t),t}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new ne("Too many expansions: infinite loop or need to increase maxExpand setting");var i=n.tokens,o=this.consumeArgs(n.numArgs,n.delimiters);if(n.numArgs)for(var s=(i=i.slice()).length-1;s>=0;--s){var a=i[s];if("#"===a.text){if(0===s)throw new ne("Incomplete placeholder at end of macro body",a);if("#"===(a=i[--s]).text)i.splice(s+1,1);else{if(!/^[1-9]$/.test(a.text))throw new ne("Not a valid argument number",a);i.splice(s,2,...o[+a.text-1])}}}return this.pushTokens(i),i}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;){var e=this.expandOnce();if(e instanceof re)return e.treatAsRelax&&(e.text="\\relax"),this.stack.pop()}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new re(e)]):void 0}expandTokens(e){var t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;){var n=this.expandOnce(!0);n instanceof re&&(n.treatAsRelax&&(n.noexpand=!1,n.treatAsRelax=!1),t.push(this.stack.pop()))}return t}expandMacroAsText(e){var t=this.expandMacro(e);return t?t.map((e=>e.text)).join(""):t}_getExpansion(e){var t=this.macros.get(e);if(null==t)return t;if(1===e.length){var r=this.lexer.catcodes[e];if(null!=r&&13!==r)return}var n="function"==typeof t?t(this):t;if("string"==typeof n){var i=0;if(-1!==n.indexOf("#"))for(var o=n.replace(/##/g,"");-1!==o.indexOf("#"+(i+1));)++i;for(var s=new yi(n,this.settings),a=[],l=s.lex();"EOF"!==l.text;)a.push(l),l=s.lex();return a.reverse(),{tokens:a,numArgs:i}}return n}isDefined(e){return this.macros.has(e)||mi.hasOwnProperty(e)||tt.math.hasOwnProperty(e)||tt.text.hasOwnProperty(e)||Ci.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return null!=t?"string"==typeof t||"function"==typeof t||!t.unexpandable:mi.hasOwnProperty(e)&&!mi[e].primitive}}var Mi={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},Ai={"á":"á","à":"à","ä":"ä","ǟ":"ǟ","ã":"ã","ā":"ā","ă":"ă","ắ":"ắ","ằ":"ằ","ẵ":"ẵ","ǎ":"ǎ","â":"â","ấ":"ấ","ầ":"ầ","ẫ":"ẫ","ȧ":"ȧ","ǡ":"ǡ","å":"å","ǻ":"ǻ","ḃ":"ḃ","ć":"ć","ḉ":"ḉ","č":"č","ĉ":"ĉ","ċ":"ċ","ç":"ç","ď":"ď","ḋ":"ḋ","ḑ":"ḑ","é":"é","è":"è","ë":"ë","ẽ":"ẽ","ē":"ē","ḗ":"ḗ","ḕ":"ḕ","ĕ":"ĕ","ḝ":"ḝ","ě":"ě","ê":"ê","ế":"ế","ề":"ề","ễ":"ễ","ė":"ė","ȩ":"ȩ","ḟ":"ḟ","ǵ":"ǵ","ḡ":"ḡ","ğ":"ğ","ǧ":"ǧ","ĝ":"ĝ","ġ":"ġ","ģ":"ģ","ḧ":"ḧ","ȟ":"ȟ","ĥ":"ĥ","ḣ":"ḣ","ḩ":"ḩ","í":"í","ì":"ì","ï":"ï","ḯ":"ḯ","ĩ":"ĩ","ī":"ī","ĭ":"ĭ","ǐ":"ǐ","î":"î","ǰ":"ǰ","ĵ":"ĵ","ḱ":"ḱ","ǩ":"ǩ","ķ":"ķ","ĺ":"ĺ","ľ":"ľ","ļ":"ļ","ḿ":"ḿ","ṁ":"ṁ","ń":"ń","ǹ":"ǹ","ñ":"ñ","ň":"ň","ṅ":"ṅ","ņ":"ņ","ó":"ó","ò":"ò","ö":"ö","ȫ":"ȫ","õ":"õ","ṍ":"ṍ","ṏ":"ṏ","ȭ":"ȭ","ō":"ō","ṓ":"ṓ","ṑ":"ṑ","ŏ":"ŏ","ǒ":"ǒ","ô":"ô","ố":"ố","ồ":"ồ","ỗ":"ỗ","ȯ":"ȯ","ȱ":"ȱ","ő":"ő","ṕ":"ṕ","ṗ":"ṗ","ŕ":"ŕ","ř":"ř","ṙ":"ṙ","ŗ":"ŗ","ś":"ś","ṥ":"ṥ","š":"š","ṧ":"ṧ","ŝ":"ŝ","ṡ":"ṡ","ş":"ş","ẗ":"ẗ","ť":"ť","ṫ":"ṫ","ţ":"ţ","ú":"ú","ù":"ù","ü":"ü","ǘ":"ǘ","ǜ":"ǜ","ǖ":"ǖ","ǚ":"ǚ","ũ":"ũ","ṹ":"ṹ","ū":"ū","ṻ":"ṻ","ŭ":"ŭ","ǔ":"ǔ","û":"û","ů":"ů","ű":"ű","ṽ":"ṽ","ẃ":"ẃ","ẁ":"ẁ","ẅ":"ẅ","ŵ":"ŵ","ẇ":"ẇ","ẘ":"ẘ","ẍ":"ẍ","ẋ":"ẋ","ý":"ý","ỳ":"ỳ","ÿ":"ÿ","ỹ":"ỹ","ȳ":"ȳ","ŷ":"ŷ","ẏ":"ẏ","ẙ":"ẙ","ź":"ź","ž":"ž","ẑ":"ẑ","ż":"ż","Á":"Á","À":"À","Ä":"Ä","Ǟ":"Ǟ","Ã":"Ã","Ā":"Ā","Ă":"Ă","Ắ":"Ắ","Ằ":"Ằ","Ẵ":"Ẵ","Ǎ":"Ǎ","Â":"Â","Ấ":"Ấ","Ầ":"Ầ","Ẫ":"Ẫ","Ȧ":"Ȧ","Ǡ":"Ǡ","Å":"Å","Ǻ":"Ǻ","Ḃ":"Ḃ","Ć":"Ć","Ḉ":"Ḉ","Č":"Č","Ĉ":"Ĉ","Ċ":"Ċ","Ç":"Ç","Ď":"Ď","Ḋ":"Ḋ","Ḑ":"Ḑ","É":"É","È":"È","Ë":"Ë","Ẽ":"Ẽ","Ē":"Ē","Ḗ":"Ḗ","Ḕ":"Ḕ","Ĕ":"Ĕ","Ḝ":"Ḝ","Ě":"Ě","Ê":"Ê","Ế":"Ế","Ề":"Ề","Ễ":"Ễ","Ė":"Ė","Ȩ":"Ȩ","Ḟ":"Ḟ","Ǵ":"Ǵ","Ḡ":"Ḡ","Ğ":"Ğ","Ǧ":"Ǧ","Ĝ":"Ĝ","Ġ":"Ġ","Ģ":"Ģ","Ḧ":"Ḧ","Ȟ":"Ȟ","Ĥ":"Ĥ","Ḣ":"Ḣ","Ḩ":"Ḩ","Í":"Í","Ì":"Ì","Ï":"Ï","Ḯ":"Ḯ","Ĩ":"Ĩ","Ī":"Ī","Ĭ":"Ĭ","Ǐ":"Ǐ","Î":"Î","İ":"İ","Ĵ":"Ĵ","Ḱ":"Ḱ","Ǩ":"Ǩ","Ķ":"Ķ","Ĺ":"Ĺ","Ľ":"Ľ","Ļ":"Ļ","Ḿ":"Ḿ","Ṁ":"Ṁ","Ń":"Ń","Ǹ":"Ǹ","Ñ":"Ñ","Ň":"Ň","Ṅ":"Ṅ","Ņ":"Ņ","Ó":"Ó","Ò":"Ò","Ö":"Ö","Ȫ":"Ȫ","Õ":"Õ","Ṍ":"Ṍ","Ṏ":"Ṏ","Ȭ":"Ȭ","Ō":"Ō","Ṓ":"Ṓ","Ṑ":"Ṑ","Ŏ":"Ŏ","Ǒ":"Ǒ","Ô":"Ô","Ố":"Ố","Ồ":"Ồ","Ỗ":"Ỗ","Ȯ":"Ȯ","Ȱ":"Ȱ","Ő":"Ő","Ṕ":"Ṕ","Ṗ":"Ṗ","Ŕ":"Ŕ","Ř":"Ř","Ṙ":"Ṙ","Ŗ":"Ŗ","Ś":"Ś","Ṥ":"Ṥ","Š":"Š","Ṧ":"Ṧ","Ŝ":"Ŝ","Ṡ":"Ṡ","Ş":"Ş","Ť":"Ť","Ṫ":"Ṫ","Ţ":"Ţ","Ú":"Ú","Ù":"Ù","Ü":"Ü","Ǘ":"Ǘ","Ǜ":"Ǜ","Ǖ":"Ǖ","Ǚ":"Ǚ","Ũ":"Ũ","Ṹ":"Ṹ","Ū":"Ū","Ṻ":"Ṻ","Ŭ":"Ŭ","Ǔ":"Ǔ","Û":"Û","Ů":"Ů","Ű":"Ű","Ṽ":"Ṽ","Ẃ":"Ẃ","Ẁ":"Ẁ","Ẅ":"Ẅ","Ŵ":"Ŵ","Ẇ":"Ẇ","Ẍ":"Ẍ","Ẋ":"Ẋ","Ý":"Ý","Ỳ":"Ỳ","Ÿ":"Ÿ","Ỹ":"Ỹ","Ȳ":"Ȳ","Ŷ":"Ŷ","Ẏ":"Ẏ","Ź":"Ź","Ž":"Ž","Ẑ":"Ẑ","Ż":"Ż","ά":"ά","ὰ":"ὰ","ᾱ":"ᾱ","ᾰ":"ᾰ","έ":"έ","ὲ":"ὲ","ή":"ή","ὴ":"ὴ","ί":"ί","ὶ":"ὶ","ϊ":"ϊ","ΐ":"ΐ","ῒ":"ῒ","ῑ":"ῑ","ῐ":"ῐ","ό":"ό","ὸ":"ὸ","ύ":"ύ","ὺ":"ὺ","ϋ":"ϋ","ΰ":"ΰ","ῢ":"ῢ","ῡ":"ῡ","ῠ":"ῠ","ώ":"ώ","ὼ":"ὼ","Ύ":"Ύ","Ὺ":"Ὺ","Ϋ":"Ϋ","Ῡ":"Ῡ","Ῠ":"Ῠ","Ώ":"Ώ","Ὼ":"Ὼ"};class Ei{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Ti(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(void 0===t&&(t=!0),this.fetch().text!==e)throw new ne("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new re("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,r}parseExpression(e,t){for(var r=[];;){"math"===this.mode&&this.consumeSpaces();var n=this.fetch();if(-1!==Ei.endOfExpression.indexOf(n.text))break;if(t&&n.text===t)break;if(e&&mi[n.text]&&mi[n.text].infix)break;var i=this.parseAtom(t);if(!i)break;"internal"!==i.type&&r.push(i)}return"text"===this.mode&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var t,r=-1,n=0;n<e.length;n++)if("infix"===e[n].type){if(-1!==r)throw new ne("only one infix operator per group",e[n].token);r=n,t=e[n].replaceWith}if(-1!==r&&t){var i,o,s=e.slice(0,r),a=e.slice(r+1);return i=1===s.length&&"ordgroup"===s[0].type?s[0]:{type:"ordgroup",mode:this.mode,body:s},o=1===a.length&&"ordgroup"===a[0].type?a[0]:{type:"ordgroup",mode:this.mode,body:a},["\\\\abovefrac"===t?this.callFunction(t,[i,e[r],o],[]):this.callFunction(t,[i,o],[])]}return e}handleSupSubscript(e){var t=this.fetch(),r=t.text;this.consume(),this.consumeSpaces();var n=this.parseGroup(e);if(!n)throw new ne("Expected group after '"+r+"'",t);return n}formatUnsupportedCmd(e){for(var t=[],r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});var n={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]}}parseAtom(e){var t,r,n=this.parseGroup("atom",e);if("text"===this.mode)return n;for(;;){this.consumeSpaces();var i=this.fetch();if("\\limits"===i.text||"\\nolimits"===i.text){if(n&&"op"===n.type){var o="\\limits"===i.text;n.limits=o,n.alwaysHandleSupSub=!0}else{if(!n||"operatorname"!==n.type)throw new ne("Limit controls must follow a math operator",i);n.alwaysHandleSupSub&&(n.limits="\\limits"===i.text)}this.consume()}else if("^"===i.text){if(t)throw new ne("Double superscript",i);t=this.handleSupSubscript("superscript")}else if("_"===i.text){if(r)throw new ne("Double subscript",i);r=this.handleSupSubscript("subscript")}else{if("'"!==i.text)break;if(t)throw new ne("Double superscript",i);var s={type:"textord",mode:this.mode,text:"\\prime"},a=[s];for(this.consume();"'"===this.fetch().text;)a.push(s),this.consume();"^"===this.fetch().text&&a.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:a}}}return t||r?{type:"supsub",mode:this.mode,base:n,sup:t,sub:r}:n}parseFunction(e,t){var r=this.fetch(),n=r.text,i=mi[n];if(!i)return null;if(this.consume(),t&&"atom"!==t&&!i.allowedInArgument)throw new ne("Got function '"+n+"' with no arguments"+(t?" as "+t:""),r);if("text"===this.mode&&!i.allowedInText)throw new ne("Can't use function '"+n+"' in text mode",r);if("math"===this.mode&&!1===i.allowedInMath)throw new ne("Can't use function '"+n+"' in math mode",r);var{args:o,optArgs:s}=this.parseArguments(n,i);return this.callFunction(n,o,s,r,e)}callFunction(e,t,r,n,i){var o={funcName:e,parser:this,token:n,breakOnTokenText:i},s=mi[e];if(s&&s.handler)return s.handler(o,t,r);throw new ne("No function handler for "+e)}parseArguments(e,t){var r=t.numArgs+t.numOptionalArgs;if(0===r)return{args:[],optArgs:[]};for(var n=[],i=[],o=0;o<r;o++){var s=t.argTypes&&t.argTypes[o],a=o<t.numOptionalArgs;(t.primitive&&null==s||"sqrt"===t.type&&1===o&&null==i[0])&&(s="primitive");var l=this.parseGroupOfType("argument to '"+e+"'",s,a);if(a)i.push(l);else{if(null==l)throw new ne("Null argument, please report this as a bug");n.push(l)}}return{args:n,optArgs:i}}parseGroupOfType(e,t,r){switch(t){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,t);case"hbox":var n=this.parseArgumentGroup(r,"text");return null!=n?{type:"styling",mode:n.mode,body:[n],style:"text"}:null;case"raw":var i=this.parseStringGroup("raw",r);return null!=i?{type:"raw",mode:"text",string:i.text}:null;case"primitive":if(r)throw new ne("A primitive argument cannot be optional");var o=this.parseGroup(e);if(null==o)throw new ne("Expected group as "+e,this.fetch());return o;case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new ne("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}parseStringGroup(e,t){var r=this.gullet.scanArgument(t);if(null==r)return null;for(var n,i="";"EOF"!==(n=this.fetch()).text;)i+=n.text,this.consume();return this.consume(),r.text=i,r}parseRegexGroup(e,t){for(var r,n=this.fetch(),i=n,o="";"EOF"!==(r=this.fetch()).text&&e.test(o+r.text);)o+=(i=r).text,this.consume();if(""===o)throw new ne("Invalid "+t+": '"+n.text+"'",n);return n.range(i,o)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(null==t)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!r)throw new ne("Invalid color: '"+t.text+"'",t);var n=r[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}}parseSizeGroup(e){var t,r=!1;if(this.gullet.consumeSpaces(),!(t=e||"{"===this.gullet.future().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",r=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!n)throw new ne("Invalid size: '"+t.text+"'",t);var i={number:+(n[1]+n[2]),unit:n[3]};if(!Le(i))throw new ne("Invalid unit: '"+i.unit+"'",t);return{type:"size",mode:this.mode,value:i,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;var r=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,t){var r=this.gullet.scanArgument(e);if(null==r)return null;var n=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:r.loc,body:i};return t&&this.switchMode(n),o}parseGroup(e,t){var r,n=this.fetch(),i=n.text;if("{"===i||"\\begingroup"===i){this.consume();var o="{"===i?"}":"\\endgroup";this.gullet.beginGroup();var s=this.parseExpression(!1,o),a=this.fetch();this.expect(o),this.gullet.endGroup(),r={type:"ordgroup",mode:this.mode,loc:te.range(n,a),body:s,semisimple:"\\begingroup"===i||void 0}}else if(null==(r=this.parseFunction(t,e)||this.parseSymbol())&&"\\"===i[0]&&!Ci.hasOwnProperty(i)){if(this.settings.throwOnError)throw new ne("Undefined control sequence: "+i,n);r=this.formatUnsupportedCmd(i),this.consume()}return r}formLigatures(e){for(var t=e.length-1,r=0;r<t;++r){var n=e[r],i=n.text;"-"===i&&"-"===e[r+1].text&&(r+1<t&&"-"===e[r+2].text?(e.splice(r,3,{type:"textord",mode:"text",loc:te.range(n,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:te.range(n,e[r+1]),text:"--"}),t-=1)),"'"!==i&&"`"!==i||e[r+1].text!==i||(e.splice(r,2,{type:"textord",mode:"text",loc:te.range(n,e[r+1]),text:i+i}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var r=t.slice(5),n="*"===r.charAt(0);if(n&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new ne("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:r=r.slice(1,-1),star:n}}Ai.hasOwnProperty(t[0])&&!tt[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=Ai[t[0]]+t.substr(1));var i,o=gi.exec(t);if(o&&("i"===(t=t.substring(0,o.index))?t="ı":"j"===t&&(t="ȷ")),tt[this.mode][t]){this.settings.strict&&"math"===this.mode&&"ÐÞþ".indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var s,a=tt[this.mode][t].group,l=te.range(e);if(Qe.hasOwnProperty(a)){var c=a;s={type:"atom",mode:this.mode,family:c,loc:l,text:t}}else s={type:a,mode:this.mode,loc:l,text:t};i=s}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(Se(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),i={type:"textord",mode:"text",loc:te.range(e),text:t}}if(this.consume(),o)for(var h=0;h<o[0].length;h++){var u=o[0][h];if(!Mi[u])throw new ne("Unknown accent ' "+u+"'",e);var d=Mi[u][this.mode]||Mi[u].text;if(!d)throw new ne("Accent "+u+" unsupported in "+this.mode+" mode",e);i={type:"accent",mode:this.mode,loc:te.range(e),label:d,isStretchy:!1,isShifty:!0,base:i}}return i}}Ei.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Oi=function(e,t){if(!("string"==typeof e||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new Ei(e,t);delete r.gullet.macros.current["\\df@tag"];var n=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new ne("\\tag works only in display equations");n=[{type:"tag",mode:"text",body:n,tag:r.subparse([new re("\\df@tag")])}]}return n},Ni=function(e,t,r){t.textContent="";var n=Di(e,r).toNode();t.appendChild(n)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Ni=function(){throw new ne("KaTeX doesn't work in quirks mode.")});var Ri=function(e,t,r){if(r.throwOnError||!(e instanceof ne))throw e;var n=qt.makeSpan(["katex-error"],[new Je(t)]);return n.setAttribute("title",e.toString()),n.setAttribute("style","color:"+r.errorColor),n},Di=function(e,t){var r=new ue(t);try{return function(e,t,r){var n,i=_r(r);if("mathml"===r.output)return Sr(e,t,i,r.displayMode,!0);if("html"===r.output){var o=dr(e,i);n=qt.makeSpan(["katex"],[o])}else{var s=Sr(e,t,i,r.displayMode,!1),a=dr(e,i);n=qt.makeSpan(["katex"],[s,a])}return Cr(n,r)}(Oi(e,r),e,r)}catch(n){return Ri(n,e,r)}},zi={version:"0.15.2",render:Ni,renderToString:function(e,t){return Di(e,t).toMarkup()},ParseError:ne,SETTINGS_SCHEMA:ce,__parse:function(e,t){var r=new ue(t);return Oi(e,r)},__renderToDomTree:Di,__renderToHTMLTree:function(e,t){var r=new ue(t);try{return function(e,t,r){var n=dr(e,_r(r)),i=qt.makeSpan(["katex"],[n]);return Cr(i,r)}(Oi(e,r),0,r)}catch(n){return Ri(n,e,r)}},__setFontMetrics:function(e,t){Te[e]=t},__defineSymbol:rt,__defineMacro:_n,__domTree:{Span:$e,Anchor:He,SymbolNode:Je,SvgNode:Ke,PathNode:Ye,LineNode:Xe}};function Ii(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Bi={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const Li=/[&<>"']/,Pi=/[&<>"']/g,Fi=/[<>"']|&(?!#?\w+;)/,qi=/[<>"']|&(?!#?\w+;)/g,Ui={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ji=e=>Ui[e];function Vi(e,t){if(t){if(Li.test(e))return e.replace(Pi,ji)}else if(Fi.test(e))return e.replace(qi,ji);return e}const $i=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Hi(e){return e.replace($i,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Wi=/(^|[^\[])\^/g;function Gi(e,t){e=e.source||e,t=t||"";const r={replace:(t,n)=>(n=(n=n.source||n).replace(Wi,"$1"),e=e.replace(t,n),r),getRegex:()=>new RegExp(e,t)};return r}const Ji=/[^\w:]/g,Ki=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Yi(e,t,r){if(e){let e;try{e=decodeURIComponent(Hi(r)).replace(Ji,"").toLowerCase()}catch(n){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!Ki.test(r)&&(r=function(e,t){Xi[" "+e]||(Zi.test(e)?Xi[" "+e]=e+"/":Xi[" "+e]=io(e,"/",!0));const r=-1===(e=Xi[" "+e]).indexOf(":");return"//"===t.substring(0,2)?r?t:e.replace(Qi,"$1")+t:"/"===t.charAt(0)?r?t:e.replace(eo,"$1")+t:e+t}(t,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch(n){return null}return r}const Xi={},Zi=/^[^:]+:\/*[^/]*$/,Qi=/^([^:]+:)[\s\S]*$/,eo=/^([^:]+:\/*[^/]*)[\s\S]*$/;const to={exec:function(){}};function ro(e){let t,r,n=1;for(;n<arguments.length;n++)for(r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function no(e,t){const r=e.replace(/\|/g,((e,t,r)=>{let n=!1,i=t;for(;--i>=0&&"\\"===r[i];)n=!n;return n?"|":" |"})).split(/ \|/);let n=0;if(r[0].trim()||r.shift(),r[r.length-1].trim()||r.pop(),r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(/\\\|/g,"|");return r}function io(e,t,r){const n=e.length;if(0===n)return"";let i=0;for(;i<n;){const o=e.charAt(n-i-1);if(o!==t||r){if(o===t||!r)break;i++}else i++}return e.substr(0,n-i)}function oo(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function so(e,t){if(t<1)return"";let r="";for(;t>1;)1&t&&(r+=e),t>>=1,e+=e;return r+e}function ao(e,t,r,n){const i=t.href,o=t.title?Vi(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;const e={type:"link",raw:r,href:i,title:o,text:s,tokens:n.inlineTokens(s,[])};return n.state.inLink=!1,e}return{type:"image",raw:r,href:i,title:o,text:Vi(s)}}class lo{constructor(e){this.options=e||Bi}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:io(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],r=function(e,t){const r=e.match(/^(\s+)(?:```)/);if(null===r)return t;const n=r[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[r]=t;return r.length>=n.length?e.slice(n.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=io(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}const r={type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,n,i,o,s,a,l,c,h,u,d,p,f=t[1].trim();const m=f.length>1,g={type:"list",raw:"",ordered:m,start:m?+f.slice(0,-1):"",loose:!1,items:[]};f=m?`\\d{1,9}\\${f.slice(-1)}`:`\\${f}`,this.options.pedantic&&(f=m?f:"[*+-]");const y=new RegExp(`^( {0,3}${f})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(p=!1,t=y.exec(e))&&!this.rules.block.hr.test(e);){if(r=t[0],e=e.substring(r.length),c=t[2].split("\n",1)[0],h=e.split("\n",1)[0],this.options.pedantic?(o=2,d=c.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,d=c.slice(o),o+=t[1].length),a=!1,!c&&/^ *$/.test(h)&&(r+=h+"\n",e=e.substring(h.length+1),p=!0),!p){const t=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(u=e.split("\n",1)[0],c=u,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!t.test(c));){if(c.search(/[^ ]/)>=o||!c.trim())d+="\n"+c.slice(o);else{if(a)break;d+="\n"+c}a||c.trim()||(a=!0),r+=u+"\n",e=e.substring(u.length+1)}}g.loose||(l?g.loose=!0:/\n *\n *$/.test(r)&&(l=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(d),n&&(i="[ ] "!==n[0],d=d.replace(/^\[[ xX]\] +/,""))),g.items.push({type:"list_item",raw:r,task:!!n,checked:i,loose:!1,text:d}),g.raw+=r}g.items[g.items.length-1].raw=r.trimRight(),g.items[g.items.length-1].text=d.trimRight(),g.raw=g.raw.trimRight();const v=g.items.length;for(s=0;s<v;s++){this.lexer.state.top=!1,g.items[s].tokens=this.lexer.blockTokens(g.items[s].text,[]);const e=g.items[s].tokens.filter((e=>"space"===e.type)),t=e.every((e=>{const t=e.raw.split("");let r=0;for(const n of t)if("\n"===n&&(r+=1),r>1)return!0;return!1}));!g.loose&&e.length&&t&&(g.loose=!0,g.items[s].loose=!0)}return g}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(e.type="paragraph",e.text=this.options.sanitizer?this.options.sanitizer(t[0]):Vi(t[0]),e.tokens=[],this.lexer.inline(e.text,e.tokens)),e}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));return{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:no(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let r,n,i,o,s=e.align.length;for(r=0;r<s;r++)/^ *-+: *$/.test(e.align[r])?e.align[r]="right":/^ *:-+: *$/.test(e.align[r])?e.align[r]="center":/^ *:-+ *$/.test(e.align[r])?e.align[r]="left":e.align[r]=null;for(s=e.rows.length,r=0;r<s;r++)e.rows[r]=no(e.rows[r],e.header.length).map((e=>({text:e})));for(s=e.header.length,n=0;n<s;n++)e.header[n].tokens=[],this.lexer.inlineTokens(e.header[n].text,e.header[n].tokens);for(s=e.rows.length,n=0;n<s;n++)for(o=e.rows[n],i=0;i<o.length;i++)o[i].tokens=[],this.lexer.inlineTokens(o[i].text,o[i].tokens);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const e={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}text(e){const t=this.rules.block.text.exec(e);if(t){const e={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Vi(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Vi(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=io(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;const r=e.length;let n=0,i=0;for(;i<r;i++)if("\\"===e[i])i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return-1}(t[2],"()");if(e>-1){const r=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,r).trim(),t[3]=""}}let r=t[2],n="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);e&&(r=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(e)?r.slice(1):r.slice(1,-1)),ao(t,{href:r?r.replace(this.rules.inline._escapes,"$1"):r,title:n?n.replace(this.rules.inline._escapes,"$1"):n},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let e=(r[2]||r[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=r[0].charAt(0);return{type:"text",raw:e,text:e}}return ao(r,e,r[0],this.lexer)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrong.lDelim.exec(e);if(!n)return;if(n[3]&&r.match(/[\p{L}\p{N}]/u))return;const i=n[1]||n[2]||"";if(!i||i&&(""===r||this.rules.inline.punctuation.exec(r))){const r=n[0].length-1;let i,o,s=r,a=0;const l="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+r);null!=(n=l.exec(t));){if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!i)continue;if(o=i.length,n[3]||n[4]){s+=o;continue}if((n[5]||n[6])&&r%3&&!((r+o)%3)){a+=o;continue}if(s-=o,s>0)continue;if(o=Math.min(o,o+s+a),Math.min(r,o)%2){const t=e.slice(1,r+n.index+o);return{type:"em",raw:e.slice(0,r+n.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}const t=e.slice(2,r+n.index+o-1);return{type:"strong",raw:e.slice(0,r+n.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const r=/[^ ]/.test(e),n=/^ /.test(e)&&/ $/.test(e);return r&&n&&(e=e.substring(1,e.length-1)),e=Vi(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let e,n;return"@"===r[2]?(e=Vi(this.options.mangle?t(r[1]):r[1]),n="mailto:"+e):(e=Vi(r[1]),n=e),{type:"link",raw:r[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let e,n;if("@"===r[2])e=Vi(this.options.mangle?t(r[0]):r[0]),n="mailto:"+e;else{let t;do{t=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(t!==r[0]);e=Vi(r[0]),n="www."===r[1]?"http://"+e:e}return{type:"link",raw:r[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Vi(r[0]):r[0]:Vi(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:e}}}}const co={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:to,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};co.def=Gi(co.def).replace("label",co._label).replace("title",co._title).getRegex(),co.bullet=/(?:[*+-]|\d{1,9}[.)])/,co.listItemStart=Gi(/^( *)(bull) */).replace("bull",co.bullet).getRegex(),co.list=Gi(co.list).replace(/bull/g,co.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+co.def.source+")").getRegex(),co._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",co._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,co.html=Gi(co.html,"i").replace("comment",co._comment).replace("tag",co._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),co.paragraph=Gi(co._paragraph).replace("hr",co.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",co._tag).getRegex(),co.blockquote=Gi(co.blockquote).replace("paragraph",co.paragraph).getRegex(),co.normal=ro({},co),co.gfm=ro({},co.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),co.gfm.table=Gi(co.gfm.table).replace("hr",co.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",co._tag).getRegex(),co.gfm.paragraph=Gi(co._paragraph).replace("hr",co.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",co.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",co._tag).getRegex(),co.pedantic=ro({},co.normal,{html:Gi("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",co._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:to,paragraph:Gi(co.normal._paragraph).replace("hr",co.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",co.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const ho={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:to,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:to,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function uo(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function po(e){let t,r,n="";const i=e.length;for(t=0;t<i;t++)r=e.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),n+="&#"+r+";";return n}ho._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",ho.punctuation=Gi(ho.punctuation).replace(/punctuation/g,ho._punctuation).getRegex(),ho.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ho.escapedEmSt=/\\\*|\\_/g,ho._comment=Gi(co._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),ho.emStrong.lDelim=Gi(ho.emStrong.lDelim).replace(/punct/g,ho._punctuation).getRegex(),ho.emStrong.rDelimAst=Gi(ho.emStrong.rDelimAst,"g").replace(/punct/g,ho._punctuation).getRegex(),ho.emStrong.rDelimUnd=Gi(ho.emStrong.rDelimUnd,"g").replace(/punct/g,ho._punctuation).getRegex(),ho._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ho._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ho._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ho.autolink=Gi(ho.autolink).replace("scheme",ho._scheme).replace("email",ho._email).getRegex(),ho._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ho.tag=Gi(ho.tag).replace("comment",ho._comment).replace("attribute",ho._attribute).getRegex(),ho._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ho._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ho._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ho.link=Gi(ho.link).replace("label",ho._label).replace("href",ho._href).replace("title",ho._title).getRegex(),ho.reflink=Gi(ho.reflink).replace("label",ho._label).replace("ref",co._label).getRegex(),ho.nolink=Gi(ho.nolink).replace("ref",co._label).getRegex(),ho.reflinkSearch=Gi(ho.reflinkSearch,"g").replace("reflink",ho.reflink).replace("nolink",ho.nolink).getRegex(),ho.normal=ro({},ho),ho.pedantic=ro({},ho.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Gi(/^!?\[(label)\]\((.*?)\)/).replace("label",ho._label).getRegex(),reflink:Gi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ho._label).getRegex()}),ho.gfm=ro({},ho.normal,{escape:Gi(ho.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),ho.gfm.url=Gi(ho.gfm.url,"i").replace("email",ho.gfm._extended_email).getRegex(),ho.breaks=ro({},ho.gfm,{br:Gi(ho.br).replace("{2,}","*").getRegex(),text:Gi(ho.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class fo{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Bi,this.options.tokenizer=this.options.tokenizer||new lo,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:co.normal,inline:ho.normal};this.options.pedantic?(t.block=co.pedantic,t.inline=ho.pedantic):this.options.gfm&&(t.block=co.gfm,this.options.breaks?t.inline=ho.breaks:t.inline=ho.gfm),this.tokenizer.rules=t}static get rules(){return{block:co,inline:ho}}static lex(e,t){return new fo(t).lex(e)}static lexInline(e,t){return new fo(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let r,n,i,o;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))))if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),1===r.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(r);else if(r=this.tokenizer.code(e))e=e.substring(r.raw.length),n=t[t.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?t.push(r):(n.raw+="\n"+r.raw,n.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.list(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.def(e))e=e.substring(r.raw.length),n=t[t.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(n.raw+="\n"+r.raw,n.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const r=e.slice(1);let n;this.options.extensions.startBlock.forEach((function(e){n=e.call({lexer:this},r),"number"==typeof n&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i)))n=t[t.length-1],o&&"paragraph"===n.type?(n.raw+="\n"+r.raw,n.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(r),o=i.length!==e.length,e=e.substring(r.raw.length);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),n=t[t.length-1],n&&"text"===n.type?(n.raw+="\n"+r.raw,n.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(r);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let r,n,i,o,s,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+so("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+so("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))))if(r=this.tokenizer.escape(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.tag(e))e=e.substring(r.raw.length),n=t[t.length-1],n&&"text"===r.type&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);else if(r=this.tokenizer.link(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(r.raw.length),n=t[t.length-1],n&&"text"===r.type&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);else if(r=this.tokenizer.emStrong(e,l,a))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.codespan(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.br(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.del(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.autolink(e,po))e=e.substring(r.raw.length),t.push(r);else if(this.state.inLink||!(r=this.tokenizer.url(e,po))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const r=e.slice(1);let n;this.options.extensions.startInline.forEach((function(e){n=e.call({lexer:this},r),"number"==typeof n&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(r=this.tokenizer.inlineText(i,uo))e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(a=r.raw.slice(-1)),s=!0,n=t[t.length-1],n&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(r.raw.length),t.push(r);return t}}class mo{constructor(e){this.options=e||Bi}code(e,t,r){const n=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,n);null!=t&&t!==e&&(r=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+Vi(n,!0)+'">'+(r?e:Vi(e,!0))+"</code></pre>\n":"<pre><code>"+(r?e:Vi(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,r,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(r)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,r){const n=t?"ol":"ul";return"<"+n+(t&&1!==r?' start="'+r+'"':"")+">\n"+e+"</"+n+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const r=t.header?"th":"td";return(t.align?"<"+r+' align="'+t.align+'">':"<"+r+">")+e+"</"+r+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,r){if(null===(e=Yi(this.options.sanitize,this.options.baseUrl,e)))return r;let n='<a href="'+Vi(e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+r+"</a>",n}image(e,t,r){if(null===(e=Yi(this.options.sanitize,this.options.baseUrl,e)))return r;let n='<img src="'+e+'" alt="'+r+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">",n}text(e){return e}}class go{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class yo{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,n=0;if(this.seen.hasOwnProperty(r)){n=this.seen[e];do{n++,r=e+"-"+n}while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=n,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class vo{constructor(e){this.options=e||Bi,this.options.renderer=this.options.renderer||new mo,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new go,this.slugger=new yo}static parse(e,t){return new vo(t).parse(e)}static parseInline(e,t){return new vo(t).parseInline(e)}parse(e,t=!0){let r,n,i,o,s,a,l,c,h,u,d,p,f,m,g,y,v,b,w,x="";const k=e.length;for(r=0;r<k;r++)if(u=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type]&&(w=this.options.extensions.renderers[u.type].call({parser:this},u),!1!==w||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)))x+=w||"";else switch(u.type){case"space":continue;case"hr":x+=this.renderer.hr();continue;case"heading":x+=this.renderer.heading(this.parseInline(u.tokens),u.depth,Hi(this.parseInline(u.tokens,this.textRenderer)),this.slugger);continue;case"code":x+=this.renderer.code(u.text,u.lang,u.escaped);continue;case"table":for(c="",l="",o=u.header.length,n=0;n<o;n++)l+=this.renderer.tablecell(this.parseInline(u.header[n].tokens),{header:!0,align:u.align[n]});for(c+=this.renderer.tablerow(l),h="",o=u.rows.length,n=0;n<o;n++){for(a=u.rows[n],l="",s=a.length,i=0;i<s;i++)l+=this.renderer.tablecell(this.parseInline(a[i].tokens),{header:!1,align:u.align[i]});h+=this.renderer.tablerow(l)}x+=this.renderer.table(c,h);continue;case"blockquote":h=this.parse(u.tokens),x+=this.renderer.blockquote(h);continue;case"list":for(d=u.ordered,p=u.start,f=u.loose,o=u.items.length,h="",n=0;n<o;n++)g=u.items[n],y=g.checked,v=g.task,m="",g.task&&(b=this.renderer.checkbox(y),f?g.tokens.length>0&&"paragraph"===g.tokens[0].type?(g.tokens[0].text=b+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=b+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:b}):m+=b),m+=this.parse(g.tokens,f),h+=this.renderer.listitem(m,v,y);x+=this.renderer.list(h,d,p);continue;case"html":x+=this.renderer.html(u.text);continue;case"paragraph":x+=this.renderer.paragraph(this.parseInline(u.tokens));continue;case"text":for(h=u.tokens?this.parseInline(u.tokens):u.text;r+1<k&&"text"===e[r+1].type;)u=e[++r],h+="\n"+(u.tokens?this.parseInline(u.tokens):u.text);x+=t?this.renderer.paragraph(h):h;continue;default:{const e='Token with "'+u.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return x}parseInline(e,t){t=t||this.renderer;let r,n,i,o="";const s=e.length;for(r=0;r<s;r++)if(n=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]&&(i=this.options.extensions.renderers[n.type].call({parser:this},n),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)))o+=i||"";else switch(n.type){case"escape":case"text":o+=t.text(n.text);break;case"html":o+=t.html(n.text);break;case"link":o+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":o+=t.image(n.href,n.title,n.text);break;case"strong":o+=t.strong(this.parseInline(n.tokens,t));break;case"em":o+=t.em(this.parseInline(n.tokens,t));break;case"codespan":o+=t.codespan(n.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(n.tokens,t));break;default:{const e='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return o}}function bo(e,t,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(r=t,t=null),oo(t=ro({},bo.defaults,t||{})),r){const i=t.highlight;let o;try{o=fo.lex(e,t)}catch(n){return r(n)}const s=function(e){let s;if(!e)try{t.walkTokens&&bo.walkTokens(o,t.walkTokens),s=vo.parse(o,t)}catch(n){e=n}return t.highlight=i,e?r(e):r(null,s)};if(!i||i.length<3)return s();if(delete t.highlight,!o.length)return s();let a=0;return bo.walkTokens(o,(function(e){"code"===e.type&&(a++,setTimeout((()=>{i(e.text,e.lang,(function(t,r){if(t)return s(t);null!=r&&r!==e.text&&(e.text=r,e.escaped=!0),a--,0===a&&s()}))}),0))})),void(0===a&&s())}try{const r=fo.lex(e,t);return t.walkTokens&&bo.walkTokens(r,t.walkTokens),vo.parse(r,t)}catch(n){if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+Vi(n.message+"",!0)+"</pre>";throw n}}bo.options=bo.setOptions=function(e){var t;return ro(bo.defaults,e),t=bo.defaults,Bi=t,bo},bo.getDefaults=Ii,bo.defaults=Bi,bo.use=function(...e){const t=ro({},...e),r=bo.defaults.extensions||{renderers:{},childTokens:{}};let n;e.forEach((e=>{if(e.extensions&&(n=!0,e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const t=r.renderers?r.renderers[e.name]:null;r.renderers[e.name]=t?function(...r){let n=e.renderer.apply(this,r);return!1===n&&(n=t.apply(this,r)),n}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");r[e.level]?r[e.level].unshift(e.tokenizer):r[e.level]=[e.tokenizer],e.start&&("block"===e.level?r.startBlock?r.startBlock.push(e.start):r.startBlock=[e.start]:"inline"===e.level&&(r.startInline?r.startInline.push(e.start):r.startInline=[e.start]))}e.childTokens&&(r.childTokens[e.name]=e.childTokens)}))),e.renderer){const r=bo.defaults.renderer||new mo;for(const t in e.renderer){const n=r[t];r[t]=(...i)=>{let o=e.renderer[t].apply(r,i);return!1===o&&(o=n.apply(r,i)),o}}t.renderer=r}if(e.tokenizer){const r=bo.defaults.tokenizer||new lo;for(const t in e.tokenizer){const n=r[t];r[t]=(...i)=>{let o=e.tokenizer[t].apply(r,i);return!1===o&&(o=n.apply(r,i)),o}}t.tokenizer=r}if(e.walkTokens){const r=bo.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens.call(this,t),r&&r.call(this,t)}}n&&(t.extensions=r),bo.setOptions(t)}))},bo.walkTokens=function(e,t){for(const r of e)switch(t.call(bo,r),r.type){case"table":for(const e of r.header)bo.walkTokens(e.tokens,t);for(const e of r.rows)for(const r of e)bo.walkTokens(r.tokens,t);break;case"list":bo.walkTokens(r.items,t);break;default:bo.defaults.extensions&&bo.defaults.extensions.childTokens&&bo.defaults.extensions.childTokens[r.type]?bo.defaults.extensions.childTokens[r.type].forEach((function(e){bo.walkTokens(r[e],t)})):r.tokens&&bo.walkTokens(r.tokens,t)}},bo.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");oo(t=ro({},bo.defaults,t||{}));try{const r=fo.lexInline(e,t);return t.walkTokens&&bo.walkTokens(r,t.walkTokens),vo.parseInline(r,t)}catch(r){if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+Vi(r.message+"",!0)+"</pre>";throw r}},bo.Parser=vo,bo.parser=vo.parse,bo.Renderer=mo,bo.TextRenderer=go,bo.Lexer=fo,bo.lexer=fo.lex,bo.Tokenizer=lo,bo.Slugger=yo,bo.parse=bo,vo.parse,fo.lex;var wo=Object.hasOwnProperty,xo=Object.setPrototypeOf,ko=Object.isFrozen,So=Object.getPrototypeOf,_o=Object.getOwnPropertyDescriptor,Co=Object.freeze,To=Object.seal,Mo=Object.create,Ao="undefined"!=typeof Reflect&&Reflect,Eo=Ao.apply,Oo=Ao.construct;Eo||(Eo=function(e,t,r){return e.apply(t,r)}),Co||(Co=function(e){return e}),To||(To=function(e){return e}),Oo||(Oo=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(
/*! @license DOMPurify 2.3.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.5/LICENSE */
function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))))});var No,Ro=jo(Array.prototype.forEach),Do=jo(Array.prototype.pop),zo=jo(Array.prototype.push),Io=jo(String.prototype.toLowerCase),Bo=jo(String.prototype.match),Lo=jo(String.prototype.replace),Po=jo(String.prototype.indexOf),Fo=jo(String.prototype.trim),qo=jo(RegExp.prototype.test),Uo=(No=TypeError,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Oo(No,t)});function jo(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Eo(e,t,n)}}function Vo(e,t){xo&&xo(e,null);for(var r=t.length;r--;){var n=t[r];if("string"==typeof n){var i=Io(n);i!==n&&(ko(t)||(t[r]=i),n=i)}e[n]=!0}return e}function $o(e){var t=Mo(null),r=void 0;for(r in e)Eo(wo,e,[r])&&(t[r]=e[r]);return t}function Ho(e,t){for(;null!==e;){var r=_o(e,t);if(r){if(r.get)return jo(r.get);if("function"==typeof r.value)return jo(r.value)}e=So(e)}return function(e){return console.warn("fallback value for",e),null}}var Wo=Co(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Go=Co(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Jo=Co(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ko=Co(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Yo=Co(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Xo=Co(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Zo=Co(["#text"]),Qo=Co(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),es=Co(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ts=Co(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),rs=Co(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ns=To(/\{\{[\s\S]*|[\s\S]*\}\}/gm),is=To(/<%[\s\S]*|[\s\S]*%>/gm),os=To(/^data-[\-\w.\u00B7-\uFFFF]/),ss=To(/^aria-[\-\w]+$/),as=To(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ls=To(/^(?:\w+script|data):/i),cs=To(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function us(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var ds=function(){return"undefined"==typeof window?null:window},ps=function(e,t){if("object"!==(void 0===e?"undefined":hs(e))||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(r=t.currentScript.getAttribute(n));var i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(o){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var fs=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ds(),r=function(t){return e(t)};if(r.version="2.3.5",r.removed=[],!t||!t.document||9!==t.document.nodeType)return r.isSupported=!1,r;var n=t.document,i=t.document,o=t.DocumentFragment,s=t.HTMLTemplateElement,a=t.Node,l=t.Element,c=t.NodeFilter,h=t.NamedNodeMap,u=void 0===h?t.NamedNodeMap||t.MozNamedAttrMap:h,d=t.HTMLFormElement,p=t.DOMParser,f=t.trustedTypes,m=l.prototype,g=Ho(m,"cloneNode"),y=Ho(m,"nextSibling"),v=Ho(m,"childNodes"),b=Ho(m,"parentNode");if("function"==typeof s){var w=i.createElement("template");w.content&&w.content.ownerDocument&&(i=w.content.ownerDocument)}var x=ps(f,n),k=x?x.createHTML(""):"",S=i,_=S.implementation,C=S.createNodeIterator,T=S.createDocumentFragment,M=S.getElementsByTagName,A=n.importNode,E={};try{E=$o(i).documentMode?i.documentMode:{}}catch(Ue){}var O={};r.isSupported="function"==typeof b&&_&&void 0!==_.createHTMLDocument&&9!==E;var N=ns,R=is,D=os,z=ss,I=ls,B=cs,L=as,P=null,F=Vo({},[].concat(us(Wo),us(Go),us(Jo),us(Yo),us(Zo))),q=null,U=Vo({},[].concat(us(Qo),us(es),us(ts),us(rs))),j=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),V=null,$=null,H=!0,W=!0,G=!1,J=!1,K=!1,Y=!1,X=!1,Z=!1,Q=!1,ee=!1,te=!0,re=!0,ne=!1,ie={},oe=null,se=Vo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ae=null,le=Vo({},["audio","video","img","source","image","track"]),ce=null,he=Vo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ue="http://www.w3.org/1998/Math/MathML",de="http://www.w3.org/2000/svg",pe="http://www.w3.org/1999/xhtml",fe=pe,me=!1,ge=void 0,ye=["application/xhtml+xml","text/html"],ve="text/html",be=void 0,we=null,xe=i.createElement("form"),ke=function(e){return e instanceof RegExp||e instanceof Function},Se=function(e){we&&we===e||(e&&"object"===(void 0===e?"undefined":hs(e))||(e={}),e=$o(e),P="ALLOWED_TAGS"in e?Vo({},e.ALLOWED_TAGS):F,q="ALLOWED_ATTR"in e?Vo({},e.ALLOWED_ATTR):U,ce="ADD_URI_SAFE_ATTR"in e?Vo($o(he),e.ADD_URI_SAFE_ATTR):he,ae="ADD_DATA_URI_TAGS"in e?Vo($o(le),e.ADD_DATA_URI_TAGS):le,oe="FORBID_CONTENTS"in e?Vo({},e.FORBID_CONTENTS):se,V="FORBID_TAGS"in e?Vo({},e.FORBID_TAGS):{},$="FORBID_ATTR"in e?Vo({},e.FORBID_ATTR):{},ie="USE_PROFILES"in e&&e.USE_PROFILES,H=!1!==e.ALLOW_ARIA_ATTR,W=!1!==e.ALLOW_DATA_ATTR,G=e.ALLOW_UNKNOWN_PROTOCOLS||!1,J=e.SAFE_FOR_TEMPLATES||!1,K=e.WHOLE_DOCUMENT||!1,Z=e.RETURN_DOM||!1,Q=e.RETURN_DOM_FRAGMENT||!1,ee=e.RETURN_TRUSTED_TYPE||!1,X=e.FORCE_BODY||!1,te=!1!==e.SANITIZE_DOM,re=!1!==e.KEEP_CONTENT,ne=e.IN_PLACE||!1,L=e.ALLOWED_URI_REGEXP||L,fe=e.NAMESPACE||pe,e.CUSTOM_ELEMENT_HANDLING&&ke(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(j.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ke(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(j.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(j.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ge=ge=-1===ye.indexOf(e.PARSER_MEDIA_TYPE)?ve:e.PARSER_MEDIA_TYPE,be="application/xhtml+xml"===ge?function(e){return e}:Io,J&&(W=!1),Q&&(Z=!0),ie&&(P=Vo({},[].concat(us(Zo))),q=[],!0===ie.html&&(Vo(P,Wo),Vo(q,Qo)),!0===ie.svg&&(Vo(P,Go),Vo(q,es),Vo(q,rs)),!0===ie.svgFilters&&(Vo(P,Jo),Vo(q,es),Vo(q,rs)),!0===ie.mathMl&&(Vo(P,Yo),Vo(q,ts),Vo(q,rs))),e.ADD_TAGS&&(P===F&&(P=$o(P)),Vo(P,e.ADD_TAGS)),e.ADD_ATTR&&(q===U&&(q=$o(q)),Vo(q,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&Vo(ce,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(oe===se&&(oe=$o(oe)),Vo(oe,e.FORBID_CONTENTS)),re&&(P["#text"]=!0),K&&Vo(P,["html","head","body"]),P.table&&(Vo(P,["tbody"]),delete V.tbody),Co&&Co(e),we=e)},_e=Vo({},["mi","mo","mn","ms","mtext"]),Ce=Vo({},["foreignobject","desc","title","annotation-xml"]),Te=Vo({},Go);Vo(Te,Jo),Vo(Te,Ko);var Me=Vo({},Yo);Vo(Me,Xo);var Ae=function(e){var t=b(e);t&&t.tagName||(t={namespaceURI:pe,tagName:"template"});var r=Io(e.tagName),n=Io(t.tagName);if(e.namespaceURI===de)return t.namespaceURI===pe?"svg"===r:t.namespaceURI===ue?"svg"===r&&("annotation-xml"===n||_e[n]):Boolean(Te[r]);if(e.namespaceURI===ue)return t.namespaceURI===pe?"math"===r:t.namespaceURI===de?"math"===r&&Ce[n]:Boolean(Me[r]);if(e.namespaceURI===pe){if(t.namespaceURI===de&&!Ce[n])return!1;if(t.namespaceURI===ue&&!_e[n])return!1;var i=Vo({},["title","style","font","a","script"]);return!Me[r]&&(i[r]||!Te[r])}return!1},Ee=function(e){zo(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(Ue){try{e.outerHTML=k}catch(t){e.remove()}}},Oe=function(e,t){try{zo(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(Ue){zo(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!q[e])if(Z||Q)try{Ee(t)}catch(Ue){}else try{t.setAttribute(e,"")}catch(Ue){}},Ne=function(e){var t=void 0,r=void 0;if(X)e="<remove></remove>"+e;else{var n=Bo(e,/^[\r\n\t ]+/);r=n&&n[0]}"application/xhtml+xml"===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=x?x.createHTML(e):e;if(fe===pe)try{t=(new p).parseFromString(o,ge)}catch(Ue){}if(!t||!t.documentElement){t=_.createDocument(fe,"template",null);try{t.documentElement.innerHTML=me?"":o}catch(Ue){}}var s=t.body||t.documentElement;return e&&r&&s.insertBefore(i.createTextNode(r),s.childNodes[0]||null),fe===pe?M.call(t,K?"html":"body")[0]:K?t.documentElement:s},Re=function(e){return C.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},De=function(e){return e instanceof d&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},ze=function(e){return"object"===(void 0===a?"undefined":hs(a))?e instanceof a:e&&"object"===(void 0===e?"undefined":hs(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Ie=function(e,t,n){O[e]&&Ro(O[e],(function(e){e.call(r,t,n,we)}))},Be=function(e){var t=void 0;if(Ie("beforeSanitizeElements",e,null),De(e))return Ee(e),!0;if(Bo(e.nodeName,/[\u0080-\uFFFF]/))return Ee(e),!0;var n=be(e.nodeName);if(Ie("uponSanitizeElement",e,{tagName:n,allowedTags:P}),!ze(e.firstElementChild)&&(!ze(e.content)||!ze(e.content.firstElementChild))&&qo(/<[/\w]/g,e.innerHTML)&&qo(/<[/\w]/g,e.textContent))return Ee(e),!0;if("select"===n&&qo(/<template/i,e.innerHTML))return Ee(e),!0;if(!P[n]||V[n]){if(re&&!oe[n]){var i=b(e)||e.parentNode,o=v(e)||e.childNodes;if(o&&i)for(var s=o.length-1;s>=0;--s)i.insertBefore(g(o[s],!0),y(e))}if(!V[n]&&Pe(n)){if(j.tagNameCheck instanceof RegExp&&qo(j.tagNameCheck,n))return!1;if(j.tagNameCheck instanceof Function&&j.tagNameCheck(n))return!1}return Ee(e),!0}return e instanceof l&&!Ae(e)?(Ee(e),!0):"noscript"!==n&&"noembed"!==n||!qo(/<\/no(script|embed)/i,e.innerHTML)?(J&&3===e.nodeType&&(t=e.textContent,t=Lo(t,N," "),t=Lo(t,R," "),e.textContent!==t&&(zo(r.removed,{element:e.cloneNode()}),e.textContent=t)),Ie("afterSanitizeElements",e,null),!1):(Ee(e),!0)},Le=function(e,t,r){if(te&&("id"===t||"name"===t)&&(r in i||r in xe))return!1;if(W&&!$[t]&&qo(D,t));else if(H&&qo(z,t));else if(!q[t]||$[t]){if(!(Pe(e)&&(j.tagNameCheck instanceof RegExp&&qo(j.tagNameCheck,e)||j.tagNameCheck instanceof Function&&j.tagNameCheck(e))&&(j.attributeNameCheck instanceof RegExp&&qo(j.attributeNameCheck,t)||j.attributeNameCheck instanceof Function&&j.attributeNameCheck(t))||"is"===t&&j.allowCustomizedBuiltInElements&&(j.tagNameCheck instanceof RegExp&&qo(j.tagNameCheck,r)||j.tagNameCheck instanceof Function&&j.tagNameCheck(r))))return!1}else if(ce[t]);else if(qo(L,Lo(r,B,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Po(r,"data:")||!ae[e]){if(G&&!qo(I,Lo(r,B,"")));else if(r)return!1}else;return!0},Pe=function(e){return e.indexOf("-")>0},Fe=function(e){var t=void 0,n=void 0,i=void 0,o=void 0;Ie("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q};for(o=s.length;o--;){var l=t=s[o],c=l.name,h=l.namespaceURI;if(n=Fo(t.value),i=be(c),a.attrName=i,a.attrValue=n,a.keepAttr=!0,a.forceKeepAttr=void 0,Ie("uponSanitizeAttribute",e,a),n=a.attrValue,!a.forceKeepAttr&&(Oe(c,e),a.keepAttr))if(qo(/\/>/i,n))Oe(c,e);else{J&&(n=Lo(n,N," "),n=Lo(n,R," "));var u=be(e.nodeName);if(Le(u,i,n))try{h?e.setAttributeNS(h,c,n):e.setAttribute(c,n),Do(r.removed)}catch(Ue){}}}Ie("afterSanitizeAttributes",e,null)}},qe=function e(t){var r=void 0,n=Re(t);for(Ie("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)Ie("uponSanitizeShadowNode",r,null),Be(r)||(r.content instanceof o&&e(r.content),Fe(r));Ie("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(e,i){var s=void 0,l=void 0,c=void 0,h=void 0,u=void 0;if((me=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ze(e)){if("function"!=typeof e.toString)throw Uo("toString is not a function");if("string"!=typeof(e=e.toString()))throw Uo("dirty is not a string, aborting")}if(!r.isSupported){if("object"===hs(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(ze(e))return t.toStaticHTML(e.outerHTML)}return e}if(Y||Se(i),r.removed=[],"string"==typeof e&&(ne=!1),ne){if(e.nodeName){var d=be(e.nodeName);if(!P[d]||V[d])throw Uo("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof a)1===(l=(s=Ne("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?s=l:s.appendChild(l);else{if(!Z&&!J&&!K&&-1===e.indexOf("<"))return x&&ee?x.createHTML(e):e;if(!(s=Ne(e)))return Z?null:ee?k:""}s&&X&&Ee(s.firstChild);for(var p=Re(ne?e:s);c=p.nextNode();)3===c.nodeType&&c===h||Be(c)||(c.content instanceof o&&qe(c.content),Fe(c),h=c);if(h=null,ne)return e;if(Z){if(Q)for(u=T.call(s.ownerDocument);s.firstChild;)u.appendChild(s.firstChild);else u=s;return q.shadowroot&&(u=A.call(n,u,!0)),u}var f=K?s.outerHTML:s.innerHTML;return J&&(f=Lo(f,N," "),f=Lo(f,R," ")),x&&ee?x.createHTML(f):f},r.setConfig=function(e){Se(e),Y=!0},r.clearConfig=function(){we=null,Y=!1},r.isValidAttribute=function(e,t,r){we||Se({});var n=be(e),i=be(t);return Le(n,i,r)},r.addHook=function(e,t){"function"==typeof t&&(O[e]=O[e]||[],zo(O[e],t))},r.removeHook=function(e){O[e]&&Do(O[e])},r.removeHooks=function(e){O[e]&&(O[e]=[])},r.removeAllHooks=function(){O={}},r}();function ms(e){this.content=e}ms.prototype={constructor:ms,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,r){var n=r&&r!=e?this.remove(r):this,i=n.find(e),o=n.content.slice();return-1==i?o.push(r||e,t):(o[i+1]=t,r&&(o[i]=r)),new ms(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var r=this.content.slice();return r.splice(t,2),new ms(r)},addToStart:function(e,t){return new ms([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new ms(r)},addBefore:function(e,t,r){var n=this.remove(t),i=n.content.slice(),o=n.find(e);return i.splice(-1==o?i.length:o,0,t,r),new ms(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=ms.from(e)).size?new ms(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=ms.from(e)).size?new ms(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=ms.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},get size(){return this.content.length>>1}},ms.from=function(e){if(e instanceof ms)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new ms(t)};var gs=ms;function ys(e,t,r){for(var n=0;;n++){if(n==e.childCount||n==t.childCount)return e.childCount==t.childCount?null:r;var i=e.child(n),o=t.child(n);if(i!=o){if(!i.sameMarkup(o))return r;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)r++;return r}if(i.content.size||o.content.size){var a=ys(i.content,o.content,r+1);if(null!=a)return a}r+=i.nodeSize}else r+=i.nodeSize}}function vs(e,t,r,n){for(var i=e.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:r,b:n};var s=e.child(--i),a=t.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:r,b:n};if(s.isText&&s.text!=a.text){for(var c=0,h=Math.min(s.text.length,a.text.length);c<h&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,r--,n--;return{a:r,b:n}}if(s.content.size||a.content.size){var u=vs(s.content,a.content,r-1,n-1);if(u)return u}r-=l,n-=l}else r-=l,n-=l}}var bs=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var r=0;r<e.length;r++)this.size+=e[r].nodeSize},ws={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};bs.prototype.nodesBetween=function(e,t,r,n,i){void 0===n&&(n=0);for(var o=0,s=0;s<t;o++){var a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==r(a,n+s,i,o)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),r,n+c)}s=l}},bs.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},bs.prototype.textBetween=function(e,t,r,n){var i="",o=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(i+=s.text.slice(Math.max(e,a)-a,t-a),o=!r):s.isLeaf&&n?(i+="function"==typeof n?n(s):n,o=!r):!o&&s.isBlock&&(i+=r,o=!0)}),0),i},bs.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,r=e.firstChild,n=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(n[n.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)n.push(e.content[i]);return new bs(n,this.size+e.size)},bs.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var r=[],n=0;if(t>e)for(var i=0,o=0;o<t;i++){var s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),r.push(s),n+=s.nodeSize),o=a}return new bs(r,n)},bs.prototype.cutByIndex=function(e,t){return e==t?bs.empty:0==e&&t==this.content.length?this:new bs(this.content.slice(e,t))},bs.prototype.replaceChild=function(e,t){var r=this.content[e];if(r==t)return this;var n=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return n[e]=t,new bs(n,i)},bs.prototype.addToStart=function(e){return new bs([e].concat(this.content),this.size+e.nodeSize)},bs.prototype.addToEnd=function(e){return new bs(this.content.concat(e),this.size+e.nodeSize)},bs.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},ws.firstChild.get=function(){return this.content.length?this.content[0]:null},ws.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},ws.childCount.get=function(){return this.content.length},bs.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},bs.prototype.maybeChild=function(e){return this.content[e]},bs.prototype.forEach=function(e){for(var t=0,r=0;t<this.content.length;t++){var n=this.content[t];e(n,r,t),r+=n.nodeSize}},bs.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),ys(this,e,t)},bs.prototype.findDiffEnd=function(e,t,r){return void 0===t&&(t=this.size),void 0===r&&(r=e.size),vs(this,e,t,r)},bs.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return ks(0,e);if(e==this.size)return ks(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var r=0,n=0;;r++){var i=n+this.child(r).nodeSize;if(i>=e)return i==e||t>0?ks(r+1,i):ks(r,n);n=i}},bs.prototype.toString=function(){return"<"+this.toStringInner()+">"},bs.prototype.toStringInner=function(){return this.content.join(", ")},bs.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},bs.fromJSON=function(e,t){if(!t)return bs.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new bs(t.map(e.nodeFromJSON))},bs.fromArray=function(e){if(!e.length)return bs.empty;for(var t,r=0,n=0;n<e.length;n++){var i=e[n];r+=i.nodeSize,n&&i.isText&&e[n-1].sameMarkup(i)?(t||(t=e.slice(0,n)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new bs(t||e,r)},bs.from=function(e){if(!e)return bs.empty;if(e instanceof bs)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new bs([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(bs.prototype,ws);var xs={index:0,offset:0};function ks(e,t){return xs.index=e,xs.offset=t,xs}function Ss(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!Ss(e[n],t[n]))return!1}else{for(var i in e)if(!(i in t)||!Ss(e[i],t[i]))return!1;for(var o in t)if(!(o in e))return!1}return!0}bs.empty=new bs([],0);var _s=function(e,t){this.type=e,this.attrs=t};function Cs(e){var t=Error.call(this,e);return t.__proto__=Cs.prototype,t}_s.prototype.addToSet=function(e){for(var t,r=!1,n=0;n<e.length;n++){var i=e[n];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,n));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,n)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t},_s.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},_s.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},_s.prototype.eq=function(e){return this==e||this.type==e.type&&Ss(this.attrs,e.attrs)},_s.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},_s.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var r=e.marks[t.type];if(!r)throw new RangeError("There is no mark type "+t.type+" in this schema");return r.create(t.attrs)},_s.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0},_s.setFrom=function(e){if(!e||0==e.length)return _s.none;if(e instanceof _s)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},_s.none=[],Cs.prototype=Object.create(Error.prototype),Cs.prototype.constructor=Cs,Cs.prototype.name="ReplaceError";var Ts=function(e,t,r){this.content=e,this.openStart=t,this.openEnd=r},Ms={size:{configurable:!0}};function As(e,t,r){var n=e.findIndex(t),i=n.index,o=n.offset,s=e.maybeChild(i),a=e.findIndex(r),l=a.index,c=a.offset;if(o==t||s.isText){if(c!=r&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(r))}if(i!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(i,s.copy(As(s.content,t-o-1,r-o-1)))}function Es(e,t,r,n){var i=e.findIndex(t),o=i.index,s=i.offset,a=e.maybeChild(o);if(s==t||a.isText)return n&&!n.canReplace(o,o,r)?null:e.cut(0,t).append(r).append(e.cut(t));var l=Es(a.content,t-s-1,r);return l&&e.replaceChild(o,a.copy(l))}function Os(e,t,r){if(r.openStart>e.depth)throw new Cs("Inserted content deeper than insertion position");if(e.depth-r.openStart!=t.depth-r.openEnd)throw new Cs("Inconsistent open depths");return Ns(e,t,r,0)}function Ns(e,t,r,n){var i=e.index(n),o=e.node(n);if(i==t.index(n)&&n<e.depth-r.openStart){var s=Ns(e,t,r,n+1);return o.copy(o.content.replaceChild(i,s))}if(r.content.size){if(r.openStart||r.openEnd||e.depth!=n||t.depth!=n){var a=function(e,t){for(var r=t.depth-e.openStart,n=t.node(r).copy(e.content),i=r-1;i>=0;i--)n=t.node(i).copy(bs.from(n));return{start:n.resolveNoCache(e.openStart+r),end:n.resolveNoCache(n.content.size-e.openEnd-r)}}(r,e);return Bs(o,Ls(e,a.start,a.end,t,n))}var l=e.parent,c=l.content;return Bs(l,c.cut(0,e.parentOffset).append(r.content).append(c.cut(t.parentOffset)))}return Bs(o,Ps(e,t,n))}function Rs(e,t){if(!t.type.compatibleContent(e.type))throw new Cs("Cannot join "+t.type.name+" onto "+e.type.name)}function Ds(e,t,r){var n=e.node(r);return Rs(n,t.node(r)),n}function zs(e,t){var r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function Is(e,t,r,n){var i=(t||e).node(r),o=0,s=t?t.index(r):i.childCount;e&&(o=e.index(r),e.depth>r?o++:e.textOffset&&(zs(e.nodeAfter,n),o++));for(var a=o;a<s;a++)zs(i.child(a),n);t&&t.depth==r&&t.textOffset&&zs(t.nodeBefore,n)}function Bs(e,t){if(!e.type.validContent(t))throw new Cs("Invalid content for node "+e.type.name);return e.copy(t)}function Ls(e,t,r,n,i){var o=e.depth>i&&Ds(e,t,i+1),s=n.depth>i&&Ds(r,n,i+1),a=[];return Is(null,e,i,a),o&&s&&t.index(i)==r.index(i)?(Rs(o,s),zs(Bs(o,Ls(e,t,r,n,i+1)),a)):(o&&zs(Bs(o,Ps(e,t,i+1)),a),Is(t,r,i,a),s&&zs(Bs(s,Ps(r,n,i+1)),a)),Is(n,null,i,a),new bs(a)}function Ps(e,t,r){var n=[];(Is(null,e,r,n),e.depth>r)&&zs(Bs(Ds(e,t,r+1),Ps(e,t,r+1)),n);return Is(t,null,r,n),new bs(n)}Ms.size.get=function(){return this.content.size-this.openStart-this.openEnd},Ts.prototype.insertAt=function(e,t){var r=Es(this.content,e+this.openStart,t,null);return r&&new Ts(r,this.openStart,this.openEnd)},Ts.prototype.removeBetween=function(e,t){return new Ts(As(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},Ts.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},Ts.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Ts.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},Ts.fromJSON=function(e,t){if(!t)return Ts.empty;var r=t.openStart||0,n=t.openEnd||0;if("number"!=typeof r||"number"!=typeof n)throw new RangeError("Invalid input for Slice.fromJSON");return new Ts(bs.fromJSON(e,t.content),r,n)},Ts.maxOpen=function(e,t){void 0===t&&(t=!0);for(var r=0,n=0,i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(var o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)n++;return new Ts(e,r,n)},Object.defineProperties(Ts.prototype,Ms),Ts.empty=new Ts(bs.empty,0,0);var Fs=function(e,t,r){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=r},qs={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Fs.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},qs.parent.get=function(){return this.node(this.depth)},qs.doc.get=function(){return this.node(0)},Fs.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},Fs.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},Fs.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},Fs.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},Fs.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},Fs.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},Fs.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},qs.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},qs.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var r=this.pos-this.path[this.path.length-1],n=e.child(t);return r?e.child(t).cut(r):n},qs.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},Fs.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var r=this.path[3*t],n=0==t?0:this.path[3*t-1]+1,i=0;i<e;i++)n+=r.child(i).nodeSize;return n},Fs.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return _s.none;if(this.textOffset)return e.child(t).marks;var r=e.maybeChild(t-1),n=e.maybeChild(t);if(!r){var i=r;r=n,n=i}for(var o=r.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||n&&o[s].isInSet(n.marks)||(o=o[s--].removeFromSet(o));return o},Fs.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var r=t.marks,n=e.parent.maybeChild(e.index()),i=0;i<r.length;i++)!1!==r[i].type.spec.inclusive||n&&r[i].isInSet(n.marks)||(r=r[i--].removeFromSet(r));return r},Fs.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},Fs.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new $s(this,e,r)},Fs.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},Fs.prototype.max=function(e){return e.pos>this.pos?e:this},Fs.prototype.min=function(e){return e.pos<this.pos?e:this},Fs.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},Fs.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var r=[],n=0,i=t,o=e;;){var s=o.content.findIndex(i),a=s.index,l=s.offset,c=i-l;if(r.push(o,a,n+l),!c)break;if((o=o.child(a)).isText)break;i=c-1,n+=l+1}return new Fs(t,r,i)},Fs.resolveCached=function(e,t){for(var r=0;r<Us.length;r++){var n=Us[r];if(n.pos==t&&n.doc==e)return n}var i=Us[js]=Fs.resolve(e,t);return js=(js+1)%Vs,i},Object.defineProperties(Fs.prototype,qs);var Us=[],js=0,Vs=12,$s=function(e,t,r){this.$from=e,this.$to=t,this.depth=r},Hs={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Hs.start.get=function(){return this.$from.before(this.depth+1)},Hs.end.get=function(){return this.$to.after(this.depth+1)},Hs.parent.get=function(){return this.$from.node(this.depth)},Hs.startIndex.get=function(){return this.$from.index(this.depth)},Hs.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties($s.prototype,Hs);var Ws=Object.create(null),Gs=function(e,t,r,n){this.type=e,this.attrs=t,this.content=r||bs.empty,this.marks=n||_s.none},Js={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Js.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Js.childCount.get=function(){return this.content.childCount},Gs.prototype.child=function(e){return this.content.child(e)},Gs.prototype.maybeChild=function(e){return this.content.maybeChild(e)},Gs.prototype.forEach=function(e){this.content.forEach(e)},Gs.prototype.nodesBetween=function(e,t,r,n){void 0===n&&(n=0),this.content.nodesBetween(e,t,r,n,this)},Gs.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},Js.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Gs.prototype.textBetween=function(e,t,r,n){return this.content.textBetween(e,t,r,n)},Js.firstChild.get=function(){return this.content.firstChild},Js.lastChild.get=function(){return this.content.lastChild},Gs.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},Gs.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},Gs.prototype.hasMarkup=function(e,t,r){return this.type==e&&Ss(this.attrs,t||e.defaultAttrs||Ws)&&_s.sameSet(this.marks,r||_s.none)},Gs.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},Gs.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},Gs.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},Gs.prototype.slice=function(e,t,r){if(void 0===t&&(t=this.content.size),void 0===r&&(r=!1),e==t)return Ts.empty;var n=this.resolve(e),i=this.resolve(t),o=r?0:n.sharedDepth(t),s=n.start(o),a=n.node(o).content.cut(n.pos-s,i.pos-s);return new Ts(a,n.depth-o,i.depth-o)},Gs.prototype.replace=function(e,t,r){return Os(this.resolve(e),this.resolve(t),r)},Gs.prototype.nodeAt=function(e){for(var t=this;;){var r=t.content.findIndex(e),n=r.index,i=r.offset;if(!(t=t.maybeChild(n)))return null;if(i==e||t.isText)return t;e-=i+1}},Gs.prototype.childAfter=function(e){var t=this.content.findIndex(e),r=t.index,n=t.offset;return{node:this.content.maybeChild(r),index:r,offset:n}},Gs.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),r=t.index,n=t.offset;if(n<e)return{node:this.content.child(r),index:r,offset:n};var i=this.content.child(r-1);return{node:i,index:r-1,offset:n-i.nodeSize}},Gs.prototype.resolve=function(e){return Fs.resolveCached(this,e)},Gs.prototype.resolveNoCache=function(e){return Fs.resolve(this,e)},Gs.prototype.rangeHasMark=function(e,t,r){var n=!1;return t>e&&this.nodesBetween(e,t,(function(e){return r.isInSet(e.marks)&&(n=!0),!n})),n},Js.isBlock.get=function(){return this.type.isBlock},Js.isTextblock.get=function(){return this.type.isTextblock},Js.inlineContent.get=function(){return this.type.inlineContent},Js.isInline.get=function(){return this.type.isInline},Js.isText.get=function(){return this.type.isText},Js.isLeaf.get=function(){return this.type.isLeaf},Js.isAtom.get=function(){return this.type.isAtom},Gs.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Ys(this.marks,e)},Gs.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},Gs.prototype.canReplace=function(e,t,r,n,i){void 0===r&&(r=bs.empty),void 0===n&&(n=0),void 0===i&&(i=r.childCount);var o=this.contentMatchAt(e).matchFragment(r,n,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var a=n;a<i;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0},Gs.prototype.canReplaceWith=function(e,t,r,n){if(n&&!this.type.allowsMarks(n))return!1;var i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd},Gs.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},Gs.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=_s.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!_s.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},Gs.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},Gs.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}var n=bs.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,n,r)},Object.defineProperties(Gs.prototype,Js);var Ks=function(e){function t(t,r,n,i){if(e.call(this,t,r,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ys(this.marks,JSON.stringify(this.text))},r.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},r.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,r),t}(Gs);function Ys(e,t){for(var r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}var Xs=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},Zs={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Xs.parse=function(e,t){var r=new Qs(e,t);if(null==r.next)return Xs.empty;var n=ta(r);r.next&&r.err("Unexpected trailing text");var i=function(e){var t=Object.create(null);return r(aa(e,0));function r(n){var i=[];n.forEach((function(t){e[t].forEach((function(t){var r=t.term,n=t.to;if(r){var o=i.indexOf(r),s=o>-1&&i[o+1];aa(e,n).forEach((function(e){s||i.push(r,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var o=t[n.join(",")]=new Xs(n.indexOf(e.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(sa);o.next.push(i[s],t[a.join(",")]||r(a))}return o}}(function(e){var t=[[]];return i(o(e,0),r()),t;function r(){return t.push([])-1}function n(e,r,n){var i={term:n,to:r};return t[e].push(i),i}function i(e,t){e.forEach((function(e){return e.to=t}))}function o(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,r){return e.concat(o(r,t))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=o(e.exprs[s],t);if(s==e.exprs.length-1)return a;i(a,t=r())}else{if("star"==e.type){var l=r();return n(t,l),i(o(e.expr,l),l),[n(l)]}if("plus"==e.type){var c=r();return i(o(e.expr,t),c),i(o(e.expr,c),c),[n(c)]}if("opt"==e.type)return[n(t)].concat(o(e.expr,t));if("range"==e.type){for(var h=t,u=0;u<e.min;u++){var d=r();i(o(e.expr,h),d),h=d}if(-1==e.max)i(o(e.expr,h),h);else for(var p=e.min;p<e.max;p++){var f=r();n(h,f),i(o(e.expr,h),f),h=f}return[n(h)]}if("name"==e.type)return[n(t,null,e.value)]}}}(n));return function(e,t){for(var r=0,n=[e];r<n.length;r++){for(var i=n[r],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var l=i.next[a],c=i.next[a+1];s.push(l.name),!o||l.isText||l.hasRequiredAttrs()||(o=!1),-1==n.indexOf(c)&&n.push(c)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,r),i},Xs.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},Xs.prototype.matchFragment=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.childCount);for(var n=this,i=t;n&&i<r;i++)n=n.matchType(e.child(i).type);return n},Zs.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},Zs.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},Xs.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var r=0;r<e.next.length;r+=2)if(this.next[t]==e.next[r])return!0;return!1},Xs.prototype.fillBefore=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=0);var n=[this];return function i(o,s){var a=o.matchFragment(e,r);if(a&&(!t||a.validEnd))return bs.from(s.map((function(e){return e.createAndFill()})));for(var l=0;l<o.next.length;l+=2){var c=o.next[l],h=o.next[l+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==n.indexOf(h)){n.push(h);var u=i(h,s.concat(c));if(u)return u}}}(this,[])},Xs.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var r=this.computeWrapping(e);return this.wrapCache.push(e,r),r},Xs.prototype.computeWrapping=function(e){for(var t=Object.create(null),r=[{match:this,type:null,via:null}];r.length;){var n=r.shift(),i=n.match;if(i.matchType(e)){for(var o=[],s=n;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var l=i.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in t||n.type&&!i.next[a+1].validEnd||(r.push({match:l.contentMatch,type:l,via:n}),t[l.name]=!0)}}},Zs.edgeCount.get=function(){return this.next.length>>1},Xs.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},Xs.prototype.toString=function(){var e=[];return function t(r){e.push(r);for(var n=1;n<r.next.length;n+=2)-1==e.indexOf(r.next[n])&&t(r.next[n])}(this),e.map((function(t,r){for(var n=r+(t.validEnd?"*":" ")+" ",i=0;i<t.next.length;i+=2)n+=(i?", ":"")+t.next[i].name+"->"+e.indexOf(t.next[i+1]);return n})).join("\n")},Object.defineProperties(Xs.prototype,Zs),Xs.empty=new Xs(!0);var Qs=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},ea={next:{configurable:!0}};function ta(e){var t=[];do{t.push(ra(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function ra(e){var t=[];do{t.push(na(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function na(e){for(var t=function(e){if(e.eat("(")){var t=ta(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var r=function(e,t){var r=e.nodeTypes,n=r[t];if(n)return[n];var i=[];for(var o in r){var s=r[o];s.groups.indexOf(t)>-1&&i.push(s)}0==i.length&&e.err("No node type or group '"+t+"' found");return i}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==r.length?r[0]:{type:"choice",exprs:r}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=oa(e,t)}return t}function ia(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function oa(e,t){var r=ia(e),n=r;return e.eat(",")&&(n="}"!=e.next?ia(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}function sa(e,t){return t-e}function aa(e,t){var r=[];return function t(n){var i=e[n];if(1==i.length&&!i[0].term)return t(i[0].to);r.push(n);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,l=s.to;a||-1!=r.indexOf(l)||t(l)}}(t),r.sort(sa)}function la(e){var t=Object.create(null);for(var r in e){var n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function ca(e,t){var r=Object.create(null);for(var n in e){var i=t&&t[n];if(void 0===i){var o=e[n];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+n);i=o.default}r[n]=i}return r}function ha(e){var t=Object.create(null);if(e)for(var r in e)t[r]=new pa(e[r]);return t}ea.next.get=function(){return this.tokens[this.pos]},Qs.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},Qs.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(Qs.prototype,ea);var ua=function(e,t,r){this.name=e,this.schema=t,this.spec=r,this.groups=r.group?r.group.split(" "):[],this.attrs=ha(r.attrs),this.defaultAttrs=la(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e},da={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0},whitespace:{configurable:!0}};da.isInline.get=function(){return!this.isBlock},da.isTextblock.get=function(){return this.isBlock&&this.inlineContent},da.isLeaf.get=function(){return this.contentMatch==Xs.empty},da.isAtom.get=function(){return this.isLeaf||this.spec.atom},da.whitespace.get=function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")},ua.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},ua.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},ua.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:ca(this.attrs,e)},ua.prototype.create=function(e,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Gs(this,this.computeAttrs(e),bs.from(t),_s.setFrom(r))},ua.prototype.createChecked=function(e,t,r){if(t=bs.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new Gs(this,this.computeAttrs(e),t,_s.setFrom(r))},ua.prototype.createAndFill=function(e,t,r){if(e=this.computeAttrs(e),(t=bs.from(t)).size){var n=this.contentMatch.fillBefore(t);if(!n)return null;t=n.append(t)}var i=this.contentMatch.matchFragment(t).fillBefore(bs.empty,!0);return i?new Gs(this,e,t.append(i),_s.setFrom(r)):null},ua.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0},ua.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},ua.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},ua.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:_s.empty:e},ua.compile=function(e,t){var r=Object.create(null);e.forEach((function(e,n){return r[e]=new ua(e,t,n)}));var n=t.spec.topNode||"doc";if(!r[n])throw new RangeError("Schema is missing its top node type ('"+n+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r},Object.defineProperties(ua.prototype,da);var pa=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},fa={isRequired:{configurable:!0}};fa.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(pa.prototype,fa);var ma=function(e,t,r,n){this.name=e,this.schema=r,this.spec=n,this.attrs=ha(n.attrs),this.rank=t,this.excluded=null;var i=la(this.attrs);this.instance=i&&new _s(this,i)};ma.prototype.create=function(e){return!e&&this.instance?this.instance:new _s(this,ca(this.attrs,e))},ma.compile=function(e,t){var r=Object.create(null),n=0;return e.forEach((function(e,i){return r[e]=new ma(e,n++,t,i)})),r},ma.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},ma.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},ma.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var ga=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=gs.from(e.nodes),this.spec.marks=gs.from(e.marks),this.nodes=ua.compile(this.spec.nodes,this),this.marks=ma.compile(this.spec.marks,this);var r=Object.create(null);for(var n in this.nodes){if(n in this.marks)throw new RangeError(n+" can not be both a node and a mark");var i=this.nodes[n],o=i.spec.content||"",s=i.spec.marks;i.contentMatch=r[o]||(r[o]=Xs.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==s?null:s?ya(this,s.split(" ")):""!=s&&i.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],c=l.spec.excludes;l.excluded=null==c?[l]:""==c?[]:ya(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ya(e,t){for(var r=[],n=0;n<t.length;n++){var i=t[n],o=e.marks[i],s=o;if(o)r.push(o);else for(var a in e.marks){var l=e.marks[a];("_"==i||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&r.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}ga.prototype.node=function(e,t,r,n){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof ua))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,r,n)},ga.prototype.text=function(e,t){var r=this.nodes.text;return new Ks(r,r.defaultAttrs,e,_s.setFrom(t))},ga.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},ga.prototype.nodeFromJSON=function(e){return Gs.fromJSON(this,e)},ga.prototype.markFromJSON=function(e){return _s.fromJSON(this,e)},ga.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var va=function(e,t){var r=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?r.tags.push(e):e.style&&r.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var r=e.nodes[t.node];return r.contentMatch.matchType(r)}))};va.prototype.parse=function(e,t){void 0===t&&(t={});var r=new _a(this,t,!1);return r.addAll(e,null,t.from,t.to),r.finish()},va.prototype.parseSlice=function(e,t){void 0===t&&(t={});var r=new _a(this,t,!0);return r.addAll(e,null,t.from,t.to),Ts.maxOpen(r.finish())},va.prototype.matchTag=function(e,t,r){for(var n=r?this.tags.indexOf(r)+1:0;n<this.tags.length;n++){var i=this.tags[n];if(Ta(e,i.tag)&&(void 0===i.namespace||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){var o=i.getAttrs(e);if(!1===o)continue;i.attrs=o}return i}}},va.prototype.matchStyle=function(e,t,r,n){for(var i=n?this.styles.indexOf(n)+1:0;i<this.styles.length;i++){var o=this.styles[i];if(!(0!=o.style.indexOf(e)||o.context&&!r.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var s=o.getAttrs(t);if(!1===s)continue;o.attrs=s}return o}}},va.schemaRules=function(e){var t=[];function r(e){for(var r=null==e.priority?50:e.priority,n=0;n<t.length;n++){var i=t[n];if((null==i.priority?50:i.priority)<r)break}t.splice(n,0,e)}var n=function(t){var n=e.marks[t].spec.parseDOM;n&&n.forEach((function(e){r(e=Ma(e)),e.mark=t}))};for(var i in e.marks)n(i);var o;for(var s in e.nodes)o=void 0,(o=e.nodes[s].spec.parseDOM)&&o.forEach((function(e){r(e=Ma(e)),e.node=s}));return t},va.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new va(e,va.schemaRules(e)))};var ba={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wa={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},xa={ol:!0,ul:!0};function ka(e,t,r){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&r}var Sa=function(e,t,r,n,i,o,s){this.type=e,this.attrs=t,this.solid=i,this.match=o||(4&s?null:e.contentMatch),this.options=s,this.content=[],this.marks=r,this.activeMarks=_s.none,this.pendingMarks=n,this.stashMarks=[]};Sa.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(bs.from(e));if(!t){var r,n=this.type.contentMatch;return(r=n.findWrapping(e.type))?(this.match=n,r):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},Sa.prototype.finish=function(e){if(!(1&this.options)){var t,r=this.content[this.content.length-1];r&&r.isText&&(t=/[ \t\r\n\u000c]+$/.exec(r.text))&&(r.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-t[0].length)))}var n=bs.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(bs.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n},Sa.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},Sa.prototype.applyPending=function(e){for(var t=0,r=this.pendingMarks;t<r.length;t++){var n=r[t];(this.type?this.type.allowsMarkType(n.type):Aa(n.type,e))&&!n.isInSet(this.activeMarks)&&(this.activeMarks=n.addToSet(this.activeMarks),this.pendingMarks=n.removeFromSet(this.pendingMarks))}},Sa.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ba.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var _a=function(e,t,r){this.parser=e,this.options=t,this.isOpen=r;var n,i=t.topNode,o=ka(null,t.preserveWhitespace,0)|(r?4:0);n=i?new Sa(i.type,i.attrs,_s.none,_s.none,!0,t.topMatch||i.type.contentMatch,o):new Sa(r?null:e.schema.topNodeType,null,_s.none,_s.none,!0,null,o),this.nodes=[n],this.open=0,this.find=t.findPositions,this.needsBlock=!1},Ca={top:{configurable:!0},currentPos:{configurable:!0}};function Ta(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Ma(e){var t={};for(var r in e)t[r]=e[r];return t}function Aa(e,t){var r=t.schema.nodes,n=function(n){var i=r[n];if(i.allowsMarkType(e)){var o=[],s=function(e){o.push(e);for(var r=0;r<e.edgeCount;r++){var n=e.edge(r),i=n.type,a=n.next;if(i==t)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(i.contentMatch)?{v:!0}:void 0}};for(var i in r){var o=n(i);if(o)return o.v}}Ca.top.get=function(){return this.nodes[this.open]},_a.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),r=t?this.readStyles(function(e){var t,r=/\s*([\w-]+)\s*:\s*([^;]+)/g,n=[];for(;t=r.exec(e);)n.push(t[1],t[2].trim());return n}(t)):null,n=this.top;if(null!=r)for(var i=0;i<r.length;i++)this.addPendingMark(r[i]);if(this.addElement(e),null!=r)for(var o=0;o<r.length;o++)this.removePendingMark(r[o],n)}},_a.prototype.addTextNode=function(e){var t=e.nodeValue,r=this.top;if(2&r.options||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&r.options)t=2&r.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var n=r.content[r.content.length-1],i=e.previousSibling;(!n||i&&"BR"==i.nodeName||n.isText&&/[ \t\r\n\u000c]$/.test(n.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},_a.prototype.addElement=function(e,t){var r,n=e.nodeName.toLowerCase();xa.hasOwnProperty(n)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,r=null;t;t=t.nextSibling){var n=1==t.nodeType?t.nodeName.toLowerCase():null;n&&xa.hasOwnProperty(n)&&r?(r.appendChild(t),t=r):"li"==n?r=t:n&&(r=null)}}(e);var i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(r=this.parser.matchTag(e,this,t));if(i?i.ignore:wa.hasOwnProperty(n))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);var o,s=this.top,a=this.needsBlock;if(ba.hasOwnProperty(n))o=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,i,!1===i.consuming?r:null)},_a.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},_a.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},_a.prototype.readStyles=function(e){var t=_s.none;e:for(var r=0;r<e.length;r+=2)for(var n=null;;){var i=this.parser.matchStyle(e[r],e[r+1],this,n);if(!i)continue e;if(i.ignore)return null;if(t=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(t),!1!==i.consuming)break;n=i}return t},_a.prototype.addElementByRule=function(e,t,r){var n,i,o,s=this;t.node?(i=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(i.create(t.attrs))||this.leafFallback(e):n=this.enter(i,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return s.insertNode(e)}));else{var l=t.contentElement;"string"==typeof l?l=e.querySelector(l):"function"==typeof l&&(l=l(e)),l||(l=e),this.findAround(e,l,!0),this.addAll(l,n)}n&&(this.sync(a),this.open--),o&&this.removePendingMark(o,a)},_a.prototype.addAll=function(e,t,r,n){for(var i=r||0,o=r?e.childNodes[r]:e.firstChild,s=null==n?null:e.childNodes[n];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o),t&&ba.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,i)},_a.prototype.findPlace=function(e){for(var t,r,n=this.open;n>=0;n--){var i=this.nodes[n],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=i,!o.length))break;if(i.solid)break}if(!t)return!1;this.sync(r);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},_a.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var r=this.top;r.applyPending(e.type),r.match&&(r.match=r.match.matchType(e.type));for(var n=r.activeMarks,i=0;i<e.marks.length;i++)r.type&&!r.type.allowsMarkType(e.marks[i].type)||(n=e.marks[i].addToSet(n));return r.content.push(e.mark(n)),!0}return!1},_a.prototype.enter=function(e,t,r){var n=this.findPlace(e.create(t));return n&&this.enterInner(e,t,!0,r),n},_a.prototype.enterInner=function(e,t,r,n){this.closeExtra();var i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e,t);var o=ka(e,n,i.options);4&i.options&&0==i.content.length&&(o|=4),this.nodes.push(new Sa(e,t,i.activeMarks,i.pendingMarks,r,null,o)),this.open++},_a.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},_a.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},_a.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},Ca.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var r=this.nodes[t].content,n=r.length-1;n>=0;n--)e+=r[n].nodeSize;t&&e++}return e},_a.prototype.findAtPoint=function(e,t){if(this.find)for(var r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)},_a.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},_a.prototype.findAround=function(e,t,r){if(e!=t&&this.find)for(var n=0;n<this.find.length;n++){if(null==this.find[n].pos&&1==e.nodeType&&e.contains(this.find[n].node))t.compareDocumentPosition(this.find[n].node)&(r?2:4)&&(this.find[n].pos=this.currentPos)}},_a.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},_a.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var r=e.split("/"),n=this.options.context,i=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),o=-(n?n.depth+1:0)+(i?0:1),s=function(e,a){for(;e>=0;e--){var l=r[e];if(""==l){if(e==r.length-1||0==e)continue;for(;a>=o;a--)if(s(e-1,a))return!0;return!1}var c=a>0||0==a&&i?t.nodes[a].type:n&&a>=o?n.node(a-o).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(r.length-1,this.open)},_a.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(var n in this.parser.schema.nodes){var i=this.parser.schema.nodes[n];if(i.isTextblock&&i.defaultAttrs)return i}},_a.prototype.addPendingMark=function(e){var t=function(e,t){for(var r=0;r<t.length;r++)if(e.eq(t[r]))return t[r]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},_a.prototype.removePendingMark=function(e,t){for(var r=this.open;r>=0;r--){var n=this.nodes[r];if(n.pendingMarks.lastIndexOf(e)>-1)n.pendingMarks=e.removeFromSet(n.pendingMarks);else{n.activeMarks=e.removeFromSet(n.activeMarks);var i=n.popFromStashMark(e);i&&n.type&&n.type.allowsMarkType(i.type)&&(n.activeMarks=i.addToSet(n.activeMarks))}if(n==t)break}},Object.defineProperties(_a.prototype,Ca);var Ea=function(e,t){this.nodes=e||{},this.marks=t||{}};function Oa(e){var t={};for(var r in e){var n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function Na(e){return e.document||window.document}Ea.prototype.serializeFragment=function(e,t,r){var n=this;void 0===t&&(t={}),r||(r=Na(t).createDocumentFragment());var i=r,o=null;return e.forEach((function(e){if(o||e.marks.length){o||(o=[]);for(var r=0,s=0;r<o.length&&s<e.marks.length;){var a=e.marks[s];if(n.marks[a.type.name]){if(!a.eq(o[r])||!1===a.type.spec.spanning)break;r+=2,s++}else s++}for(;r<o.length;)i=o.pop(),o.pop();for(;s<e.marks.length;){var l=e.marks[s++],c=n.serializeMark(l,e.isInline,t);c&&(o.push(l,i),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(n.serializeNodeInner(e,t))})),r},Ea.prototype.serializeNodeInner=function(e,t){void 0===t&&(t={});var r=Ea.renderSpec(Na(t),this.nodes[e.type.name](e)),n=r.dom,i=r.contentDOM;if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,i,t):this.serializeFragment(e.content,t,i)}return n},Ea.prototype.serializeNode=function(e,t){void 0===t&&(t={});for(var r=this.serializeNodeInner(e,t),n=e.marks.length-1;n>=0;n--){var i=this.serializeMark(e.marks[n],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r},Ea.prototype.serializeMark=function(e,t,r){void 0===r&&(r={});var n=this.marks[e.type.name];return n&&Ea.renderSpec(Na(r),n(e,t))},Ea.renderSpec=function(e,t,r){if(void 0===r&&(r=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var n=t[0],i=n.indexOf(" ");i>0&&(r=n.slice(0,i),n=n.slice(i+1));var o=null,s=r?e.createElementNS(r,n):e.createElement(n),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var c in l=2,a)if(null!=a[c]){var h=c.indexOf(" ");h>0?s.setAttributeNS(c.slice(0,h),c.slice(h+1),a[c]):s.setAttribute(c,a[c])}for(var u=l;u<t.length;u++){var d=t[u];if(0===d){if(u<t.length-1||u>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var p=Ea.renderSpec(e,d,r),f=p.dom,m=p.contentDOM;if(s.appendChild(f),m){if(o)throw new RangeError("Multiple content holes");o=m}}return{dom:s,contentDOM:o}},Ea.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ea(this.nodesFromSchema(e),this.marksFromSchema(e)))},Ea.nodesFromSchema=function(e){var t=Oa(e.nodes);return t.text||(t.text=function(e){return e.text}),t},Ea.marksFromSchema=function(e){return Oa(e.marks)};var Ra=Math.pow(2,16);function Da(e){return 65535&e}var za=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=null),this.pos=e,this.deleted=t,this.recover=r},Ia=function e(t,r){if(void 0===r&&(r=!1),!t.length&&e.empty)return e.empty;this.ranges=t,this.inverted=r};Ia.prototype.recover=function(e){var t=0,r=Da(e);if(!this.inverted)for(var n=0;n<r;n++)t+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*r]+t+function(e){return(e-(65535&e))/Ra}(e)},Ia.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Ia.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},Ia.prototype._map=function(e,t,r){for(var n=0,i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var l=this.ranges[s+i],c=this.ranges[s+o],h=a+l;if(e<=h){var u=a+n+((l?e==a?-1:e==h?1:t:t)<0?0:c);if(r)return u;var d=e==(t<0?a:h)?null:s/3+(e-a)*Ra;return new za(u,t<0?e!=a:e!=h,d)}n+=c-l}return r?e+n:new za(e+n)},Ia.prototype.touches=function(e,t){for(var r=0,n=Da(t),i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;var l=this.ranges[s+i];if(e<=a+l&&s==3*n)return!0;r+=this.ranges[s+o]-l}return!1},Ia.prototype.forEach=function(e){for(var t=this.inverted?2:1,r=this.inverted?1:2,n=0,i=0;n<this.ranges.length;n+=3){var o=this.ranges[n],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[n+t],c=this.ranges[n+r];e(s,s+l,a,a+c),i+=c-l}},Ia.prototype.invert=function(){return new Ia(this.ranges,!this.inverted)},Ia.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Ia.offset=function(e){return 0==e?Ia.empty:new Ia(e<0?[0,-e,0]:[0,0,e])},Ia.empty=new Ia([]);var Ba=function(e,t,r,n){this.maps=e||[],this.from=r||0,this.to=null==n?this.maps.length:n,this.mirror=t};function La(e){var t=Error.call(this,e);return t.__proto__=La.prototype,t}Ba.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new Ba(this.maps,this.mirror,e,t)},Ba.prototype.copy=function(){return new Ba(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Ba.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},Ba.prototype.appendMapping=function(e){for(var t=0,r=this.maps.length;t<e.maps.length;t++){var n=e.getMirror(t);this.appendMap(e.maps[t],null!=n&&n<t?r+n:null)}},Ba.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},Ba.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},Ba.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){var n=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=n&&n>t?r-n-1:null)}},Ba.prototype.invert=function(){var e=new Ba;return e.appendMappingInverted(this),e},Ba.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e},Ba.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Ba.prototype._map=function(e,t,r){for(var n=!1,i=this.from;i<this.to;i++){var o=this.maps[i].mapResult(e,t);if(null!=o.recover){var s=this.getMirror(i);if(null!=s&&s>i&&s<this.to){i=s,e=this.maps[s].recover(o.recover);continue}}o.deleted&&(n=!0),e=o.pos}return r?e:new za(e,n)},La.prototype=Object.create(Error.prototype),La.prototype.constructor=La,La.prototype.name="TransformError";var Pa=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ba},Fa={before:{configurable:!0},docChanged:{configurable:!0}};function qa(){throw new Error("Override me")}Fa.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Pa.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new La(t.failed);return this},Pa.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},Fa.docChanged.get=function(){return this.steps.length>0},Pa.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(Pa.prototype,Fa);var Ua=Object.create(null),ja=function(){};ja.prototype.apply=function(e){return qa()},ja.prototype.getMap=function(){return Ia.empty},ja.prototype.invert=function(e){return qa()},ja.prototype.map=function(e){return qa()},ja.prototype.merge=function(e){return null},ja.prototype.toJSON=function(){return qa()},ja.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=Ua[t.stepType];if(!r)throw new RangeError("No step type "+t.stepType+" defined");return r.fromJSON(e,t)},ja.jsonID=function(e,t){if(e in Ua)throw new RangeError("Duplicate use of step JSON ID "+e);return Ua[e]=t,t.prototype.jsonID=e,t};var Va=function(e,t){this.doc=e,this.failed=t};Va.ok=function(e){return new Va(e,null)},Va.fail=function(e){return new Va(null,e)},Va.fromReplace=function(e,t,r,n){try{return Va.ok(e.replace(t,r,n))}catch(i){if(i instanceof Cs)return Va.fail(i.message);throw i}};var $a=function(e){function t(t,r,n,i){e.call(this),this.from=t,this.to=r,this.slice=n,this.structure=!!i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&Wa(e,this.from,this.to)?Va.fail("Structure replace would overwrite content"):Va.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new Ia([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted?null:new t(r.pos,Math.max(r.pos,n.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var r=this.slice.size+e.slice.size==0?Ts.empty:new Ts(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,r,this.structure)}var n=this.slice.size+e.slice.size==0?Ts.empty:new Ts(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),n,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(r.from,r.to,Ts.fromJSON(e,r.slice),!!r.structure)},t}(ja);ja.jsonID("replace",$a);var Ha=function(e){function t(t,r,n,i,o,s,a){e.call(this),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(Wa(e,this.from,this.gapFrom)||Wa(e,this.gapTo,this.to)))return Va.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Va.fail("Gap is not a flat range");var r=this.slice.insertAt(this.insert,t.content);return r?Va.fromReplace(e,this.from,this.to,r):Va.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new Ia([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var r=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return r.deleted&&n.deleted||i<r.pos||o>n.pos?null:new t(r.pos,n.pos,i,o,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,r){if("number"!=typeof r.from||"number"!=typeof r.to||"number"!=typeof r.gapFrom||"number"!=typeof r.gapTo||"number"!=typeof r.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(r.from,r.to,r.gapFrom,r.gapTo,Ts.fromJSON(e,r.slice),r.insert,!!r.structure)},t}(ja);function Wa(e,t,r){for(var n=e.resolve(t),i=r-t,o=n.depth;i>0&&o>0&&n.indexAfter(o)==n.node(o).childCount;)o--,i--;if(i>0)for(var s=n.node(o).maybeChild(n.indexAfter(o));i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}return!1}function Ga(e,t,r){for(var n=[],i=0;i<e.childCount;i++){var o=e.child(i);o.content.size&&(o=o.copy(Ga(o.content,t,o))),o.isInline&&(o=t(o,r,i)),n.push(o)}return bs.fromArray(n)}ja.jsonID("replaceAround",Ha),Pa.prototype.lift=function(e,t){for(var r=e.$from,n=e.$to,i=e.depth,o=r.before(i+1),s=n.after(i+1),a=o,l=s,c=bs.empty,h=0,u=i,d=!1;u>t;u--)d||r.index(u)>0?(d=!0,c=bs.from(r.node(u).copy(c)),h++):a--;for(var p=bs.empty,f=0,m=i,g=!1;m>t;m--)g||n.after(m+1)<n.end(m)?(g=!0,p=bs.from(n.node(m).copy(p)),f++):l++;return this.step(new Ha(a,l,o,s,new Ts(c.append(p),h,f),c.size-h,!0))},Pa.prototype.wrap=function(e,t){for(var r=bs.empty,n=t.length-1;n>=0;n--){if(r.size){var i=t[n].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=bs.from(t[n].type.create(t[n].attrs,r))}var o=e.start,s=e.end;return this.step(new Ha(o,s,o,s,new Ts(r,0,0),t.length,!0))},Pa.prototype.setBlockType=function(e,t,r,n){var i=this;if(void 0===t&&(t=e),!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(r,n)&&function(e,t,r){var n=e.resolve(t),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}(i.doc,i.mapping.slice(o).map(t),r)){i.clearIncompatible(i.mapping.slice(o).map(t,1),r);var s=i.mapping.slice(o),a=s.map(t,1),l=s.map(t+e.nodeSize,1);return i.step(new Ha(a,l,a+1,l-1,new Ts(bs.from(r.create(n,null,e.marks)),0,0),1,!0)),!1}})),this},Pa.prototype.setNodeMarkup=function(e,t,r,n){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var o=t.create(r,null,n||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,o);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new Ha(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Ts(bs.from(o),0,0),1,!0))},Pa.prototype.split=function(e,t,r){void 0===t&&(t=1);for(var n=this.doc.resolve(e),i=bs.empty,o=bs.empty,s=n.depth,a=n.depth-t,l=t-1;s>a;s--,l--){i=bs.from(n.node(s).copy(i));var c=r&&r[l];o=bs.from(c?c.type.create(c.attrs,o):n.node(s).copy(o))}return this.step(new $a(e,e,new Ts(i.append(o),t,t),!0))},Pa.prototype.join=function(e,t){void 0===t&&(t=1);var r=new $a(e-t,e+t,Ts.empty,!0);return this.step(r)};var Ja=function(e){function t(t,r,n){e.call(this),this.from=t,this.to=r,this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,r=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),o=new Ts(Ga(r.content,(function(e,r){return e.isAtom&&r.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),i),r.openStart,r.openEnd);return Va.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new Ka(this.from,this.to,this.mark)},t.prototype.map=function(e){var r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new t(r.pos,n.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(r.from,r.to,e.markFromJSON(r.mark))},t}(ja);ja.jsonID("addMark",Ja);var Ka=function(e){function t(t,r,n){e.call(this),this.from=t,this.to=r,this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,r=e.slice(this.from,this.to),n=new Ts(Ga(r.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),r.openStart,r.openEnd);return Va.fromReplace(e,this.from,this.to,n)},t.prototype.invert=function(){return new Ja(this.from,this.to,this.mark)},t.prototype.map=function(e){var r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new t(r.pos,n.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(r.from,r.to,e.markFromJSON(r.mark))},t}(ja);function Ya(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}ja.jsonID("removeMark",Ka),Pa.prototype.addMark=function(e,t,r){var n=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(n,l,c){if(n.isInline){var h=n.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){for(var u=Math.max(l,e),d=Math.min(l+n.nodeSize,t),p=r.addToSet(h),f=0;f<h.length;f++)h[f].isInSet(p)||(s&&s.to==u&&s.mark.eq(h[f])?s.to=d:i.push(s=new Ka(u,d,h[f])));a&&a.to==u?a.to=d:o.push(a=new Ja(u,d,r))}}})),i.forEach((function(e){return n.step(e)})),o.forEach((function(e){return n.step(e)})),this},Pa.prototype.removeMark=function(e,t,r){var n=this;void 0===r&&(r=null);var i=[],o=0;return this.doc.nodesBetween(e,t,(function(n,s){if(n.isInline){o++;var a=null;if(r instanceof ma)for(var l,c=n.marks;l=r.isInSet(c);)(a||(a=[])).push(l),c=l.removeFromSet(c);else r?r.isInSet(n.marks)&&(a=[r]):a=n.marks;if(a&&a.length)for(var h=Math.min(s+n.nodeSize,t),u=0;u<a.length;u++){for(var d=a[u],p=void 0,f=0;f<i.length;f++){var m=i[f];m.step==o-1&&d.eq(i[f].style)&&(p=m)}p?(p.to=h,p.step=o):i.push({style:d,from:Math.max(s,e),to:h,step:o})}}})),i.forEach((function(e){return n.step(new Ka(e.from,e.to,e.style))})),this},Pa.prototype.clearIncompatible=function(e,t,r){void 0===r&&(r=t.contentMatch);for(var n=this.doc.nodeAt(e),i=[],o=e+1,s=0;s<n.childCount;s++){var a=n.child(s),l=o+a.nodeSize,c=r.matchType(a.type,a.attrs);if(c){r=c;for(var h=0;h<a.marks.length;h++)t.allowsMarkType(a.marks[h].type)||this.step(new Ka(o,l,a.marks[h]))}else i.push(new $a(o,l,Ts.empty));o=l}if(!r.validEnd){var u=r.fillBefore(bs.empty,!0);this.replace(o,o,new Ts(u,0,0))}for(var d=i.length-1;d>=0;d--)this.step(i[d]);return this},Pa.prototype.replace=function(e,t,r){void 0===t&&(t=e),void 0===r&&(r=Ts.empty);var n=function(e,t,r,n){if(void 0===r&&(r=t),void 0===n&&(n=Ts.empty),t==r&&!n.size)return null;var i=e.resolve(t),o=e.resolve(r);return Ya(i,o,n)?new $a(t,r,n):new Xa(i,o,n).fit()}(this.doc,e,t,r);return n&&this.step(n),this},Pa.prototype.replaceWith=function(e,t,r){return this.replace(e,t,new Ts(bs.from(r),0,0))},Pa.prototype.delete=function(e,t){return this.replace(e,t,Ts.empty)},Pa.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var Xa=function(e,t,r){this.$to=t,this.$from=e,this.unplaced=r,this.frontier=[];for(var n=0;n<=e.depth;n++){var i=e.node(n);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(n))})}this.placed=bs.empty;for(var o=e.depth;o>0;o--)this.placed=bs.from(e.node(o).copy(this.placed))},Za={depth:{configurable:!0}};function Qa(e,t,r){return 0==t?e.cutByIndex(r):e.replaceChild(0,e.firstChild.copy(Qa(e.firstChild.content,t-1,r)))}function el(e,t,r){return 0==t?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(el(e.lastChild.content,t-1,r)))}function tl(e,t){for(var r=0;r<t;r++)e=e.firstChild.content;return e}function rl(e,t,r){if(t<=0)return e;var n=e.content;return t>1&&(n=n.replaceChild(0,rl(n.firstChild,t-1,1==n.childCount?r-1:0))),t>0&&(n=e.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(e.type.contentMatch.matchFragment(n).fillBefore(bs.empty,!0)))),e.copy(n)}function nl(e,t,r,n,i){var o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!r.compatibleContent(o.type))return null;var a=n.fillBefore(o.content,!0,s);return a&&!function(e,t,r){for(var n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}(r,o.content,s)?a:null}function il(e,t,r,n,i){if(t<r){var o=e.firstChild;e=e.replaceChild(0,o.copy(il(o.content,t+1,r,n,o)))}if(t>n){var s=i.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(bs.empty,!0))}return e}function ol(e,t){for(var r=[],n=Math.min(e.depth,t.depth);n>=0;n--){var i=e.start(n);if(i<e.pos-(e.depth-n)||t.end(n)>t.pos+(t.depth-n)||e.node(n).type.spec.isolating||t.node(n).type.spec.isolating)break;(i==t.start(n)||n==e.depth&&n==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&n&&t.start(n-1)==i-1)&&r.push(n)}return r}Za.depth.get=function(){return this.frontier.length-1},Xa.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;for(var o=this.placed,s=n.depth,a=i.depth;s&&a&&1==o.childCount;)o=o.firstChild.content,s--,a--;var l=new Ts(o,s,a);return t>-1?new Ha(n.pos,t,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new $a(n.pos,i.pos,l):void 0},Xa.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var r=void 0,n=(t?(r=tl(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var o=this.frontier[i],s=o.type,a=o.match,l=void 0,c=void 0;if(1==e&&(n?a.matchType(n.type)||(c=a.fillBefore(bs.from(n),!1)):s.compatibleContent(r.type)))return{sliceDepth:t,frontierDepth:i,parent:r,inject:c};if(2==e&&n&&(l=a.findWrapping(n.type)))return{sliceDepth:t,frontierDepth:i,parent:r,wrap:l};if(r&&a.matchType(r.type))break}},Xa.prototype.openMore=function(){var e=this.unplaced,t=e.content,r=e.openStart,n=e.openEnd,i=tl(t,r);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new Ts(t,r+1,Math.max(n,i.size+r>=t.size-n?r+1:0)),!0)},Xa.prototype.dropNode=function(){var e=this.unplaced,t=e.content,r=e.openStart,n=e.openEnd,i=tl(t,r);if(i.childCount<=1&&r>0){var o=t.size-r<=r+i.size;this.unplaced=new Ts(Qa(t,r-1,1),r-1,o?r-1:n)}else this.unplaced=new Ts(Qa(t,r,1),r,n)},Xa.prototype.placeNodes=function(e){for(var t=e.sliceDepth,r=e.frontierDepth,n=e.parent,i=e.inject,o=e.wrap;this.depth>r;)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var a=this.unplaced,l=n?n.content:a.content,c=a.openStart-t,h=0,u=[],d=this.frontier[r],p=d.match,f=d.type;if(i){for(var m=0;m<i.childCount;m++)u.push(i.child(m));p=p.matchFragment(i)}for(var g=l.size+t-(a.content.size-a.openEnd);h<l.childCount;){var y=l.child(h),v=p.matchType(y.type);if(!v)break;(++h>1||0==c||y.content.size)&&(p=v,u.push(rl(y.mark(f.allowedMarks(y.marks)),1==h?c:0,h==l.childCount?g:-1)))}var b=h==l.childCount;b||(g=-1),this.placed=el(this.placed,r,bs.from(u)),this.frontier[r].match=p,b&&g<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,x=l;w<g;w++){var k=x.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),x=k.content}this.unplaced=b?0==t?Ts.empty:new Ts(Qa(a.content,t-1,1),t-1,g<0?a.openEnd:t-1):new Ts(Qa(a.content,t,h),a.openStart,a.openEnd)},Xa.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!nl(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var r=this.$to.depth,n=this.$to.after(r);r>1&&n==this.$to.end(--r);)++n;return n},Xa.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var r=this.frontier[t],n=r.match,i=r.type,o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=nl(e,t,i,n,o);if(s){for(var a=t-1;a>=0;a--){var l=this.frontier[a],c=l.match,h=nl(e,a,l.type,c,!0);if(!h||h.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}},Xa.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=el(this.placed,t.depth,t.fit)),e=t.move;for(var r=t.depth+1;r<=e.depth;r++){var n=e.node(r),i=n.type.contentMatch.fillBefore(n.content,!0,e.index(r));this.openFrontierNode(n.type,n.attrs,i)}return e},Xa.prototype.openFrontierNode=function(e,t,r){var n=this.frontier[this.depth];n.match=n.match.matchType(e),this.placed=el(this.placed,this.depth,bs.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})},Xa.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(bs.empty,!0);e.childCount&&(this.placed=el(this.placed,this.frontier.length,e))},Object.defineProperties(Xa.prototype,Za),Pa.prototype.replaceRange=function(e,t,r){if(!r.size)return this.deleteRange(e,t);var n=this.doc.resolve(e),i=this.doc.resolve(t);if(Ya(n,i,r))return this.step(new $a(e,t,r));var o=ol(n,this.doc.resolve(t));0==o[o.length-1]&&o.pop();var s=-(n.depth+1);o.unshift(s);for(var a=n.depth,l=n.pos-1;a>0;a--,l--){var c=n.node(a).type.spec;if(c.defining||c.isolating)break;o.indexOf(a)>-1?s=a:n.before(a)==l&&o.splice(1,0,-a)}for(var h=o.indexOf(s),u=[],d=r.openStart,p=r.content,f=0;;f++){var m=p.firstChild;if(u.push(m),f==r.openStart)break;p=m.content}d>0&&u[d-1].type.spec.defining&&n.node(h).type!=u[d-1].type?d-=1:d>=2&&u[d-1].isTextblock&&u[d-2].type.spec.defining&&n.node(h).type!=u[d-2].type&&(d-=2);for(var g=r.openStart;g>=0;g--){var y=(g+d+1)%(r.openStart+1),v=u[y];if(v)for(var b=0;b<o.length;b++){var w=o[(b+h)%o.length],x=!0;w<0&&(x=!1,w=-w);var k=n.node(w-1),S=n.index(w-1);if(k.canReplaceWith(S,S,v.type,v.marks))return this.replace(n.before(w),x?i.after(w):t,new Ts(il(r.content,0,r.openStart,y),y,r.openEnd))}}for(var _=this.steps.length,C=o.length-1;C>=0&&(this.replace(e,t,r),!(this.steps.length>_));C--){var T=o[C];T<0||(e=n.before(T),t=i.after(T))}return this},Pa.prototype.replaceRangeWith=function(e,t,r){if(!r.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var n=function(e,t,r){var n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(0==n.parentOffset)for(var i=n.depth-1;i>=0;i--){var o=n.index(i);if(n.node(i).canReplaceWith(o,o,r))return n.before(i+1);if(o>0)return null}if(n.parentOffset==n.parent.content.size)for(var s=n.depth-1;s>=0;s--){var a=n.indexAfter(s);if(n.node(s).canReplaceWith(a,a,r))return n.after(s+1);if(a<n.node(s).childCount)return null}}(this.doc,e,r.type);null!=n&&(e=t=n)}return this.replaceRange(e,t,new Ts(bs.from(r),0,0))},Pa.prototype.deleteRange=function(e,t){for(var r=this.doc.resolve(e),n=this.doc.resolve(t),i=ol(r,n),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||r.node(s).type.contentMatch.validEnd)return this.delete(r.start(s),n.end(s));if(s>0&&(a||r.node(s-1).canReplace(r.index(s-1),n.indexAfter(s-1))))return this.delete(r.before(s),n.after(s))}for(var l=1;l<=r.depth&&l<=n.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&n.end(l)-t!=n.depth-l)return this.delete(r.before(l),t);return this.delete(e,t)};var sl=Object.create(null),al=function(e,t,r){this.ranges=r||[new cl(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},ll={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};ll.anchor.get=function(){return this.$anchor.pos},ll.head.get=function(){return this.$head.pos},ll.from.get=function(){return this.$from.pos},ll.to.get=function(){return this.$to.pos},ll.$from.get=function(){return this.ranges[0].$from},ll.$to.get=function(){return this.ranges[0].$to},ll.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},al.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},al.prototype.replace=function(e,t){void 0===t&&(t=Ts.empty);for(var r=t.content.lastChild,n=null,i=0;i<t.openEnd;i++)n=r,r=r.lastChild;for(var o=e.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],c=l.$from,h=l.$to,u=e.mapping.slice(o);e.replaceRange(u.map(c.pos),u.map(h.pos),a?Ts.empty:t),0==a&&yl(e,o,(r?r.isInline:n&&n.isTextblock)?-1:1)}},al.prototype.replaceWith=function(e,t){for(var r=e.steps.length,n=this.ranges,i=0;i<n.length;i++){var o=n[i],s=o.$from,a=o.$to,l=e.mapping.slice(r),c=l.map(s.pos),h=l.map(a.pos);i?e.deleteRange(c,h):(e.replaceRangeWith(c,h,t),yl(e,r,t.isInline?-1:1))}},al.findFrom=function(e,t,r){var n=e.parent.inlineContent?new hl(e):gl(e.node(0),e.parent,e.pos,e.index(),t,r);if(n)return n;for(var i=e.depth-1;i>=0;i--){var o=t<0?gl(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):gl(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(o)return o}},al.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new fl(e.node(0))},al.atStart=function(e){return gl(e,e,0,0,1)||new fl(e)},al.atEnd=function(e){return gl(e,e,e.content.size,e.childCount,-1)||new fl(e)},al.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=sl[t.type];if(!r)throw new RangeError("No selection type "+t.type+" defined");return r.fromJSON(e,t)},al.jsonID=function(e,t){if(e in sl)throw new RangeError("Duplicate use of selection JSON ID "+e);return sl[e]=t,t.prototype.jsonID=e,t},al.prototype.getBookmark=function(){return hl.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(al.prototype,ll),al.prototype.visible=!0;var cl=function(e,t){this.$from=e,this.$to=t},hl=function(e){function t(t,r){void 0===r&&(r=t),e.call(this,t,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={$cursor:{configurable:!0}};return r.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(r,n){var i=r.resolve(n.map(this.head));if(!i.parent.inlineContent)return e.near(i);var o=r.resolve(n.map(this.anchor));return new t(o.parent.inlineContent?o:i,i)},t.prototype.replace=function(t,r){if(void 0===r&&(r=Ts.empty),e.prototype.replace.call(this,t,r),r==Ts.empty){var n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new ul(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,r){if("number"!=typeof r.anchor||"number"!=typeof r.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(r.anchor),e.resolve(r.head))},t.create=function(e,t,r){void 0===r&&(r=t);var n=e.resolve(t);return new this(n,r==t?n:e.resolve(r))},t.between=function(r,n,i){var o=r.pos-n.pos;if(i&&!o||(i=o>=0?1:-1),!n.parent.inlineContent){var s=e.findFrom(n,i,!0)||e.findFrom(n,-i,!0);if(!s)return e.near(n,i);n=s.$head}return r.parent.inlineContent||(0==o||(r=(e.findFrom(r,-i,!0)||e.findFrom(r,i,!0)).$anchor).pos<n.pos!=o<0)&&(r=n),new t(r,n)},Object.defineProperties(t.prototype,r),t}(al);al.jsonID("text",hl);var ul=function(e,t){this.anchor=e,this.head=t};ul.prototype.map=function(e){return new ul(e.map(this.anchor),e.map(this.head))},ul.prototype.resolve=function(e){return hl.between(e.resolve(this.anchor),e.resolve(this.head))};var dl=function(e){function t(t){var r=t.nodeAfter,n=t.node(0).resolve(t.pos+r.nodeSize);e.call(this,t,n),this.node=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,n){var i=n.mapResult(this.anchor),o=i.deleted,s=i.pos,a=r.resolve(s);return o?e.near(a):new t(a)},t.prototype.content=function(){return new Ts(bs.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new pl(this.anchor)},t.fromJSON=function(e,r){if("number"!=typeof r.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(r.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(al);dl.prototype.visible=!1,al.jsonID("node",dl);var pl=function(e){this.anchor=e};pl.prototype.map=function(e){var t=e.mapResult(this.anchor),r=t.deleted,n=t.pos;return r?new ul(n,n):new pl(n)},pl.prototype.resolve=function(e){var t=e.resolve(this.anchor),r=t.nodeAfter;return r&&dl.isSelectable(r)?new dl(t):al.near(t)};var fl=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,r){if(void 0===r&&(r=Ts.empty),r==Ts.empty){t.delete(0,t.doc.content.size);var n=e.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else e.prototype.replace.call(this,t,r)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return ml},t}(al);al.jsonID("all",fl);var ml={map:function(){return this},resolve:function(e){return new fl(e)}};function gl(e,t,r,n,i,o){if(t.inlineContent)return hl.create(e,r);for(var s=n-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){var a=t.child(s);if(a.isAtom){if(!o&&dl.isSelectable(a))return dl.create(e,r-(i<0?a.nodeSize:0))}else{var l=gl(e,a,r+i,i<0?a.childCount:0,i,o);if(l)return l}r+=a.nodeSize*i}}function yl(e,t,r){var n=e.steps.length-1;if(!(n<t)){var i,o=e.steps[n];if(o instanceof $a||o instanceof Ha)e.mapping.maps[n].forEach((function(e,t,r,n){null==i&&(i=n)})),e.setSelection(al.near(e.doc.resolve(i),r))}}var vl=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return r.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},r.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return _s.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},r.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,r){e.prototype.addStep.call(this,t,r),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var r=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||_s.none))),r.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,r){void 0===r&&(r=t);var n=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(n.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,r);var i=this.storedMarks;if(!i){var o=this.doc.resolve(t);i=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,n.text(e,i)),this.selection.empty||this.setSelection(al.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},r.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},r.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,r),t}(Pa);function bl(e,t){return t&&e?e.bind(t):e}var wl=function(e,t,r){this.name=e,this.init=bl(t.init,r),this.apply=bl(t.apply,r)},xl=[new wl("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new wl("selection",{init:function(e,t){return e.selection||al.atStart(t.doc)},apply:function(e){return e.selection}}),new wl("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,r,n){return n.selection.$cursor?e.storedMarks:null}}),new wl("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],kl=function(e,t){var r=this;this.schema=e,this.fields=xl.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),r.pluginsByKey[e.key]=e,e.spec.state&&r.fields.push(new wl(e.key,e.spec.state,e))}))},Sl=function(e){this.config=e},_l={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};_l.schema.get=function(){return this.config.schema},_l.plugins.get=function(){return this.config.plugins},Sl.prototype.apply=function(e){return this.applyTransaction(e).state},Sl.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=t){var n=this.config.plugins[r];if(n.spec.filterTransaction&&!n.spec.filterTransaction.call(n,e,this))return!1}return!0},Sl.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],r=this.applyInner(e),n=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=n?n[o].n:0,l=n?n[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!n){n=[];for(var h=0;h<this.config.plugins.length;h++)n.push(h<o?{state:r,n:t.length}:{state:this,n:0})}t.push(c),r=r.applyInner(c),i=!0}n&&(n[o]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}},Sl.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new Sl(this.config),r=this.config.fields,n=0;n<r.length;n++){var i=r[n];t[i.name]=i.apply(e,this[i.name],this,t)}for(var o=0;o<Cl.length;o++)Cl[o](this,e,t);return t},_l.tr.get=function(){return new vl(this)},Sl.create=function(e){for(var t=new kl(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Sl(t),n=0;n<t.fields.length;n++)r[t.fields[n].name]=t.fields[n].init(e,r);return r},Sl.prototype.reconfigure=function(e){for(var t=new kl(this.schema,e.plugins),r=t.fields,n=new Sl(t),i=0;i<r.length;i++){var o=r[i].name;n[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,n)}return n},Sl.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var r in e){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var n=e[r],i=n.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(n,this[n.key]))}return t},Sl.fromJSON=function(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var n=new kl(e.schema,e.plugins),i=new Sl(n);return n.fields.forEach((function(n){if("doc"==n.name)i.doc=Gs.fromJSON(e.schema,t.doc);else if("selection"==n.name)i.selection=al.fromJSON(i.doc,t.selection);else if("storedMarks"==n.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(var o in r){var s=r[o],a=s.spec.state;if(s.key==n.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(i[n.name]=a.fromJSON.call(s,e,t[o],i))}i[n.name]=n.init(e,i)}})),i},Sl.addApplyListener=function(e){Cl.push(e)},Sl.removeApplyListener=function(e){var t=Cl.indexOf(e);t>-1&&Cl.splice(t,1)},Object.defineProperties(Sl.prototype,_l);var Cl=[];function Tl(e,t,r){for(var n in e){var i=e[n];i instanceof Function?i=i.bind(t):"handleDOMEvents"==n&&(i=Tl(i,t,{})),r[n]=i}return r}var Ml=function(e){this.props={},e.props&&Tl(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:El("plugin")};Ml.prototype.getState=function(e){return e[this.key]};var Al=Object.create(null);function El(e){return e in Al?e+"$"+ ++Al[e]:(Al[e]=0,e+"$")}var Ol=function(e){void 0===e&&(e="key"),this.key=El(e)};Ol.prototype.get=function(e){return e.config.pluginsByKey[this.key]},Ol.prototype.getState=function(e){return e[this.key]};var Nl={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var Rl=/Edge\/(\d+)/.exec(navigator.userAgent),Dl=/MSIE \d/.test(navigator.userAgent),zl=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Il=Nl.ie=!!(Dl||zl||Rl);Nl.ie_version=Dl?document.documentMode||6:zl?+zl[1]:Rl?+Rl[1]:null,Nl.gecko=!Il&&/gecko\/(\d+)/i.test(navigator.userAgent),Nl.gecko_version=Nl.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Bl=!Il&&/Chrome\/(\d+)/.exec(navigator.userAgent);Nl.chrome=!!Bl,Nl.chrome_version=Bl&&+Bl[1],Nl.safari=!Il&&/Apple Computer/.test(navigator.vendor),Nl.ios=Nl.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),Nl.mac=Nl.ios||/Mac/.test(navigator.platform),Nl.android=/Android \d/.test(navigator.userAgent),Nl.webkit="webkitFontSmoothing"in document.documentElement.style,Nl.webkit_version=Nl.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Ll=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},Pl=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},Fl=null,ql=function(e,t,r){var n=Fl||(Fl=document.createRange());return n.setEnd(e,null==r?e.nodeValue.length:r),n.setStart(e,t||0),n},Ul=function(e,t,r,n){return r&&(Vl(e,t,r,n,-1)||Vl(e,t,r,n,1))},jl=/^(img|br|input|textarea|hr)$/i;function Vl(e,t,r,n,i){for(;;){if(e==r&&t==n)return!0;if(t==(i<0?0:$l(e))){var o=e.parentNode;if(1!=o.nodeType||Hl(e)||jl.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Ll(e)+(i<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?$l(e):0}}}function $l(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Hl(e){for(var t,r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var Wl=function(e){var t=e.isCollapsed;return t&&Nl.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Gl(e,t){var r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}function Jl(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Kl(e,t){return"number"==typeof e?e:e[t]}function Yl(e){var t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}function Xl(e,t,r){for(var n=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,s=r||e.dom;s;s=Pl(s))if(1==s.nodeType){var a=s==o.body||1!=s.nodeType,l=a?Jl(o):Yl(s),c=0,h=0;if(t.top<l.top+Kl(n,"top")?h=-(l.top-t.top+Kl(i,"top")):t.bottom>l.bottom-Kl(n,"bottom")&&(h=t.bottom-l.bottom+Kl(i,"bottom")),t.left<l.left+Kl(n,"left")?c=-(l.left-t.left+Kl(i,"left")):t.right>l.right-Kl(n,"right")&&(c=t.right-l.right+Kl(i,"right")),c||h)if(a)o.defaultView.scrollBy(c,h);else{var u=s.scrollLeft,d=s.scrollTop;h&&(s.scrollTop+=h),c&&(s.scrollLeft+=c);var p=s.scrollLeft-u,f=s.scrollTop-d;t={left:t.left-p,top:t.top-f,right:t.right-p,bottom:t.bottom-f}}if(a)break}}function Zl(e){for(var t=[],r=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=r);e=Pl(e));return t}function Ql(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=n.dom,o=n.top,s=n.left;i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}var ec=null;function tc(e,t){for(var r,n,i=2e8,o=0,s=t.top,a=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var h=void 0;if(1==l.nodeType)h=l.getClientRects();else{if(3!=l.nodeType)continue;h=ql(l).getClientRects()}for(var u=0;u<h.length;u++){var d=h[u];if(d.top<=s&&d.bottom>=a){s=Math.max(d.bottom,s),a=Math.min(d.top,a);var p=d.left>t.left?d.left-t.left:d.right<t.left?t.left-d.right:0;if(p<i){r=l,i=p,n=p&&3==r.nodeType?{left:d.right<t.left?d.right:d.left,top:t.top}:t,1==l.nodeType&&p&&(o=c+(t.left>=(d.left+d.right)/2?1:0));continue}}!r&&(t.left>=d.right&&t.top>=d.top||t.left>=d.left&&t.top>=d.bottom)&&(o=c+1)}}return r&&3==r.nodeType?function(e,t){for(var r=e.nodeValue.length,n=document.createRange(),i=0;i<r;i++){n.setEnd(e,i+1),n.setStart(e,i);var o=oc(n,1);if(o.top!=o.bottom&&rc(t,o))return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}(r,n):!r||i&&1==r.nodeType?{node:e,offset:o}:tc(r,n)}function rc(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function nc(e,t,r){var n=e.childNodes.length;if(n&&r.top<r.bottom)for(var i=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-r.top)/(r.bottom-r.top))-2)),o=i;;){var s=e.childNodes[o];if(1==s.nodeType)for(var a=s.getClientRects(),l=0;l<a.length;l++){var c=a[l];if(rc(t,c))return nc(s,t,c)}if((o=(o+1)%n)==i)break}return e}function ic(e,t){var r,n,i,o,s=e.dom.ownerDocument;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(t.left,t.top);a&&(i=(r=a).offsetNode,o=r.offset)}catch(g){}if(!i&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(t.left,t.top);l&&(i=(n=l).startContainer,o=n.startOffset)}var c,h=(e.root.elementFromPoint?e.root:s).elementFromPoint(t.left,t.top+1);if(!h||!e.dom.contains(1!=h.nodeType?h.parentNode:h)){var u=e.dom.getBoundingClientRect();if(!rc(t,u))return null;if(!(h=nc(e.dom,t,u)))return null}if(Nl.safari)for(var d=h;i&&d;d=Pl(d))d.draggable&&(i=o=null);if(h=function(e,t){var r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left?r:e}(h,t),i){if(Nl.gecko&&1==i.nodeType&&(o=Math.min(o,i.childNodes.length))<i.childNodes.length){var p,f=i.childNodes[o];"IMG"==f.nodeName&&(p=f.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&o++}i==e.dom&&o==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=o&&1==i.nodeType&&"BR"==i.childNodes[o-1].nodeName||(c=function(e,t,r,n){for(var i=-1,o=t;o!=e.dom;){var s=e.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top)i=s.posBefore;else{if(!(a.right<n.left||a.bottom<n.top))break;i=s.posAfter}}o=s.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,r)}(e,i,o,t))}null==c&&(c=function(e,t,r){var n=tc(t,r),i=n.node,o=n.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&r.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(i,o,s)}(e,h,t));var m=e.docView.nearestDesc(h,!0);return{pos:c,inside:m?m.posAtStart-m.border:-1}}function oc(e,t){var r=e.getClientRects();return r.length?r[t<0?0:r.length-1]:e.getBoundingClientRect()}var sc=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ac(e,t,r){var n=e.docView.domFromPos(t,r<0?-1:1),i=n.node,o=n.offset,s=Nl.webkit||Nl.gecko;if(3==i.nodeType){if(!s||!sc.test(i.nodeValue)&&(r<0?o:o!=i.nodeValue.length)){var a=o,l=o,c=r<0?1:-1;return r<0&&!o?(l++,c=-1):r>=0&&o==i.nodeValue.length?(a--,c=1):r<0?a--:l++,lc(oc(ql(i,a,l),c),c<0)}var h=oc(ql(i,o,o),r);if(Nl.gecko&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){var u=oc(ql(i,o-1,o-1),-1);if(u.top==h.top){var d=oc(ql(i,o,o+1),-1);if(d.top!=h.top)return lc(d,d.left<u.left)}}return h}if(!e.state.doc.resolve(t).parent.inlineContent){if(o&&(r<0||o==$l(i))){var p=i.childNodes[o-1];if(1==p.nodeType)return cc(p.getBoundingClientRect(),!1)}if(o<$l(i)){var f=i.childNodes[o];if(1==f.nodeType)return cc(f.getBoundingClientRect(),!0)}return cc(i.getBoundingClientRect(),r>=0)}if(o&&(r<0||o==$l(i))){var m=i.childNodes[o-1],g=3==m.nodeType?ql(m,$l(m)-(s?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(g)return lc(oc(g,1),!1)}if(o<$l(i)){for(var y=i.childNodes[o];y.pmViewDesc&&y.pmViewDesc.ignoreForCoords;)y=y.nextSibling;var v=y?3==y.nodeType?ql(y,0,s?0:1):1==y.nodeType?y:null:null;if(v)return lc(oc(v,-1),!0)}return lc(oc(3==i.nodeType?ql(i):i,-r),r>=0)}function lc(e,t){if(0==e.width)return e;var r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function cc(e,t){if(0==e.height)return e;var r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function hc(e,t,r){var n=e.state,i=e.root.activeElement;n!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),i!=e.dom&&i&&i.focus()}}var uc=/[\u0590-\u08ac]/;var dc=null,pc=null,fc=!1;function mc(e,t,r){return dc==t&&pc==r?fc:(dc=t,pc=r,fc="up"==r||"down"==r?function(e,t,r){var n=t.selection,i="up"==r?n.$from:n.$to;return hc(e,t,(function(){for(var t=e.docView.domFromPos(i.pos,"up"==r?-1:1).node;;){var n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}for(var o=ac(e,i.pos,1),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=ql(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top+1&&("up"==r?o.top-c.top>2*(c.bottom-o.top):c.bottom-o.bottom>2*(o.bottom-c.top)))return!1}}return!0}))}(e,t,r):function(e,t,r){var n=t.selection.$head;if(!n.parent.isTextblock)return!1;var i=n.parentOffset,o=!i,s=i==n.parent.content.size,a=e.root.getSelection();return uc.test(n.parent.textContent)&&a.modify?hc(e,t,(function(){var t=a.getRangeAt(0),i=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",r,"character");var l=!(n.depth?e.docView.domAfterPos(n.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||i==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),l})):"left"==r||"backward"==r?o:s}(e,t,r))}var gc=function(e,t,r,n){this.parent=e,this.children=t,this.dom=r,r.pmViewDesc=this,this.contentDOM=n,this.dirty=0},yc={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};gc.prototype.matchesWidget=function(){return!1},gc.prototype.matchesMark=function(){return!1},gc.prototype.matchesNode=function(){return!1},gc.prototype.matchesHack=function(e){return!1},gc.prototype.parseRule=function(){return null},gc.prototype.stopEvent=function(){return!1},yc.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},yc.border.get=function(){return 0},gc.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},gc.prototype.posBeforeChild=function(e){for(var t=0,r=this.posAtStart;t<this.children.length;t++){var n=this.children[t];if(n==e)return r;r+=n.size}},yc.posBefore.get=function(){return this.parent.posBeforeChild(this)},yc.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},yc.posAfter.get=function(){return this.posBefore+this.size},yc.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},gc.prototype.localPosFromDOM=function(e,t,r){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(r<0){var n,i;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(i)+i.size:this.posAtStart}var o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&(!(s=o.pmViewDesc)||s.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>Ll(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==a?r>0:a)?this.posAtEnd:this.posAtStart},gc.prototype.nearestDesc=function(e,t){for(var r=!0,n=e;n;n=n.parentNode){var i=this.getDesc(n);if(i&&(!t||i.node)){if(!r||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(1==e.nodeType?e:e.parentNode):i.nodeDOM==e))return i;r=!1}}},gc.prototype.getDesc=function(e){for(var t=e.pmViewDesc,r=t;r;r=r.parent)if(r==this)return t},gc.prototype.posFromDOM=function(e,t,r){for(var n=e;n;n=n.parentNode){var i=this.getDesc(n);if(i)return i.localPosFromDOM(e,t,r)}return-1},gc.prototype.descAt=function(e){for(var t=0,r=0;t<this.children.length;t++){var n=this.children[t],i=r+n.size;if(r==e&&i!=r){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(e<i)return n.descAt(e-r-n.border);r=i}},gc.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var r=0,n=0,i=0;r<this.children.length;r++){var o=this.children[r],s=i+o.size;if(s>e||o instanceof Cc){n=e-i;break}i=s}if(n)return this.children[r].domFromPos(n-this.children[r].border,t);for(var a=void 0;r&&!(a=this.children[r-1]).size&&a instanceof bc&&a.widget.type.side>=0;r--);if(t<=0){for(var l,c=!0;(l=r?this.children[r-1]:null)&&l.dom.parentNode!=this.contentDOM;r--,c=!1);return l&&t&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?Ll(l.dom)+1:0}}for(var h,u=!0;(h=r<this.children.length?this.children[r]:null)&&h.dom.parentNode!=this.contentDOM;r++,u=!1);return h&&u&&!h.border&&!h.domAtom?h.domFromPos(0,t):{node:this.contentDOM,offset:h?Ll(h.dom):this.contentDOM.childNodes.length}},gc.prototype.parseRange=function(e,t,r){if(void 0===r&&(r=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var n=-1,i=-1,o=r,s=0;;s++){var a=this.children[s],l=o+a.size;if(-1==n&&e<=l){var c=o+a.border;if(e>=c&&t<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=o;for(var h=s;h>0;h--){var u=this.children[h-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){n=Ll(u.dom)+1;break}e-=u.size}-1==n&&(n=0)}if(n>-1&&(l>t||s==this.children.length-1)){t=l;for(var d=s+1;d<this.children.length;d++){var p=this.children[d];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){i=Ll(p.dom);break}t+=p.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:i}},gc.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},gc.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),r=t.node,n=t.offset;if(1!=r.nodeType||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]},gc.prototype.setSelection=function(e,t,r,n){for(var i=Math.min(e,t),o=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(i>a&&o<c)return l.setSelection(e-a-l.border,t-a-l.border,r,n);a=c}var h=this.domFromPos(e,e?-1:1),u=t==e?h:this.domFromPos(t,t?-1:1),d=r.getSelection(),p=!1;if((Nl.gecko||Nl.safari)&&e==t){var f=h.node,m=h.offset;if(3==f.nodeType){if((p=m&&"\n"==f.nodeValue[m-1])&&m==f.nodeValue.length)for(var g=f,y=void 0;g;g=g.parentNode){if(y=g.nextSibling){"BR"==y.nodeName&&(h=u={node:y.parentNode,offset:Ll(y)+1});break}var v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{var b=f.childNodes[m-1];p=b&&("BR"==b.nodeName||"false"==b.contentEditable)}}if(Nl.gecko&&d.focusNode&&d.focusNode!=u.node&&1==d.focusNode.nodeType){var w=d.focusNode.childNodes[d.focusOffset];w&&"false"==w.contentEditable&&(n=!0)}if(n||p&&Nl.safari||!Ul(h.node,h.offset,d.anchorNode,d.anchorOffset)||!Ul(u.node,u.offset,d.focusNode,d.focusOffset)){var x=!1;if((d.extend||e==t)&&!p){d.collapse(h.node,h.offset);try{e!=t&&d.extend(u.node,u.offset),x=!0}catch(_){if(!(_ instanceof DOMException))throw _}}if(!x){if(e>t){var k=h;h=u,u=k}var S=document.createRange();S.setEnd(u.node,u.offset),S.setStart(h.node,h.offset),d.removeAllRanges(),d.addRange(S)}}},gc.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},yc.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},gc.prototype.markDirty=function(e,t){for(var r=0,n=0;n<this.children.length;n++){var i=this.children[n],o=r+i.size;if(r==o?e<=o&&t>=r:e<o&&t>r){var s=r+i.border,a=o-i.border;if(e>=s&&t<=a)return this.dirty=e==r||t==o?2:1,void(e!=s||t!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-s,t-s):i.dirty=3);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}r=o}this.dirty=2},gc.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var r=1==e?2:1;t.dirty<r&&(t.dirty=r)}},yc.domAtom.get=function(){return!1},yc.ignoreForCoords.get=function(){return!1},Object.defineProperties(gc.prototype,yc);var vc=[],bc=function(e){function t(t,r,n,i){var o,s=r.type.toDOM;if("function"==typeof s&&(s=s(n,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:i}))),!r.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,vc,s,null),this.widget=r,o=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},t.prototype.destroy=function(){this.widget.type.destroy(this.dom),e.prototype.destroy.call(this)},r.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,r),t}(gc),wc=function(e){function t(t,r,n,i){e.call(this,t,vc,r,null),this.textDOM=n,this.text=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={size:{configurable:!0}};return r.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,r),t}(gc),xc=function(e){function t(t,r,n,i){e.call(this,t,[],n,i),this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,r,n,i){var o=i.nodeViews[r.type.name],s=o&&o(r,i,n);return s&&s.dom||(s=Ea.renderSpec(document,r.type.spec.toDOM(r,n))),new t(e,r,s.dom,s.contentDOM||s.dom)},t.prototype.parseRule=function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,r){if(e.prototype.markDirty.call(this,t,r),0!=this.dirty){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,r,n){var i=t.create(this.parent,this.mark,!0,n),o=this.children,s=this.size;r<s&&(o=Pc(o,r,s,n)),e>0&&(o=Pc(o,0,e,n));for(var a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i},t}(gc),kc=function(e){function t(t,r,n,i,o,s,a,l,c){e.call(this,t,r.isLeaf?vc:[],o,s),this.nodeDOM=a,this.node=r,this.outerDeco=n,this.innerDeco=i,s&&this.updateChildren(l,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,r,n,i,o,s){var a,l,c=o.nodeViews[r.type.name],h=c&&c(r,o,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),n,i),u=h&&h.dom,d=h&&h.contentDOM;if(r.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(r.text);else u||(u=(a=Ea.renderSpec(document,r.type.spec.toDOM(r))).dom,d=a.contentDOM);d||r.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable=!1),r.type.spec.draggable&&(u.draggable=!0));var p=u;return u=Dc(u,n,r),h?l=new Tc(e,r,n,i,u,d,p,h,o,s+1):r.isText?new _c(e,r,n,i,u,p,o):new t(e,r,n,i,u,d,p,o,s+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return"pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?bs.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,r){return 0==this.dirty&&e.eq(this.node)&&zc(t,this.outerDeco)&&r.eq(this.innerDeco)},r.size.get=function(){return this.node.nodeSize},r.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var r=this,n=this.node.inlineContent,i=t,o=e.composing&&this.localCompositionInfo(e,t),s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new Bc(this,s&&s.node);!function(e,t,r,n){var i=t.locals(e),o=0;if(0==i.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);n(a,i,t.forChild(o,a),s),o+=a.nodeSize}return}for(var l=0,c=[],h=null,u=0;;){if(l<i.length&&i[l].to==o){for(var d=i[l++],p=void 0;l<i.length&&i[l].to==o;)(p||(p=[d])).push(i[l++]);if(p){p.sort(Lc);for(var f=0;f<p.length;f++)r(p[f],u,!!h)}else r(d,u,!!h)}var m=void 0,g=void 0;if(h)g=-1,m=h,h=null;else{if(!(u<e.childCount))break;g=u,m=e.child(u++)}for(var y=0;y<c.length;y++)c[y].to<=o&&c.splice(y--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)c.push(i[l++]);var v=o+m.nodeSize;if(m.isText){var b=v;l<i.length&&i[l].from<b&&(b=i[l].from);for(var w=0;w<c.length;w++)c[w].to<b&&(b=c[w].to);b<v&&(h=m.cut(b-o),m=m.cut(0,b-o),v=b,g=-1)}n(m,c.length?m.isInline&&!m.isLeaf?c.filter((function(e){return!e.inline})):c.slice():vc,t.forChild(o,m),g),o=v}}(this.node,this.innerDeco,(function(t,o,s){t.spec.marks?l.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!s&&l.syncToMarks(o==r.node.childCount?_s.none:r.node.child(o).marks,n,e),l.placeWidget(t,e,i)}),(function(t,r,s,c){var h;l.syncToMarks(t.marks,n,e),l.findNodeMatch(t,r,s,c)||a&&e.state.selection.from>i&&e.state.selection.to<i+t.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(t,r,s,h,e)||l.updateNextNode(t,r,s,e,c)||l.addNode(t,r,s,e,i),i+=t.nodeSize})),l.syncToMarks(vc,n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),Mc(this.contentDOM,this.children,e),Nl.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionInfo=function(e,t){var r=e.state.selection,n=r.from,i=r.to;if(!(!(e.state.selection instanceof hl)||n<t||i>t+this.node.content.size)){var o=e.root.getSelection(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=$l(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(o.focusNode,o.focusOffset);if(s&&this.dom.contains(s.parentNode)){if(this.node.inlineContent){var a=s.nodeValue,l=function(e,t,r,n){for(var i=0,o=0;i<e.childCount&&o<=n;){var s=e.child(i++),a=o;if(o+=s.nodeSize,s.isText){for(var l=s.text;i<e.childCount;){var c=e.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=r&&a<n){var h=l.lastIndexOf(t,n-a-1);if(h>=0&&h+t.length+a>=r)return a+h}}}return-1}(this.node.content,a,n-t,i-t);return l<0?null:{node:s,pos:l,text:a}}return{node:s,pos:-1}}}},t.prototype.protectLocalComposition=function(e,t){var r=t.node,n=t.pos,i=t.text;if(!this.getDesc(r)){for(var o=r;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new wc(this,o,r,i);e.compositionNodes.push(s),this.children=Pc(this.children,n,n+i.length,e,s)}},t.prototype.update=function(e,t,r,n){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,r,n),!0)},t.prototype.updateInner=function(e,t,r,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!zc(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,r=this.dom;this.dom=Nc(this.dom,this.nodeDOM,Oc(this.outerDeco,this.node,t),Oc(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},r.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,r),t}(gc);function Sc(e,t,r,n,i){return Dc(n,t,e),new kc(null,e,t,r,n,n,n,i,0)}var _c=function(e){function t(t,r,n,i,o,s,a){e.call(this,t,r,n,i,o,null,s,a)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,r,n){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,r,n){return t==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,r,n)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,r,n){var i=this.node.cut(e,r),o=document.createTextNode(i.text);return new t(this.parent,i,this.outerDeco,this.innerDeco,o,o,n)},t.prototype.markDirty=function(t,r){e.prototype.markDirty.call(this,t,r),this.dom==this.nodeDOM||0!=t&&r!=this.nodeDOM.nodeValue.length||(this.dirty=3)},r.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,r),t}(kc),Cc=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(e){return 0==this.dirty&&this.dom.nodeName==e},r.domAtom.get=function(){return!0},r.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(t.prototype,r),t}(gc),Tc=function(e){function t(t,r,n,i,o,s,a,l,c,h){e.call(this,t,r,n,i,o,s,a,c,h),this.spec=l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,r,n,i){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(t,r,n);return o&&this.updateInner(t,r,n,i),o}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,r,n,i)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,r,n,i){this.spec.setSelection?this.spec.setSelection(t,r,n):e.prototype.setSelection.call(this,t,r,n,i)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(kc);function Mc(e,t,r){for(var n=e.firstChild,i=!1,o=0;o<t.length;o++){var s=t[o],a=s.dom;if(a.parentNode==e){for(;a!=n;)n=Ic(n),i=!0;n=n.nextSibling}else i=!0,e.insertBefore(a,n);if(s instanceof xc){var l=n?n.previousSibling:e.lastChild;Mc(s.contentDOM,s.children,r),n=l?l.nextSibling:e.firstChild}}for(;n;)n=Ic(n),i=!0;i&&r.trackWrites==e&&(r.trackWrites=null)}function Ac(e){e&&(this.nodeName=e)}Ac.prototype=Object.create(null);var Ec=[new Ac];function Oc(e,t,r){if(0==e.length)return Ec;for(var n=r?Ec[0]:new Ac,i=[n],o=0;o<e.length;o++){var s=e[o].type.attrs;if(s)for(var a in s.nodeName&&i.push(n=new Ac(s.nodeName)),s){var l=s[a];null!=l&&(r&&1==i.length&&i.push(n=new Ac(t.isInline?"span":"div")),"class"==a?n.class=(n.class?n.class+" ":"")+l:"style"==a?n.style=(n.style?n.style+";":"")+l:"nodeName"!=a&&(n[a]=l))}}return i}function Nc(e,t,r,n){if(r==Ec&&n==Ec)return t;for(var i=t,o=0;o<n.length;o++){var s=n[o],a=r[o];if(o){var l=void 0;a&&a.nodeName==s.nodeName&&i!=e&&(l=i.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).pmIsDeco=!0,l.appendChild(i),a=Ec[0]),i=l}Rc(i,a||Ec[0],s)}return i}function Rc(e,t,r){for(var n in t)"class"==n||"style"==n||"nodeName"==n||n in r||e.removeAttribute(n);for(var i in r)"class"!=i&&"style"!=i&&"nodeName"!=i&&r[i]!=t[i]&&e.setAttribute(i,r[i]);if(t.class!=r.class){for(var o=t.class?t.class.split(" ").filter(Boolean):vc,s=r.class?r.class.split(" ").filter(Boolean):vc,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&e.classList.remove(o[a]);for(var l=0;l<s.length;l++)-1==o.indexOf(s[l])&&e.classList.add(s[l]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=r.style){if(t.style)for(var c,h=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=h.exec(t.style);)e.style.removeProperty(c[1]);r.style&&(e.style.cssText+=r.style)}}function Dc(e,t,r){return Nc(e,e,Ec,Oc(t,r,1!=e.nodeType))}function zc(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function Ic(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Bc=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(e,t){var r=t,n=r.children.length,i=e.childCount,o=new Map,s=[];e:for(;i>0;){for(var a=void 0;;)if(n){var l=r.children[n-1];if(!(l instanceof xc)){a=l,n--;break}r=l,n=l.children.length}else{if(r==t)break e;n=r.parent.children.indexOf(r),r=r.parent}var c=a.node;if(c){if(c!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}(e.node.content,e)};function Lc(e,t){return e.type.side-t.type.side}function Pc(e,t,r,n,i){for(var o=[],s=0,a=0;s<e.length;s++){var l=e[s],c=a,h=a+=l.size;c>=r||h<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,n)),i&&(o.push(i),i=null),h>r&&o.push(l.slice(r-c,l.size,n)))}return o}function Fc(e,t){var r=e.root.getSelection(),n=e.state.doc;if(!r.focusNode)return null;var i=e.docView.nearestDesc(r.focusNode),o=i&&0==i.size,s=e.docView.posFromDOM(r.focusNode,r.focusOffset);if(s<0)return null;var a,l,c=n.resolve(s);if(Wl(r)){for(a=c;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&dl.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(e,t,r){for(var n=0==t,i=t==$l(e);n||i;){if(e==r)return!0;var o=Ll(e);if(!(e=e.parentNode))return!1;n=n&&0==o,i=i&&o==$l(e)}}(r.focusNode,r.focusOffset,i.dom))){var h=i.posBefore;l=new dl(s==h?c:n.resolve(h))}}else{var u=e.docView.posFromDOM(r.anchorNode,r.anchorOffset);if(u<0)return null;a=n.resolve(u)}l||(l=Jc(e,a,c,"pointer"==t||e.state.selection.head<c.pos&&!o?1:-1));return l}function qc(e){return e.editable?e.hasFocus():Kc(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Uc(e,t){var r=e.state.selection;if(Wc(e,r),qc(e)){if(!t&&e.mouseDown&&e.mouseDown.allowDefault&&Nl.chrome){var n=e.root.getSelection(),i=e.domObserver.currentSelection;if(n.anchorNode&&Ul(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset))return e.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),r=document.createRange(),n=e.cursorWrapper.dom,i="IMG"==n.nodeName;i?r.setEnd(n.parentNode,Ll(n)+1):r.setEnd(n,0);r.collapse(!1),t.removeAllRanges(),t.addRange(r),!i&&!e.state.selection.visible&&Nl.ie&&Nl.ie_version<=11&&(n.disabled=!0,n.disabled=!1)}(e);else{var o,s,a=r.anchor,l=r.head;!jc||r instanceof hl||(r.$from.parent.inlineContent||(o=Vc(e,r.from)),r.empty||r.$from.parent.inlineContent||(s=Vc(e,r.to))),e.docView.setSelection(a,l,e.root,t),jc&&(o&&Hc(o),s&&Hc(s)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var r=e.root.getSelection(),n=r.anchorNode,i=r.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){r.anchorNode==n&&r.anchorOffset==i||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){qc(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}Bc.prototype.destroyBetween=function(e,t){if(e!=t){for(var r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}},Bc.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Bc.prototype.syncToMarks=function(e,t,r){for(var n=0,i=this.stack.length>>1,o=Math.min(i,e.length);n<o&&(n==i-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[i])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=xc.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}},Bc.prototype.findNodeMatch=function(e,t,r,n){var i,o=-1;if(n>=this.preMatch.index&&(i=this.preMatch.matches[n-this.preMatch.index]).parent==this.top&&i.matchesNode(e,t,r))o=this.top.children.indexOf(i,this.index);else for(var s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){var l=this.top.children[s];if(l.matchesNode(e,t,r)&&!this.preMatch.matched.has(l)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},Bc.prototype.updateNodeAt=function(e,t,r,n,i){return!!this.top.children[n].update(e,t,r,i)&&(this.destroyBetween(this.index,n),this.index=n+1,!0)},Bc.prototype.findIndexWithChild=function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var r=e.pmViewDesc;if(r)for(var n=this.index;n<this.top.children.length;n++)if(this.top.children[n]==r)return n;return-1}e=t}},Bc.prototype.updateNextNode=function(e,t,r,n,i){for(var o=this.index;o<this.top.children.length;o++){var s=this.top.children[o];if(s instanceof kc){var a=this.preMatch.matched.get(s);if(null!=a&&a!=i)return!1;var l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&zc(t,s.outerDeco)))&&s.update(e,t,r,n))return this.destroyBetween(this.index,o),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},Bc.prototype.addNode=function(e,t,r,n,i){this.top.children.splice(this.index++,0,kc.create(this.top,e,t,r,n,i)),this.changed=!0},Bc.prototype.placeWidget=function(e,t,r){var n=this.index<this.top.children.length?this.top.children[this.index]:null;if(!n||!n.matchesWidget(e)||e!=n.widget&&n.widget.type.toDOM.parentNode){var i=new bc(this.top,e,t,r);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++},Bc.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof xc;)e=e.children[e.children.length-1];e&&e instanceof _c&&!/\n$/.test(e.node.text)||((Nl.safari||Nl.chrome)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},Bc.prototype.addHackNode=function(e){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(e))this.index++;else{var t=document.createElement(e);"IMG"==e&&(t.className="ProseMirror-separator"),"BR"==e&&(t.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new Cc(this.top,vc,t,null)),this.changed=!0}};var jc=Nl.safari||Nl.chrome&&Nl.chrome_version<63;function Vc(e,t){var r=e.docView.domFromPos(t,0),n=r.node,i=r.offset,o=i<n.childNodes.length?n.childNodes[i]:null,s=i?n.childNodes[i-1]:null;if(Nl.safari&&o&&"false"==o.contentEditable)return $c(o);if(!(o&&"false"!=o.contentEditable||s&&"false"!=s.contentEditable)){if(o)return $c(o);if(s)return $c(s)}}function $c(e){return e.contentEditable="true",Nl.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Hc(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Wc(e,t){if(t instanceof dl){var r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(Gc(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else Gc(e)}function Gc(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Jc(e,t,r,n){return e.someProp("createSelectionBetween",(function(n){return n(e,t,r)}))||hl.between(t,r,n)}function Kc(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(r){return!1}}function Yc(e,t){var r=e.selection,n=r.$anchor,i=r.$head,o=t>0?n.max(i):n.min(i),s=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return s&&al.findFrom(s,t)}function Xc(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Zc(e,t,r){var n=e.state.selection;if(!(n instanceof hl)){if(n instanceof dl&&n.node.isInline)return Xc(e,new hl(t>0?n.$to:n.$from));var i=Yc(e.state,t);return!!i&&Xc(e,i)}if(!n.empty||r.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var o=Yc(e.state,t);return!!(o&&o instanceof dl)&&Xc(e,o)}if(!(Nl.mac&&r.indexOf("m")>-1)){var s,a=n.$head,l=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var c=t<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(s=e.docView.descAt(c))&&!s.contentDOM)&&(dl.isSelectable(l)?Xc(e,new dl(t<0?e.state.doc.resolve(a.pos-l.nodeSize):a)):!!Nl.webkit&&Xc(e,new hl(e.state.doc.resolve(t<0?c:c+l.nodeSize))))}}function Qc(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function eh(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function th(e){var t=e.root.getSelection(),r=t.focusNode,n=t.focusOffset;if(r){var i,o,s=!1;for(Nl.gecko&&1==r.nodeType&&n<Qc(r)&&eh(r.childNodes[n])&&(s=!0);;)if(n>0){if(1!=r.nodeType)break;var a=r.childNodes[n-1];if(eh(a))i=r,o=--n;else{if(3!=a.nodeType)break;n=(r=a).nodeValue.length}}else{if(nh(r))break;for(var l=r.previousSibling;l&&eh(l);)i=r.parentNode,o=Ll(l),l=l.previousSibling;if(l)n=Qc(r=l);else{if((r=r.parentNode)==e.dom)break;n=0}}s?ih(e,t,r,n):i&&ih(e,t,i,o)}}function rh(e){var t=e.root.getSelection(),r=t.focusNode,n=t.focusOffset;if(r){for(var i,o,s=Qc(r);;)if(n<s){if(1!=r.nodeType)break;if(!eh(r.childNodes[n]))break;i=r,o=++n}else{if(nh(r))break;for(var a=r.nextSibling;a&&eh(a);)i=a.parentNode,o=Ll(a)+1,a=a.nextSibling;if(a)n=0,s=Qc(r=a);else{if((r=r.parentNode)==e.dom)break;n=s=0}}i&&ih(e,t,i,o)}}function nh(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function ih(e,t,r,n){if(Wl(t)){var i=document.createRange();i.setEnd(r,n),i.setStart(r,n),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(r,n);e.domObserver.setCurSelection();var o=e.state;setTimeout((function(){e.state==o&&Uc(e)}),50)}function oh(e,t,r){var n=e.state.selection;if(n instanceof hl&&!n.empty||r.indexOf("s")>-1)return!1;if(Nl.mac&&r.indexOf("m")>-1)return!1;var i=n.$from,o=n.$to;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=Yc(e.state,t);if(s&&s instanceof dl)return Xc(e,s)}if(!i.parent.inlineContent){var a=t<0?i:o,l=n instanceof fl?al.near(a,t):al.findFrom(a,t);return!!l&&Xc(e,l)}return!1}function sh(e,t){if(!(e.state.selection instanceof hl))return!0;var r=e.state.selection,n=r.$head,i=r.$anchor,o=r.empty;if(!n.sameParent(i))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){var a=e.state.tr;return t<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),e.dispatch(a),!0}return!1}function ah(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function lh(e,t){var r=t.keyCode,n=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==r||Nl.mac&&72==r&&"c"==n?sh(e,-1)||th(e):46==r||Nl.mac&&68==r&&"c"==n?sh(e,1)||rh(e):13==r||27==r||(37==r?Zc(e,-1,n)||th(e):39==r?Zc(e,1,n)||rh(e):38==r?oh(e,-1,n)||th(e):40==r?function(e){if(Nl.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),r=t.focusNode,n=t.focusOffset;if(r&&1==r.nodeType&&0==n&&r.firstChild&&"false"==r.firstChild.contentEditable){var i=r.firstChild;ah(e,i,!0),setTimeout((function(){return ah(e,i,!1)}),20)}}}(e)||oh(e,1,n)||rh(e):n==(Nl.mac?"m":"c")&&(66==r||73==r||89==r||90==r))}function ch(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Nl.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}if(e.parentNode.lastChild==e||Nl.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function hh(e,t,r,n,i){if(t<0){var o=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,s=Fc(e,o);if(s&&!e.state.selection.eq(s)){var a=e.state.tr.setSelection(s);"pointer"==o?a.setMeta("pointer",!0):"key"==o&&a.scrollIntoView(),e.dispatch(a)}}else{var l=e.state.doc.resolve(t),c=l.sharedDepth(r);t=l.before(c+1),r=e.state.doc.resolve(r).after(c+1);var h=e.state.selection,u=function(e,t,r){var n=e.docView.parseRange(t,r),i=n.node,o=n.fromOffset,s=n.toOffset,a=n.from,l=n.to,c=e.root.getSelection(),h=null,u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(h=[{node:u,offset:c.anchorOffset}],Wl(c)||h.push({node:c.focusNode,offset:c.focusOffset})),Nl.chrome&&8===e.lastKeyCode)for(var d=s;d>o;d--){var p=i.childNodes[d-1],f=p.pmViewDesc;if("BR"==p.nodeName&&!f){s=d;break}if(!f||f.size)break}var m=e.state.doc,g=e.someProp("domParser")||va.fromSchema(e.state.schema),y=m.resolve(a),v=null,b=g.parse(i,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=y.parent.type.whitespace||"full",editableContent:!0,findPositions:h,ruleFromNode:ch,context:y});if(h&&null!=h[0].pos){var w=h[0].pos,x=h[1]&&h[1].pos;null==x&&(x=w),v={anchor:w+a,head:x+a}}return{doc:b,sel:v,from:a,to:l}}(e,t,r);if(Nl.chrome&&e.cursorWrapper&&u.sel&&u.sel.anchor==e.cursorWrapper.deco.from){var d=e.cursorWrapper.deco.type.toDOM.nextSibling,p=d&&d.nodeValue?d.nodeValue.length:1;u.sel={anchor:u.sel.anchor+p,head:u.sel.anchor+p}}var f,m,g=e.state.doc,y=g.slice(u.from,u.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(f=e.state.selection.to,m="end"):(f=e.state.selection.from,m="start"),e.lastKeyCode=null;var v=function(e,t,r,n,i){var o=e.findDiffStart(t,r);if(null==o)return null;var s=e.findDiffEnd(t,r+e.size,r+t.size),a=s.a,l=s.b;if("end"==i){n-=a+Math.max(0,o-Math.min(a,l))-o}if(a<o&&e.size<t.size){l=(o-=n<=o&&n>=a?o-n:0)+(l-a),a=o}else if(l<o){a=(o-=n<=o&&n>=l?o-n:0)+(a-l),l=o}return{start:o,endA:a,endB:l}}(y.content,u.doc.content,u.from,f,m);if(!v){if(!(n&&h instanceof hl&&!h.empty&&h.$head.sameParent(h.$anchor))||e.composing||u.sel&&u.sel.anchor!=u.sel.head){if((Nl.ios&&e.lastIOSEnter>Date.now()-225||Nl.android)&&i.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,Gl(13,"Enter"))})))return void(e.lastIOSEnter=0);if(u.sel){var b=uh(e,e.state.doc,u.sel);b&&!b.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(b))}return}v={start:h.from,endA:h.to,endB:h.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof hl&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),Nl.ie&&Nl.ie_version<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>u.from&&"  "==u.doc.textBetween(v.start-u.from-1,v.start-u.from+1)&&(v.start--,v.endA--,v.endB--);var w,x=u.doc.resolveNoCache(v.start-u.from),k=u.doc.resolveNoCache(v.endB-u.from),S=x.sameParent(k)&&x.parent.inlineContent;if((Nl.ios&&e.lastIOSEnter>Date.now()-225&&(!S||i.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!S&&x.pos<u.doc.content.size&&(w=al.findFrom(u.doc.resolve(x.pos+1),1,!0))&&w.head==k.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,Gl(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>v.start&&function(e,t,r,n,i){if(!n.parent.isTextblock||r-t<=i.pos-n.pos||dh(n,!0,!1)<i.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=e.resolve(dh(o,!0,!0));if(!s.parent.isTextblock||s.pos>r||dh(s,!0,!1)<r)return!1;return n.parent.content.cut(n.parentOffset).eq(s.parent.content)}(g,v.start,v.endA,x,k)&&e.someProp("handleKeyDown",(function(t){return t(e,Gl(8,"Backspace"))})))Nl.android&&Nl.chrome&&e.domObserver.suppressSelectionUpdates();else{Nl.chrome&&Nl.android&&v.toB==v.from&&(e.lastAndroidDelete=Date.now()),Nl.android&&!S&&x.start()!=k.start()&&0==k.parentOffset&&x.depth==k.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==v.endA&&(v.endB-=2,k=u.doc.resolveNoCache(v.endB-u.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,Gl(13,"Enter"))}))}),20));var _,C,T,M,A=v.start,E=v.endA;if(S)if(x.pos==k.pos)Nl.ie&&Nl.ie_version<=11&&0==x.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Uc(e)}),20)),_=e.state.tr.delete(A,E),C=g.resolve(v.start).marksAcross(g.resolve(v.endA));else if(v.endA==v.endB&&(M=g.resolve(v.start))&&(T=function(e,t){for(var r,n,i,o=e.firstChild.marks,s=t.firstChild.marks,a=o,l=s,c=0;c<s.length;c++)a=s[c].removeFromSet(a);for(var h=0;h<o.length;h++)l=o[h].removeFromSet(l);if(1==a.length&&0==l.length)n=a[0],r="add",i=function(e){return e.mark(n.addToSet(e.marks))};else{if(0!=a.length||1!=l.length)return null;n=l[0],r="remove",i=function(e){return e.mark(n.removeFromSet(e.marks))}}for(var u=[],d=0;d<t.childCount;d++)u.push(i(t.child(d)));if(bs.from(u).eq(e))return{mark:n,type:r}}(x.parent.content.cut(x.parentOffset,k.parentOffset),M.parent.content.cut(M.parentOffset,v.endA-M.start()))))_=e.state.tr,"add"==T.type?_.addMark(A,E,T.mark):_.removeMark(A,E,T.mark);else if(x.parent.child(x.index()).isText&&x.index()==k.index()-(k.textOffset?0:1)){var O=x.parent.textBetween(x.parentOffset,k.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,A,E,O)})))return;_=e.state.tr.insertText(O,A,E)}if(_||(_=e.state.tr.replace(A,E,u.doc.slice(v.start-u.from,v.endB-u.from))),u.sel){var N=uh(e,_.doc,u.sel);N&&!(Nl.chrome&&Nl.android&&e.composing&&N.empty&&(v.start!=v.endB||e.lastAndroidDelete<Date.now()-100)&&(N.head==A||N.head==_.mapping.map(E)-1)||Nl.ie&&N.empty&&N.head==A)&&_.setSelection(N)}C&&_.ensureMarks(C),e.dispatch(_.scrollIntoView())}}}function uh(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:Jc(e,t.resolve(r.anchor),t.resolve(r.head))}function dh(e,t,r){for(var n=e.depth,i=t?e.end():e.pos;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,i++,t=!1;if(r)for(var o=e.node(n).maybeChild(e.indexAfter(n));o&&!o.isLeaf;)o=o.firstChild,i++;return i}function ph(e,t){for(var r=[],n=t.content,i=t.openStart,o=t.openEnd;i>1&&o>1&&1==n.childCount&&1==n.firstChild.childCount;){i--,o--;var s=n.firstChild;r.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),n=s.content}var a=e.someProp("clipboardSerializer")||Ea.fromSchema(e.state.schema),l=Sh(),c=l.createElement("div");c.appendChild(a.serializeFragment(n,{document:l}));for(var h,u=c.firstChild;u&&1==u.nodeType&&(h=xh[u.nodeName.toLowerCase()]);){for(var d=h.length-1;d>=0;d--){for(var p=l.createElement(h[d]);c.firstChild;)p.appendChild(c.firstChild);c.appendChild(p),"tbody"!=h[d]&&(i++,o++)}u=c.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",i+" "+o+" "+JSON.stringify(r)),{dom:c,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function fh(e,t,r,n,i){var o,s,a=i.parent.type.spec.code;if(!r&&!t)return null;var l=t&&(n||a||!r);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t,a||n)})),a)return t?new Ts(bs.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):Ts.empty;var c=e.someProp("clipboardTextParser",(function(e){return e(t,i,n)}));if(c)s=c;else{var h=i.marks(),u=e.state.schema,d=Ea.fromSchema(u);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((function(e){var t=o.appendChild(document.createElement("p"));e&&t.appendChild(d.serializeNode(u.text(e,h)))}))}}else e.someProp("transformPastedHTML",(function(e){r=e(r)})),o=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var r,n=Sh().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);(r=i&&xh[i[1].toLowerCase()])&&(e=r.map((function(e){return"<"+e+">"})).join("")+e+r.map((function(e){return"</"+e+">"})).reverse().join(""));if(n.innerHTML=e,r)for(var o=0;o<r.length;o++)n=n.querySelector(r[o])||n;return n}(r),Nl.webkit&&function(e){for(var t=e.querySelectorAll(Nl.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),r=0;r<t.length;r++){var n=t[r];1==n.childNodes.length&&" "==n.textContent&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}(o);var p=o&&o.querySelector("[data-pm-slice]"),f=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!s){var m=e.someProp("clipboardParser")||e.someProp("domParser")||va.fromSchema(e.state.schema);s=m.parseSlice(o,{preserveWhitespace:!(!l&&!f),context:i,ruleFromNode:function(e){if("BR"==e.nodeName&&!e.nextSibling&&e.parentNode&&!mh.test(e.parentNode.nodeName))return{ignore:!0}}})}if(f)s=function(e,t){if(!e.size)return e;var r,n=e.content.firstChild.type.schema;try{r=JSON.parse(t)}catch(c){return e}for(var i=e.content,o=e.openStart,s=e.openEnd,a=r.length-2;a>=0;a-=2){var l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=bs.from(l.create(r[a+1],i)),o++,s++}return new Ts(i,o,s)}(wh(s,+f[1],+f[2]),f[3]);else if(s=Ts.maxOpen(function(e,t){if(e.childCount<2)return e;for(var r=function(r){var n=t.node(r).contentMatchAt(t.index(r)),i=void 0,o=[];if(e.forEach((function(e){if(o){var t,r=n.findWrapping(e.type);if(!r)return o=null;if(t=o.length&&i.length&&yh(r,i,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=vh(o[o.length-1],i.length));var s=gh(e,r);o.push(s),n=n.matchType(s.type,s.attrs),i=r}}})),o)return{v:bs.from(o)}},n=t.depth;n>=0;n--){var i=r(n);if(i)return i.v}return e}(s.content,i),!0),s.openStart||s.openEnd){for(var g=0,y=0,v=s.content.firstChild;g<s.openStart&&!v.type.spec.isolating;g++,v=v.firstChild);for(var b=s.content.lastChild;y<s.openEnd&&!b.type.spec.isolating;y++,b=b.lastChild);s=wh(s,g,y)}return e.someProp("transformPasted",(function(e){s=e(s)})),s}var mh=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function gh(e,t,r){void 0===r&&(r=0);for(var n=t.length-1;n>=r;n--)e=t[n].create(null,bs.from(e));return e}function yh(e,t,r,n,i){if(i<e.length&&i<t.length&&e[i]==t[i]){var o=yh(e,t,r,n.lastChild,i+1);if(o)return n.copy(n.content.replaceChild(n.childCount-1,o));if(n.contentMatchAt(n.childCount).matchType(i==e.length-1?r.type:e[i+1]))return n.copy(n.content.append(bs.from(gh(r,e,i+1))))}}function vh(e,t){if(0==t)return e;var r=e.content.replaceChild(e.childCount-1,vh(e.lastChild,t-1)),n=e.contentMatchAt(e.childCount).fillBefore(bs.empty,!0);return e.copy(r.append(n))}function bh(e,t,r,n,i,o){var s=t<0?e.firstChild:e.lastChild,a=s.content;return i<n-1&&(a=bh(a,t,r,n,i+1,o)),i>=r&&(a=t<0?s.contentMatchAt(0).fillBefore(a,e.childCount>1||o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(bs.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function wh(e,t,r){return t<e.openStart&&(e=new Ts(bh(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new Ts(bh(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}var xh={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},kh=null;function Sh(){return kh||(kh=document.implementation.createHTMLDocument("title"))}var _h={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ch=Nl.ie&&Nl.ie_version<=11,Th=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Th.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Th.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Mh=function(e,t){var r=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)r.queue.push(e[t]);Nl.ie&&Nl.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?r.flushSoon():r.flush()})),this.currentSelection=new Th,Ch&&(this.onCharData=function(e){r.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Mh.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},Mh.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Mh.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,_h),Ch&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Mh.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var r=0;r<t.length;r++)this.queue.push(t[r]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Ch&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Mh.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Mh.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Mh.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Mh.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&Kc(e)){var e;if(this.suppressingSelectionUpdates)return Uc(this.view);if(Nl.ie&&Nl.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&Ul(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Mh.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Mh.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Mh.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Kc(this.view)&&!this.ignoreSelectionChange(t),n=-1,i=-1,o=!1,s=[];if(this.view.editable)for(var a=0;a<e.length;a++){var l=this.registerMutation(e[a],s);l&&(n=n<0?l.from:Math.min(l.from,n),i=i<0?l.to:Math.max(l.to,i),l.typeOver&&(o=!0))}if(Nl.gecko&&s.length>1){var c=s.filter((function(e){return"BR"==e.nodeName}));if(2==c.length){var h=c[0],u=c[1];h.parentNode&&h.parentNode.parentNode==u.parentNode?u.remove():h.remove()}}(n>-1||r)&&(n>-1&&(this.view.docView.markDirty(n,i),function(e){if(Ah)return;Ah=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(n,i,o,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Uc(this.view),this.currentSelection.set(t))}},Mh.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var r=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(r==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!r||r.ignoreMutation(e))return null;if("childList"==e.type){for(var n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};var i=e.previousSibling,o=e.nextSibling;if(Nl.ie&&Nl.ie_version<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var a=e.addedNodes[s],l=a.previousSibling,c=a.nextSibling;(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(i=l),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(o=c)}var h=i&&i.parentNode==e.target?Ll(i)+1:0,u=r.localPosFromDOM(e.target,h,-1),d=o&&o.parentNode==e.target?Ll(o):e.target.childNodes.length;return{from:u,to:r.localPosFromDOM(e.target,d,1)}}return"attributes"==e.type?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Ah=!1;var Eh={},Oh={};function Nh(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Rh(e){e.someProp("handleDOMEvents",(function(t){for(var r in t)e.eventHandlers[r]||e.dom.addEventListener(r,e.eventHandlers[r]=function(t){return Dh(e,t)})}))}function Dh(e,t){return e.someProp("handleDOMEvents",(function(r){var n=r[t.type];return!!n&&(n(e,t)||t.defaultPrevented)}))}function zh(e){return{left:e.clientX,top:e.clientY}}function Ih(e,t,r,n,i){if(-1==n)return!1;for(var o=e.state.doc.resolve(n),s=function(n){if(e.someProp(t,(function(t){return n>o.depth?t(e,r,o.nodeAfter,o.before(n),i,!0):t(e,r,o.node(n),o.before(n),i,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function Bh(e,t,r){e.focused||e.focus();var n=e.state.tr.setSelection(t);"pointer"==r&&n.setMeta("pointer",!0),e.dispatch(n)}function Lh(e,t,r,n,i){return Ih(e,"handleClickOn",t,r,n)||e.someProp("handleClick",(function(r){return r(e,t,n)}))||(i?function(e,t){if(-1==t)return!1;var r,n,i=e.state.selection;i instanceof dl&&(r=i.node);for(var o=e.state.doc.resolve(t),s=o.depth+1;s>0;s--){var a=s>o.depth?o.nodeAfter:o.node(s);if(dl.isSelectable(a)){n=r&&i.$from.depth>0&&s>=i.$from.depth&&o.before(i.$from.depth+1)==i.$from.pos?o.before(i.$from.depth):o.before(s);break}}return null!=n&&(Bh(e,dl.create(e.state.doc,n),"pointer"),!0)}(e,r):function(e,t){if(-1==t)return!1;var r=e.state.doc.resolve(t),n=r.nodeAfter;return!!(n&&n.isAtom&&dl.isSelectable(n))&&(Bh(e,new dl(r),"pointer"),!0)}(e,r))}function Ph(e,t,r,n){return Ih(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",(function(r){return r(e,t,n)}))}function Fh(e,t,r,n){return Ih(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",(function(r){return r(e,t,n)}))||function(e,t,r){if(0!=r.button)return!1;var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(Bh(e,hl.create(n,0,n.content.size),"pointer"),!0);for(var i=n.resolve(t),o=i.depth+1;o>0;o--){var s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Bh(e,hl.create(n,a+1,a+1+s.content.size),"pointer");else{if(!dl.isSelectable(s))continue;Bh(e,dl.create(n,a),"pointer")}return!0}}(e,r,n)}function qh(e){return Gh(e)}Oh.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!Vh(e,t)&&(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!Nl.android||!Nl.chrome||13!=t.keyCode))if(229!=t.keyCode&&e.domObserver.forceFlush(),!Nl.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(r){return r(e,t)}))||lh(e,t)?t.preventDefault():Nh(e,"key");else{var r=Date.now();e.lastIOSEnter=r,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==r&&(e.someProp("handleKeyDown",(function(t){return t(e,Gl(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},Oh.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Oh.keypress=function(e,t){if(!(Vh(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||Nl.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(r){return r(e,t)})))t.preventDefault();else{var r=e.state.selection;if(!(r instanceof hl&&r.$from.sameParent(r.$to))){var n=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,r.$from.pos,r.$to.pos,n)}))||e.dispatch(e.state.tr.insertText(n).scrollIntoView()),t.preventDefault()}}};var Uh=Nl.mac?"metaKey":"ctrlKey";Eh.mousedown=function(e,t){e.shiftKey=t.shiftKey;var r=qh(e),n=Date.now(),i="singleClick";n-e.lastClick.time<500&&function(e,t){var r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}(t,e.lastClick)&&!t[Uh]&&("singleClick"==e.lastClick.type?i="doubleClick":"doubleClick"==e.lastClick.type&&(i="tripleClick")),e.lastClick={time:n,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(zh(t));o&&("singleClick"==i?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new jh(e,o,t,r)):("doubleClick"==i?Ph:Fh)(e,o.pos,o.inside,t)?t.preventDefault():Nh(e,"pointer"))};var jh=function(e,t,r,n){var i,o,s=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=r,this.flushed=n,this.selectNode=r[Uh],this.allowDefault=r.shiftKey,this.delayedSelectionSync=!1,t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{var a=e.state.doc.resolve(t.pos);i=a.parent,o=a.depth?a.before():0}this.mightDrag=null;var l=n?null:r.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null;var h=e.state.selection;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||h instanceof dl&&h.from<=o&&h.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&Nl.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){s.view.mouseDown==s&&s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Nh(e,"pointer")};function Vh(e,t){return!!e.composing||!!(Nl.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}jh.prototype.done=function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return Uc(e.view)})),this.view.mouseDown=null},jh.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(zh(e))),this.allowDefault||!t?Nh(this.view,"pointer"):Lh(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||Nl.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||Nl.chrome&&!(this.view.state.selection instanceof hl)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Bh(this.view,al.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Nh(this.view,"pointer")}},jh.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Nh(this.view,"pointer"),0==e.buttons&&this.done()},Eh.touchdown=function(e){qh(e),Nh(e,"pointer")},Eh.contextmenu=function(e){return qh(e)};var $h=Nl.android?5e3:-1;function Hh(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return Gh(e)}),t))}function Wh(e){var t;for(e.composing&&(e.composing=!1,e.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function Gh(e,t){if(!(Nl.android&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Wh(e),t||e.docView.dirty){var r=Fc(e);return r&&!r.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(r)):e.updateState(e.state),!0}return!1}}Oh.compositionstart=Oh.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,r=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||r.marks(),Gh(e,!0),e.markCursor=null;else if(Gh(e),Nl.gecko&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length)for(var n=e.root.getSelection(),i=n.focusNode,o=n.focusOffset;i&&1==i.nodeType&&0!=o;){var s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(3==s.nodeType){n.collapse(s,s.nodeValue.length);break}i=s,o=-1}e.composing=!0}Hh(e,$h)},Oh.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Hh(e,20))};var Jh=Nl.ie&&Nl.ie_version<15||Nl.ios&&Nl.webkit_version<604;function Kh(e,t,r,n){var i=fh(e,t,r,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,n,i||Ts.empty)})))return!0;if(!i)return!1;var o=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),s=o?e.state.tr.replaceSelectionWith(o,e.shiftKey):e.state.tr.replaceSelection(i);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Eh.copy=Oh.cut=function(e,t){var r=e.state.selection,n="cut"==t.type;if(!r.empty){var i=Jh?null:t.clipboardData,o=ph(e,r.content()),s=o.dom,a=o.text;i?(t.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",a)):function(e,t){if(e.dom.parentNode){var r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var n=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout((function(){r.parentNode&&r.parentNode.removeChild(r),e.focus()}),50)}}(e,s),n&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Oh.paste=function(e,t){if(!e.composing||Nl.android){var r=Jh?null:t.clipboardData;r&&Kh(e,r.getData("text/plain"),r.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var r=e.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?Kh(e,n.value,null,t):Kh(e,n.textContent,n.innerHTML,t)}),50)}}(e,t)}};var Yh=function(e,t){this.slice=e,this.move=t},Xh=Nl.mac?"altKey":"ctrlKey";for(var Zh in Eh.dragstart=function(e,t){var r=e.mouseDown;if(r&&r.done(),t.dataTransfer){var n=e.state.selection,i=n.empty?null:e.posAtCoords(zh(t));if(i&&i.pos>=n.from&&i.pos<=(n instanceof dl?n.to-1:n.to));else if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(dl.create(e.state.doc,r.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var o=e.docView.nearestDesc(t.target,!0);o&&o.node.type.spec.draggable&&o!=e.docView&&e.dispatch(e.state.tr.setSelection(dl.create(e.state.doc,o.posBefore)))}var s=e.state.selection.content(),a=ph(e,s),l=a.dom,c=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Jh?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Jh||t.dataTransfer.setData("text/plain",c),e.dragging=new Yh(s,!t[Xh])}},Eh.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},Oh.dragover=Oh.dragenter=function(e,t){return t.preventDefault()},Oh.drop=function(e,t){var r=e.dragging;if(e.dragging=null,t.dataTransfer){var n=e.posAtCoords(zh(t));if(n){var i=e.state.doc.resolve(n.pos);if(i){var o=r&&r.slice;o?e.someProp("transformPasted",(function(e){o=e(o)})):o=fh(e,t.dataTransfer.getData(Jh?"Text":"text/plain"),Jh?null:t.dataTransfer.getData("text/html"),!1,i);var s=r&&!t[Xh];if(e.someProp("handleDrop",(function(r){return r(e,t,o||Ts.empty,s)})))t.preventDefault();else if(o){t.preventDefault();var a=o?function(e,t,r){var n=e.resolve(t);if(!r.content.size)return t;for(var i=r.content,o=0;o<r.openStart;o++)i=i.firstChild.content;for(var s=1;s<=(0==r.openStart&&r.size?2:1);s++)for(var a=n.depth;a>=0;a--){var l=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,c=n.index(a)+(l>0?1:0),h=n.node(a),u=!1;if(1==s)u=h.canReplace(c,c,i);else{var d=h.contentMatchAt(c).findWrapping(i.firstChild.type);u=d&&h.canReplaceWith(c,c,d[0])}if(u)return 0==l?n.pos:l<0?n.before(a+1):n.after(a+1)}return null}(e.state.doc,i.pos,o):i.pos;null==a&&(a=i.pos);var l=e.state.tr;s&&l.deleteSelection();var c=l.mapping.map(a),h=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,u=l.doc;if(h?l.replaceRangeWith(c,c,o.content.firstChild):l.replaceRange(c,c,o),!l.doc.eq(u)){var d=l.doc.resolve(c);if(h&&dl.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new dl(d));else{var p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((function(e,t,r,n){return p=n})),l.setSelection(Jc(e,d,l.doc.resolve(p)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}},Eh.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Uc(e)}),20))},Eh.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.set({}),e.focused=!1)},Eh.beforeinput=function(e,t){if(Nl.chrome&&Nl.android&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();var r=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==r&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,Gl(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},Oh)Eh[Zh]=Oh[Zh];function Qh(e,t){if(e==t)return!0;for(var r in e)if(e[r]!==t[r])return!1;for(var n in t)if(!(n in e))return!1;return!0}var eu=function(e,t){this.spec=t||su,this.side=this.spec.side||0,this.toDOM=e};eu.prototype.map=function(e,t,r,n){var i=e.mapResult(t.from+n,this.side<0?-1:1),o=i.pos;return i.deleted?null:new nu(o-r,o-r,this)},eu.prototype.valid=function(){return!0},eu.prototype.eq=function(e){return this==e||e instanceof eu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Qh(this.spec,e.spec))},eu.prototype.destroy=function(e){this.spec.destroy&&this.spec.destroy(e)};var tu=function(e,t){this.spec=t||su,this.attrs=e};tu.prototype.map=function(e,t,r,n){var i=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new nu(i,o,this)},tu.prototype.valid=function(e,t){return t.from<t.to},tu.prototype.eq=function(e){return this==e||e instanceof tu&&Qh(this.attrs,e.attrs)&&Qh(this.spec,e.spec)},tu.is=function(e){return e.type instanceof tu};var ru=function(e,t){this.spec=t||su,this.attrs=e};ru.prototype.map=function(e,t,r,n){var i=e.mapResult(t.from+n,1);if(i.deleted)return null;var o=e.mapResult(t.to+n,-1);return o.deleted||o.pos<=i.pos?null:new nu(i.pos-r,o.pos-r,this)},ru.prototype.valid=function(e,t){var r,n=e.content.findIndex(t.from),i=n.index,o=n.offset;return o==t.from&&!(r=e.child(i)).isText&&o+r.nodeSize==t.to},ru.prototype.eq=function(e){return this==e||e instanceof ru&&Qh(this.attrs,e.attrs)&&Qh(this.spec,e.spec)};var nu=function(e,t,r){this.from=e,this.to=t,this.type=r},iu={spec:{configurable:!0},inline:{configurable:!0}};nu.prototype.copy=function(e,t){return new nu(e,t,this.type)},nu.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},nu.prototype.map=function(e,t,r){return this.type.map(e,this,t,r)},nu.widget=function(e,t,r){return new nu(e,e,new eu(t,r))},nu.inline=function(e,t,r,n){return new nu(e,t,new tu(r,n))},nu.node=function(e,t,r,n){return new nu(e,t,new ru(r,n))},iu.spec.get=function(){return this.type.spec},iu.inline.get=function(){return this.type instanceof tu},Object.defineProperties(nu.prototype,iu);var ou=[],su={},au=function(e,t){this.local=e&&e.length?e:ou,this.children=t&&t.length?t:ou};au.create=function(e,t){return t.length?pu(t,e,0,su):lu},au.prototype.find=function(e,t,r){var n=[];return this.findInner(null==e?0:e,null==t?1e9:t,n,0,r),n},au.prototype.findInner=function(e,t,r,n,i){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&r.push(s.copy(s.from+n,s.to+n))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,r,n+l,i)}},au.prototype.map=function(e,t,r){return this==lu||0==e.maps.length?this:this.mapInner(e,t,0,0,r||su)},au.prototype.mapInner=function(e,t,r,n,i){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(e,r,n);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(e,t,r,n,i,o,s){for(var a=e.slice(),l=function(e,t,r,n){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||e>l+o||(t>=a[s]+o?a[s+1]=-1:r>=i&&(c=n-r-(t-e))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<r.maps.length;c++)r.maps[c].forEach(l);for(var h=!1,u=0;u<a.length;u+=3)if(-1==a[u+1]){var d=r.map(e[u]+o),p=d-i;if(p<0||p>=n.content.size){h=!0;continue}var f=r.map(e[u+1]+o,-1)-i,m=n.content.findIndex(p),g=m.index,y=m.offset,v=n.maybeChild(g);if(v&&y==p&&y+v.nodeSize==f){var b=a[u+2].mapInner(r,v,d+1,e[u]+o+1,s);b!=lu?(a[u]=p,a[u+1]=f,a[u+2]=b):(a[u+1]=-2,h=!0)}else h=!0}if(h){var w=function(e,t,r,n,i,o,s){function a(e,t){for(var o=0;o<e.local.length;o++){var l=e.local[o].map(n,i,t);l?r.push(l):s.onRemove&&s.onRemove(e.local[o].spec)}for(var c=0;c<e.children.length;c+=3)a(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+o+1);return r}(a,e,t||[],r,i,o,s),x=pu(w,n,0,s);t=x.local;for(var k=0;k<a.length;k+=3)a[k+1]<0&&(a.splice(k,3),k-=3);for(var S=0,_=0;S<x.children.length;S+=3){for(var C=x.children[S];_<a.length&&a[_]<C;)_+=3;a.splice(_,0,x.children[S],x.children[S+1],x.children[S+2])}}return new au(t&&t.sort(fu),a)}(this.children,o,e,t,r,n,i):o?new au(o.sort(fu)):lu},au.prototype.add=function(e,t){return t.length?this==lu?au.create(e,t):this.addInner(e,t,0):this},au.prototype.addInner=function(e,t,r){var n,i=this,o=0;e.forEach((function(e,s){var a,l=s+r;if(a=uu(t,e,l)){for(n||(n=i.children.slice());o<n.length&&n[o]<s;)o+=3;n[o]==s?n[o+2]=n[o+2].addInner(e,a,l+1):n.splice(o,0,s,s+e.nodeSize,pu(a,e,l+1,su)),o+=3}}));for(var s=hu(o?du(t):t,-r),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new au(s.length?this.local.concat(s).sort(fu):this.local,n||this.children)},au.prototype.remove=function(e){return 0==e.length||this==lu?this:this.removeInner(e,0)},au.prototype.removeInner=function(e,t){for(var r=this.children,n=this.local,i=0;i<r.length;i+=3){for(var o=void 0,s=r[i]+t,a=r[i+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>s&&c.to<a&&(e[l]=null,(o||(o=[])).push(c));if(o){r==this.children&&(r=this.children.slice());var h=r[i+2].removeInner(o,s+1);h!=lu?r[i+2]=h:(r.splice(i,3),i-=3)}}if(n.length)for(var u=0,d=void 0;u<e.length;u++)if(d=e[u])for(var p=0;p<n.length;p++)n[p].eq(d,t)&&(n==this.local&&(n=this.local.slice()),n.splice(p--,1));return r==this.children&&n==this.local?this:n.length||r.length?new au(n,r):lu},au.prototype.forChild=function(e,t){if(this==lu)return this;if(t.isLeaf)return au.empty;for(var r,n,i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(r=this.children[i+2]);break}for(var o=e+1,s=o+t.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof tu){var c=Math.max(o,l.from)-o,h=Math.min(s,l.to)-o;c<h&&(n||(n=[])).push(l.copy(c,h))}}if(n){var u=new au(n.sort(fu));return r?new cu([u,r]):u}return r||lu},au.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof au)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0},au.prototype.locals=function(e){return mu(this.localsInner(e))},au.prototype.localsInner=function(e){if(this==lu)return ou;if(e.inlineContent||!this.local.some(tu.is))return this.local;for(var t=[],r=0;r<this.local.length;r++)this.local[r].type instanceof tu||t.push(this.local[r]);return t};var lu=new au;au.empty=lu,au.removeOverlap=mu;var cu=function(e){this.members=e};function hu(e,t){if(!t||!e.length)return e;for(var r=[],n=0;n<e.length;n++){var i=e[n];r.push(new nu(i.from+t,i.to+t,i.type))}return r}function uu(e,t,r){if(t.isLeaf)return null;for(var n=r+t.nodeSize,i=null,o=0,s=void 0;o<e.length;o++)(s=e[o])&&s.from>r&&s.to<n&&((i||(i=[])).push(s),e[o]=null);return i}function du(e){for(var t=[],r=0;r<e.length;r++)null!=e[r]&&t.push(e[r]);return t}function pu(e,t,r,n){var i=[],o=!1;t.forEach((function(t,s){var a=uu(e,t,s+r);if(a){o=!0;var l=pu(a,t,r+s+1,n);l!=lu&&i.push(s,s+t.nodeSize,l)}}));for(var s=hu(o?du(e):e,-r).sort(fu),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new au(s,i):lu}function fu(e,t){return e.from-t.from||e.to-t.to}function mu(e){for(var t=e,r=0;r<t.length-1;r++){var n=t[r];if(n.from!=n.to)for(var i=r+1;i<t.length;i++){var o=t[i];if(o.from!=n.from){o.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,o.from),gu(t,i,n.copy(o.from,n.to)));break}o.to!=n.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,n.to),gu(t,i+1,o.copy(n.to,o.to)))}}return t}function gu(e,t,r){for(;t<e.length&&fu(r,e[t])>0;)t++;e.splice(t,0,r)}function yu(e){var t=[];return e.someProp("decorations",(function(r){var n=r(e.state);n&&n!=lu&&t.push(n)})),e.cursorWrapper&&t.push(au.create(e.state.doc,[e.cursorWrapper.deco])),cu.from(t)}cu.prototype.map=function(e,t){var r=this.members.map((function(r){return r.map(e,t,su)}));return cu.from(r)},cu.prototype.forChild=function(e,t){if(t.isLeaf)return au.empty;for(var r=[],n=0;n<this.members.length;n++){var i=this.members[n].forChild(e,t);i!=lu&&(i instanceof cu?r=r.concat(i.members):r.push(i))}return cu.from(r)},cu.prototype.eq=function(e){if(!(e instanceof cu)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},cu.prototype.locals=function(e){for(var t,r=!0,n=0;n<this.members.length;n++){var i=this.members[n].localsInner(e);if(i.length)if(t){r&&(t=t.slice(),r=!1);for(var o=0;o<i.length;o++)t.push(i[o])}else t=i}return t?mu(r?t:t.sort(fu)):ou},cu.from=function(e){switch(e.length){case 0:return lu;case 1:return e[0];default:return new cu(e)}};var vu=function(e,t){this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(_u),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ku(this),this.markCursor=null,this.cursorWrapper=null,xu(this),this.nodeViews=Su(this),this.docView=Sc(this.state.doc,wu(this),yu(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Mh(e,(function(t,r,n,i){return hh(e,t,r,n,i)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var r=Eh[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var r=t.target;r!=e.dom;r=r.parentNode)if(!r||11==r.nodeType||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Dh(e,t)||!e.editable&&t.type in Oh||r(e,t)})};for(var r in Eh)t(r);Nl.safari&&e.dom.addEventListener("input",(function(){return null})),Rh(e)}(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},bu={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};function wu(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",(function(r){if("function"==typeof r&&(r=r(e.state)),r)for(var n in r)"class"==n&&(t.class+=" "+r[n]),"style"==n?t.style=(t.style?t.style+";":"")+r[n]:t[n]||"contenteditable"==n||"nodeName"==n||(t[n]=String(r[n]))})),[nu.node(0,e.state.doc.content.size,t)]}function xu(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:nu.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function ku(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Su(e){var t={};return e.someProp("nodeViews",(function(e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r])})),t}function _u(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}bu.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},vu.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Rh(this),this._props=e,e.plugins&&(e.plugins.forEach(_u),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)},vu.prototype.setProps=function(e){var t={};for(var r in this._props)t[r]=this._props[r];for(var n in t.state=this.state,e)t[n]=e[n];this.update(t)},vu.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},vu.prototype.updateStateInner=function(e,t){var r=this,n=this.state,i=!1,o=!1;if(e.storedMarks&&this.composing&&(Wh(this),o=!0),this.state=e,t){var s=Su(this);(function(e,t){var r=0,n=0;for(var i in e){if(e[i]!=t[i])return!0;r++}for(var o in t)n++;return r!=n})(s,this.nodeViews)&&(this.nodeViews=s,i=!0),Rh(this)}this.editable=ku(this),xu(this);var a=yu(this),l=wu(this),c=t?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",h=i||!this.docView.matchesNode(e.doc,l,a);!h&&e.selection.eq(n.selection)||(o=!0);var u,d,p,f,m,g,y,v,b,w,x,k="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&function(e){for(var t,r,n=e.dom.getBoundingClientRect(),i=Math.max(0,n.top),o=(n.left+n.right)/2,s=i+1;s<Math.min(innerHeight,n.bottom);s+=5){var a=e.root.elementFromPoint(o,s);if(a!=e.dom&&e.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=i-20){t=a,r=l.top;break}}}return{refDOM:t,refTop:r,stack:Zl(e.dom)}}(this);if(o){this.domObserver.stop();var S=h&&(Nl.ie||Nl.chrome)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&(f=n.selection,m=e.selection,g=Math.min(f.$anchor.sharedDepth(f.head),m.$anchor.sharedDepth(m.head)),f.$anchor.start(g)!=m.$anchor.start(g));if(h){var _=Nl.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Sc(e.doc,l,a,this.dom,this)),_&&!this.trackWrites&&(S=!0)}S||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(u=this,d=u.docView.domFromPos(u.state.selection.anchor,0),p=u.root.getSelection(),Ul(d.node,d.offset,p.anchorNode,p.anchorOffset)))?Uc(this,S):(Wc(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(n),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var C=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(r)}))||(e.selection instanceof dl?Xl(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),C):Xl(this,this.coordsAtPos(e.selection.head,1),C))}else k&&(v=(y=k).refDOM,b=y.refTop,w=y.stack,x=v?v.getBoundingClientRect().top:0,Ql(w,0==x?0:x-b))},vu.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},vu.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var r=this.pluginViews[t];r.update&&r.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var n=0;n<this.directPlugins.length;n++){var i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(var o=0;o<this.state.plugins.length;o++){var s=this.state.plugins[o];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}},vu.prototype.someProp=function(e,t){var r,n=this._props&&this._props[e];if(null!=n&&(r=t?t(n):n))return r;for(var i=0;i<this.directPlugins.length;i++){var o=this.directPlugins[i].props[e];if(null!=o&&(r=t?t(o):o))return r}var s=this.state.plugins;if(s)for(var a=0;a<s.length;a++){var l=s[a].props[e];if(null!=l&&(r=t?t(l):l))return r}},vu.prototype.hasFocus=function(){return this.root.activeElement==this.dom},vu.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(ec)return e.focus(ec);var t=Zl(e);e.focus(null==ec?{get preventScroll(){return ec={preventScroll:!0},!0}}:void 0),ec||(ec=!1,Ql(t,0))}(this.dom),Uc(this),this.domObserver.start()},bu.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},vu.prototype.posAtCoords=function(e){return ic(this,e)},vu.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),ac(this,e,t)},vu.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},vu.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},vu.prototype.posAtDOM=function(e,t,r){void 0===r&&(r=-1);var n=this.docView.posFromDOM(e,t,r);if(null==n)throw new RangeError("DOM position not inside the editor");return n},vu.prototype.endOfTextblock=function(e,t){return mc(this,t||this.state,e)},vu.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],yu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},bu.isDestroyed.get=function(){return null==this.docView},vu.prototype.dispatchEvent=function(e){return function(e,t){Dh(e,t)||!Eh[t.type]||!e.editable&&t.type in Oh||Eh[t.type](e,t)}(this,e)},vu.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(vu.prototype,bu);for(var Cu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Tu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Mu="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Au="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),Eu="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Ou="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Nu="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ru=Mu&&(Ou||+Mu[1]<57)||Eu&&Ou,Du=0;Du<10;Du++)Cu[48+Du]=Cu[96+Du]=String(Du);for(Du=1;Du<=24;Du++)Cu[Du+111]="F"+Du;for(Du=65;Du<=90;Du++)Cu[Du]=String.fromCharCode(Du+32),Tu[Du]=String.fromCharCode(Du);for(var zu in Cu)Tu.hasOwnProperty(zu)||(Tu[zu]=Cu[zu]);var Iu="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Bu(e){var t,r,n,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))n=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);Iu?i=!0:r=!0}}return t&&(s="Alt-"+s),r&&(s="Ctrl-"+s),i&&(s="Meta-"+s),n&&(s="Shift-"+s),s}function Lu(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==r&&t.shiftKey&&(e="Shift-"+e),e}function Pu(e){return new Ml({props:{handleKeyDown:Fu(e)}})}function Fu(e){var t=function(e){var t=Object.create(null);for(var r in e)t[Bu(r)]=e[r];return t}(e);return function(e,r){var n,i=function(e){var t=!(Ru&&(e.ctrlKey||e.altKey||e.metaKey)||(Au||Nu)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?Tu:Cu)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(r),o=1==i.length&&" "!=i,s=t[Lu(i,r,!o)];if(s&&s(e.state,e.dispatch,e))return!0;if(o&&(r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(n=Cu[r.keyCode])&&n!=i){var a=t[Lu(n,r,!0)];if(a&&a(e.state,e.dispatch,e))return!0}else if(o&&r.shiftKey){var l=t[Lu(i,r,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}const qu=()=>new Map,Uu=e=>{const t=qu();return e.forEach(((e,r)=>{t.set(r,e)})),t},ju=(e,t,r)=>{let n=e.get(t);return void 0===n&&e.set(t,n=r()),n},Vu=()=>new Set,$u=e=>e[e.length-1],Hu=(e,t)=>{for(let r=0;r<t.length;r++)e.push(t[r])},Wu=Array.from;class Gu{constructor(){this._observers=qu()}on(e,t){ju(this._observers,e,Vu).add(t)}once(e,t){const r=(...n)=>{this.off(e,r),t(...n)};this.on(e,r)}off(e,t){const r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return Wu((this._observers.get(e)||qu()).values()).forEach((e=>e(...t)))}destroy(){this._observers=qu()}}const Ju=Math.floor,Ku=Math.abs,Yu=Math.log10,Xu=(e,t)=>e<t?e:t,Zu=(e,t)=>e>t?e:t,Qu=e=>0!==e?e<0:1/e<0,ed=String.fromCharCode,td=/^\s*/g,rd=/([A-Z])/g,nd=(e,t)=>(e=>e.replace(td,""))(e.replace(rd,(e=>`${t}${(e=>e.toLowerCase())(e)}`))),id="undefined"!=typeof TextEncoder?new TextEncoder:null,od=id?e=>id.encode(e):e=>{const t=unescape(encodeURIComponent(e)),r=t.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=t.codePointAt(i);return n};let sd="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});sd&&1===sd.decode(new Uint8Array).length&&(sd=null);const ad=e=>void 0===e?null:e;let ld=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},cd=!0;try{"undefined"!=typeof localStorage&&(ld=localStorage,cd=!1)}catch(hv){}const hd=ld,ud="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name),dd="undefined"!=typeof window&&!ud;let pd;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);const fd=e=>(()=>{if(void 0===pd)if(ud){pd=qu();const e=process.argv;let t=null;for(let r=0;r<e.length;r++){const n=e[r];"-"===n[0]?(null!==t&&pd.set(t,""),t=n):null!==t&&(pd.set(t,n),t=null)}null!==t&&pd.set(t,"")}else"object"==typeof location?(pd=qu(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,r]=e.split("=");pd.set(`--${nd(t,"-")}`,r),pd.set(`-${nd(t,"-")}`,r)}}))):pd=qu();return pd})().has(e),md=e=>ad(ud?process.env[e.toUpperCase()]:hd.getItem(e));var gd;fd("--"+(gd="production"))||md(gd);class yd{constructor(e){this.arr=e,this.pos=0}}const vd=e=>new yd(e),bd=e=>((e,t)=>{const r=Rd(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,r})(e,xd(e)),wd=e=>e.arr[e.pos++],xd=e=>{let t=0,r=0;for(;;){const n=e.arr[e.pos++];if(t|=(127&n)<<r,r+=7,n<128)return t>>>0;if(r>35)throw new Error("Integer out of range!")}},kd=e=>{let t=e.arr[e.pos++],r=63&t,n=6;const i=(64&t)>0?-1:1;if(0==(128&t))return i*r;for(;;){if(t=e.arr[e.pos++],r|=(127&t)<<n,n+=7,t<128)return i*(r>>>0);if(n>41)throw new Error("Integer out of range!")}},Sd=e=>{let t=xd(e);if(0===t)return"";{let r=String.fromCodePoint(wd(e));if(--t<100)for(;t--;)r+=String.fromCodePoint(wd(e));else for(;t>0;){const n=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,r+=String.fromCodePoint.apply(null,i),t-=n}return decodeURIComponent(escape(r))}},_d=(e,t)=>{const r=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,r},Cd=[e=>{},e=>null,kd,e=>_d(e,4).getFloat32(0,!1),e=>_d(e,8).getFloat64(0,!1),e=>_d(e,8).getBigInt64(0,!1),e=>!1,e=>!0,Sd,e=>{const t=xd(e),r={};for(let n=0;n<t;n++){r[Sd(e)]=Td(e)}return r},e=>{const t=xd(e),r=[];for(let n=0;n<t;n++)r.push(Td(e));return r},bd],Td=e=>Cd[127-wd(e)](e);class Md extends yd{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){var e;return 0===this.count&&(this.s=this.reader(this),(e=this).pos!==e.arr.length?this.count=xd(this)+1:this.count=-1),this.count--,this.s}}class Ad extends yd{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=kd(this);const e=Qu(this.s);this.count=1,e&&(this.s=-this.s,this.count=xd(this)+2)}return this.count--,this.s}}class Ed extends yd{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const e=kd(this),t=1&e;this.diff=e>>1,this.count=1,t&&(this.count=xd(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Od{constructor(e){this.decoder=new Ad(e),this.str=Sd(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}const Nd=e=>new Uint8Array(e),Rd=(e,t,r)=>new Uint8Array(e,t,r),Dd=dd?e=>{let t="";for(let r=0;r<e.byteLength;r++)t+=ed(e[r]);return btoa(t)}:e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),zd=dd?e=>{const t=atob(e),r=Nd(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}:e=>{const t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},Id=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Ju(e)===e);class Bd{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Ld=()=>new Bd,Pd=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let r=0;r<e.bufs.length;r++)t+=e.bufs[r].length;return t})(e));let r=0;for(let n=0;n<e.bufs.length;n++){const i=e.bufs[n];t.set(i,r),r+=i.length}return t.set(Rd(e.cbuf.buffer,0,e.cpos),r),t},Fd=(e,t)=>{const r=e.cbuf.length;e.cpos===r&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*r),e.cpos=0),e.cbuf[e.cpos++]=t},qd=Fd,Ud=(e,t)=>{for(;t>127;)Fd(e,128|127&t),t>>>=7;Fd(e,127&t)},jd=(e,t)=>{const r=Qu(t);for(r&&(t=-t),Fd(e,(t>63?128:0)|(r?64:0)|63&t),t>>>=6;t>0;)Fd(e,(t>127?128:0)|127&t),t>>>=7},Vd=(e,t)=>{const r=unescape(encodeURIComponent(t)),n=r.length;Ud(e,n);for(let i=0;i<n;i++)Fd(e,r.codePointAt(i))},$d=(e,t)=>{const r=e.cbuf.length,n=e.cpos,i=Xu(r-n,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),n),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Zu(2*r,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},Hd=(e,t)=>{Ud(e,t.byteLength),$d(e,t)},Wd=(e,t)=>{((e,t)=>{const r=e.cbuf.length;r-e.cpos<t&&(e.bufs.push(Rd(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*Zu(r,t)),e.cpos=0)})(e,t);const r=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,r},Gd=new DataView(new ArrayBuffer(4)),Jd=(e,t)=>{switch(typeof t){case"string":Fd(e,119),Vd(e,t);break;case"number":Id(t)&&t<=2147483647?(Fd(e,125),jd(e,t)):(r=t,Gd.setFloat32(0,r),Gd.getFloat32(0)===r?(Fd(e,124),((e,t)=>{Wd(e,4).setFloat32(0,t,!1)})(e,t)):(Fd(e,123),((e,t)=>{Wd(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":Fd(e,122),((e,t)=>{Wd(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)Fd(e,126);else if(t instanceof Array){Fd(e,117),Ud(e,t.length);for(let r=0;r<t.length;r++)Jd(e,t[r])}else if(t instanceof Uint8Array)Fd(e,116),Hd(e,t);else{Fd(e,118);const r=Object.keys(t);Ud(e,r.length);for(let n=0;n<r.length;n++){const i=r[n];Vd(e,i),Jd(e,t[i])}}break;case"boolean":Fd(e,t?120:121);break;default:Fd(e,127)}var r};class Kd extends Bd{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Ud(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Yd=e=>{e.count>0&&(jd(e.encoder,1===e.count?e.s:-e.s),e.count>1&&Ud(e.encoder,e.count-2))};class Xd{constructor(){this.encoder=new Bd,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Yd(this),this.count=1,this.s=e)}toUint8Array(){return Yd(this),Pd(this.encoder)}}const Zd=e=>{if(e.count>0){const t=e.diff<<1|(1===e.count?0:1);jd(e.encoder,t),e.count>1&&Ud(e.encoder,e.count-2)}};class Qd{constructor(){this.encoder=new Bd,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Zd(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Zd(this),Pd(this.encoder)}}class ep{constructor(){this.sarr=[],this.s="",this.lensE=new Xd}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Bd;return this.sarr.push(this.s),this.s="",Vd(e,this.sarr.join("")),$d(e,this.lensE.toUint8Array()),Pd(e)}}const tp="undefined"==typeof crypto?null:crypto,rp=null!==tp?e=>{const t=new ArrayBuffer(e),r=new Uint8Array(t);return tp.getRandomValues(r),t}:e=>{const t=new ArrayBuffer(e),r=new Uint8Array(t);for(let n=0;n<e;n++)r[n]=Math.ceil(4294967295*Math.random()>>>0);return t},np=Math.random,ip=()=>new Uint32Array(rp(4))[0],op=[1e7]+-1e3+-4e3+-8e3+-1e11,sp=()=>op.replace(/[018]/g,(e=>(e^ip()&15>>e/4).toString(16))),ap=Date.now,lp=e=>new Promise(e),cp=e=>Promise.resolve(e),hp=e=>new Error(e),up=()=>{throw hp("Method unimplemented")},dp=()=>{throw hp("Unexpected case")},pp=Object.keys,fp=e=>pp(e).length,mp=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),gp=(e,t,r=0)=>{try{for(;r<e.length;r++)e[r](...t)}finally{r<e.length&&gp(e,t,r+1)}},yp=()=>{},vp=(e,t)=>{if(null==e||null==t)return((e,t)=>e===t)(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;break;case Set:if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;break;case Map:if(e.size!==t.size)return!1;for(const r of e.keys())if(!t.has(r)||!vp(e.get(r),t.get(r)))return!1;break;case Object:if(fp(e)!==fp(t))return!1;for(const r in e)if(!mp(e,r)||!vp(e[r],t[r]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!vp(e[r],t[r]))return!1;break;default:return!1}return!0},bp=Symbol;class wp{constructor(e,t){this.left=e,this.right=t}}const xp=(e,t)=>new wp(e,t),kp="undefined"!=typeof document?document:{};"undefined"!=typeof DOMParser&&new DOMParser;kp.ELEMENT_NODE,kp.TEXT_NODE,kp.CDATA_SECTION_NODE,kp.COMMENT_NODE,kp.DOCUMENT_NODE,kp.DOCUMENT_TYPE_NODE,kp.DOCUMENT_FRAGMENT_NODE;const Sp=bp(),_p=bp(),Cp=bp(),Tp=bp(),Mp=bp(),Ap=bp(),Ep=bp(),Op=bp(),Np=bp(),Rp={[Sp]:xp("font-weight","bold"),[_p]:xp("font-weight","normal"),[Cp]:xp("color","blue"),[Mp]:xp("color","green"),[Tp]:xp("color","grey"),[Ap]:xp("color","red"),[Ep]:xp("color","purple"),[Op]:xp("color","orange"),[Np]:xp("color","black")},Dp={[Sp]:"[1m",[_p]:"[2m",[Cp]:"[34m",[Mp]:"[32m",[Tp]:"[37m",[Ap]:"[31m",[Ep]:"[35m",[Op]:"[38;5;208m",[Np]:"[0m"},zp=ud?e=>{const t=[],r=[];let n=0;for(;n<e.length;n++){const r=e[n],i=Dp[r];if(void 0!==i)t.push(i);else{if(r.constructor!==String&&r.constructor!==Number)break;t.push(r)}}for(n>0&&(t.push("[0m"),r.push(t.join("")));n<e.length;n++){const t=e[n];t instanceof Symbol||r.push(t)}return r}:e=>{const t=[],r=[],n=qu();let i=[],o=0;for(;o<e.length;o++){const i=e[o],s=Rp[i];if(void 0!==s)n.set(s.left,s.right);else{if(i.constructor!==String&&i.constructor!==Number)break;{const e=((e,t)=>{const r=[];for(const[n,i]of e)r.push(t(i,n));return r})(n,((e,t)=>`${t}:${e};`)).join("");o>0||e.length>0?(t.push("%c"+i),r.push(e)):t.push(i)}}}for(o>0&&(i=r,i.unshift(t.join("")));o<e.length;o++){const t=e[o];t instanceof Symbol||i.push(t)}return i},Ip=(...e)=>{console.log(...zp(e)),Bp.forEach((t=>t.print(e)))},Bp=new Set,Lp=[Mp,Ep,Op,Cp];let Pp=0,Fp=ap();const qp=e=>({[Symbol.iterator](){return this},next:e}),Up=(e,t)=>qp((()=>{const{done:r,value:n}=e.next();return{done:r,value:r?void 0:t(n)}}));class jp{constructor(e,t){this.clock=e,this.len=t}}class Vp{constructor(){this.clients=new Map}}const $p=(e,t,r)=>t.clients.forEach(((t,n)=>{const i=e.doc.store.clients.get(n);for(let o=0;o<t.length;o++){const n=t[o];Gf(e,i,n.clock,n.len,r)}})),Hp=(e,t)=>{const r=e.clients.get(t.client);return void 0!==r&&null!==((e,t)=>{let r=0,n=e.length-1;for(;r<=n;){const i=Ju((r+n)/2),o=e[i],s=o.clock;if(s<=t){if(t<s+o.len)return i;r=i+1}else n=i-1}return null})(r,t.clock)},Wp=e=>{e.clients.forEach((e=>{let t,r;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,r=1;t<e.length;t++){const n=e[r-1],i=e[t];n.clock+n.len>=i.clock?n.len=Zu(n.len,i.clock+i.len-n.clock):(r<t&&(e[r]=i),r++)}e.length=r}))},Gp=e=>{const t=new Vp;for(let r=0;r<e.length;r++)e[r].clients.forEach(((n,i)=>{if(!t.clients.has(i)){const o=n.slice();for(let t=r+1;t<e.length;t++)Hu(o,e[t].clients.get(i)||[]);t.clients.set(i,o)}}));return Wp(t),t},Jp=(e,t,r,n)=>{ju(e.clients,t,(()=>[])).push(new jp(r,n))},Kp=()=>new Vp,Yp=e=>{const t=Kp();return e.clients.forEach(((e,r)=>{const n=[];for(let t=0;t<e.length;t++){const r=e[t];if(r.deleted){const i=r.id.clock;let o=r.length;if(t+1<e.length)for(let r=e[t+1];t+1<e.length&&r.deleted;r=e[1+ ++t])o+=r.length;n.push(new jp(i,o))}}n.length>0&&t.clients.set(r,n)})),t},Xp=(e,t)=>{Ud(e.restEncoder,t.clients.size),t.clients.forEach(((t,r)=>{e.resetDsCurVal(),Ud(e.restEncoder,r);const n=t.length;Ud(e.restEncoder,n);for(let i=0;i<n;i++){const r=t[i];e.writeDsClock(r.clock),e.writeDsLen(r.len)}}))},Zp=e=>{const t=new Vp,r=xd(e.restDecoder);for(let n=0;n<r;n++){e.resetDsCurVal();const r=xd(e.restDecoder),n=xd(e.restDecoder);if(n>0){const i=ju(t.clients,r,(()=>[]));for(let t=0;t<n;t++)i.push(new jp(e.readDsClock(),e.readDsLen()))}}return t},Qp=(e,t,r)=>{const n=new Vp,i=xd(e.restDecoder);for(let o=0;o<i;o++){e.resetDsCurVal();const i=xd(e.restDecoder),o=xd(e.restDecoder),s=r.clients.get(i)||[],a=qf(r,i);for(let r=0;r<o;r++){const r=e.readDsClock(),o=r+e.readDsLen();if(r<a){a<o&&Jp(n,i,a,o-a);let e=jf(s,r),l=s[e];for(!l.deleted&&l.id.clock<r&&(s.splice(e+1,0,Ng(t,l,r-l.id.clock)),e++);e<s.length&&(l=s[e++],l.id.clock<o);)l.deleted||(o<l.id.clock+l.length&&s.splice(e,0,Ng(t,l,o-l.id.clock)),l.delete(t))}else Jp(n,i,r,o-r)}}if(n.clients.size>0){const e=new cf;return Ud(e.restEncoder,0),Xp(e,n),e.toUint8Array()}return null},ef=ip;class tf extends Gu{constructor({guid:e=sp(),collectionid:t=null,gc:r=!0,gcFilter:n=(()=>!0),meta:i=null,autoLoad:o=!1,shouldLoad:s=!0}={}){super(),this.gc=r,this.gcFilter=n,this.clientID=ef(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new Pf,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.whenLoaded=lp((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}))}load(){const e=this._item;null===e||this.shouldLoad||Qf(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map((e=>e.guid)))}transact(e,t=null){Qf(this,e,t)}get(e,t=xm){const r=ju(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),n=r.constructor;if(t!==xm&&n!==t){if(n===xm){const n=new t;n._map=r._map,r._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=n})),n._start=r._start;for(let e=n._start;null!==e;e=e.right)e.parent=n;return n._length=r._length,this.share.set(e,n),n._integrate(this,null),n}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return r}getArray(e=""){return this.get(e,qm)}getText(e=""){return this.get(e,rg)}getMap(e=""){return this.get(e,jm)}getXmlFragment(e=""){return this.get(e,ig)}toJSON(){const e={};return this.share.forEach(((t,r)=>{e[r]=t.toJSON()})),e}destroy(){Wu(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new tf(l(a({guid:this.guid},t.opts),{shouldLoad:!1})),t.doc._item=e,Qf(e.parent.doc,(r=>{const n=t.doc;e.deleted||r.subdocsAdded.add(n),r.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}}class rf{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return xd(this.restDecoder)}readDsLen(){return xd(this.restDecoder)}}class nf extends rf{readLeftID(){return Tf(xd(this.restDecoder),xd(this.restDecoder))}readRightID(){return Tf(xd(this.restDecoder),xd(this.restDecoder))}readClient(){return xd(this.restDecoder)}readInfo(){return wd(this.restDecoder)}readString(){return Sd(this.restDecoder)}readParentInfo(){return 1===xd(this.restDecoder)}readTypeRef(){return xd(this.restDecoder)}readLen(){return xd(this.restDecoder)}readAny(){return Td(this.restDecoder)}readBuf(){return(e=>{const t=Nd(e.byteLength);return t.set(e),t})(bd(this.restDecoder))}readJSON(){return JSON.parse(Sd(this.restDecoder))}readKey(){return Sd(this.restDecoder)}}class of extends class{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=xd(this.restDecoder),this.dsCurrVal}readDsLen(){const e=xd(this.restDecoder)+1;return this.dsCurrVal+=e,e}}{constructor(e){super(e),this.keys=[],xd(e),this.keyClockDecoder=new Ed(bd(e)),this.clientDecoder=new Ad(bd(e)),this.leftClockDecoder=new Ed(bd(e)),this.rightClockDecoder=new Ed(bd(e)),this.infoDecoder=new Md(bd(e),wd),this.stringDecoder=new Od(bd(e)),this.parentInfoDecoder=new Md(bd(e),wd),this.typeRefDecoder=new Ad(bd(e)),this.lenDecoder=new Ad(bd(e))}readLeftID(){return new _f(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new _f(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Td(this.restDecoder)}readBuf(){return bd(this.restDecoder)}readJSON(){return Td(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class sf{constructor(){this.restEncoder=Ld()}toUint8Array(){return Pd(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Ud(this.restEncoder,e)}writeDsLen(e){Ud(this.restEncoder,e)}}class af extends sf{writeLeftID(e){Ud(this.restEncoder,e.client),Ud(this.restEncoder,e.clock)}writeRightID(e){Ud(this.restEncoder,e.client),Ud(this.restEncoder,e.clock)}writeClient(e){Ud(this.restEncoder,e)}writeInfo(e){qd(this.restEncoder,e)}writeString(e){Vd(this.restEncoder,e)}writeParentInfo(e){Ud(this.restEncoder,e?1:0)}writeTypeRef(e){Ud(this.restEncoder,e)}writeLen(e){Ud(this.restEncoder,e)}writeAny(e){Jd(this.restEncoder,e)}writeBuf(e){Hd(this.restEncoder,e)}writeJSON(e){Vd(this.restEncoder,JSON.stringify(e))}writeKey(e){Vd(this.restEncoder,e)}}class lf{constructor(){this.restEncoder=Ld(),this.dsCurrVal=0}toUint8Array(){return Pd(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,Ud(this.restEncoder,t)}writeDsLen(e){0===e&&dp(),Ud(this.restEncoder,e-1),this.dsCurrVal+=e}}class cf extends lf{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Qd,this.clientEncoder=new Xd,this.leftClockEncoder=new Qd,this.rightClockEncoder=new Qd,this.infoEncoder=new Kd(qd),this.stringEncoder=new ep,this.parentInfoEncoder=new Kd(qd),this.typeRefEncoder=new Xd,this.lenEncoder=new Xd}toUint8Array(){const e=Ld();return Ud(e,0),Hd(e,this.keyClockEncoder.toUint8Array()),Hd(e,this.clientEncoder.toUint8Array()),Hd(e,this.leftClockEncoder.toUint8Array()),Hd(e,this.rightClockEncoder.toUint8Array()),Hd(e,Pd(this.infoEncoder)),Hd(e,this.stringEncoder.toUint8Array()),Hd(e,Pd(this.parentInfoEncoder)),Hd(e,this.typeRefEncoder.toUint8Array()),Hd(e,this.lenEncoder.toUint8Array()),$d(e,Pd(this.restEncoder)),Pd(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Jd(this.restEncoder,e)}writeBuf(e){Hd(this.restEncoder,e)}writeJSON(e){Jd(this.restEncoder,e)}writeKey(e){void 0===this.keyMap.get(e)?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(this.keyClock++)}}const hf=(e,t,r)=>{const n=new Map;r.forEach(((e,r)=>{qf(t,r)>e&&n.set(r,e)})),Ff(t).forEach(((e,t)=>{r.has(t)||n.set(t,0)})),Ud(e.restEncoder,n.size),Array.from(n.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([r,n])=>{((e,t,r,n)=>{n=Zu(n,t[0].id.clock);const i=jf(t,n);Ud(e.restEncoder,t.length-i),e.writeClient(r),Ud(e.restEncoder,n);const o=t[i];o.write(e,n-o.id.clock);for(let s=i+1;s<t.length;s++)t[s].write(e,0)})(e,t.clients.get(r),r,n)}))},uf=(e,t,r,n=new of(e))=>Qf(t,(e=>{e.local=!1;let t=!1;const r=e.doc,i=r.store,o=((e,t)=>{const r=qu(),n=xd(e.restDecoder);for(let i=0;i<n;i++){const n=xd(e.restDecoder),i=new Array(n),o=e.readClient();let s=xd(e.restDecoder);r.set(o,{i:0,refs:i});for(let r=0;r<n;r++){const n=e.readInfo();switch(31&n){case 0:{const t=e.readLen();i[r]=new hg(Tf(o,s),t),s+=t;break}case 10:{const t=xd(e.restDecoder);i[r]=new Bg(Tf(o,s),t),s+=t;break}default:{const a=0==(192&n),l=new Dg(Tf(o,s),null,128==(128&n)?e.readLeftID():null,null,64==(64&n)?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,a&&32==(32&n)?e.readString():null,zg(e,n));i[r]=l,s+=l.length}}}}return r})(n,r),s=((e,t,r)=>{const n=[];let i=Array.from(r.keys()).sort(((e,t)=>e-t));if(0===i.length)return null;const o=()=>{if(0===i.length)return null;let e=r.get(i[i.length-1]);for(;e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=r.get(i[i.length-1])}return e};let s=o();if(null===s&&0===n.length)return null;const a=new Pf,l=new Map,c=(e,t)=>{const r=l.get(e);(null==r||r>t)&&l.set(e,t)};let h=s.refs[s.i++];const u=new Map,d=()=>{for(const e of n){const t=e.id.client,n=r.get(t);n?(n.i--,a.clients.set(t,n.refs.slice(n.i)),r.delete(t),n.i=0,n.refs=[]):a.clients.set(t,[e]),i=i.filter((e=>e!==t))}n.length=0};for(;;){if(h.constructor!==Bg){const i=ju(u,h.id.client,(()=>qf(t,h.id.client)))-h.id.clock;if(i<0)n.push(h),c(h.id.client,h.id.clock-1),d();else{const o=h.getMissing(e,t);if(null!==o){n.push(h);const e=r.get(o)||{refs:[],i:0};if(e.refs.length!==e.i){h=e.refs[e.i++];continue}c(o,qf(t,o)),d()}else(0===i||i<h.length)&&(h.integrate(e,i),u.set(h.id.client,h.id.clock+h.length))}}if(n.length>0)h=n.pop();else if(null!==s&&s.i<s.refs.length)h=s.refs[s.i++];else{if(s=o(),null===s)break;h=s.refs[s.i++]}}if(a.clients.size>0){const e=new cf;return hf(e,a,new Map),Ud(e.restEncoder,0),{missing:l,update:e.toUint8Array()}}return null})(e,i,o),a=i.pendingStructs;if(a){for(const[e,r]of a.missing)if(r<qf(i,e)){t=!0;break}if(s){for(const[e,t]of s.missing){const r=a.missing.get(e);(null==r||r>t)&&a.missing.set(e,t)}a.update=am([a.update,s.update])}}else i.pendingStructs=s;const l=Qp(n,e,i);if(i.pendingDs){const t=new of(vd(i.pendingDs));xd(t.restDecoder);const r=Qp(t,e,i);i.pendingDs=l&&r?am([l,r]):l||r}else i.pendingDs=l;if(t){const t=i.pendingStructs.update;i.pendingStructs=null,df(e.doc,t)}}),r,!1),df=(e,t,r,n=of)=>{const i=vd(t);uf(i,e,r,new n(i))},pf=(e,t,r)=>df(e,t,r,nf),ff=(e,t=new Uint8Array([0]),r=new cf)=>{((e,t,r=new Map)=>{hf(e,t.store,r),Xp(e,Yp(t.store))})(r,e,gf(t));const n=[r.toUint8Array()];if(e.store.pendingDs&&n.push(e.store.pendingDs),e.store.pendingStructs&&n.push(lm(e.store.pendingStructs.update,t)),n.length>1){if(r.constructor===af)return om(n.map(((e,t)=>0===t?e:dm(e))));if(r.constructor===cf)return am(n)}return n[0]},mf=(e,t)=>ff(e,t,new af),gf=e=>(e=>{const t=new Map,r=xd(e.restDecoder);for(let n=0;n<r;n++){const r=xd(e.restDecoder),n=xd(e.restDecoder);t.set(r,n)}return t})(new rf(vd(e))),yf=(e,t)=>(Ud(e.restEncoder,t.size),Array.from(t.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,r])=>{Ud(e.restEncoder,t),Ud(e.restEncoder,r)})),e),vf=(e,t=new lf)=>(e instanceof Map?yf(t,e):((e,t)=>{yf(e,Ff(t.store))})(t,e),t.toUint8Array());class bf{constructor(){this.l=[]}}const wf=()=>new bf,xf=(e,t)=>e.l.push(t),kf=(e,t)=>{const r=e.l,n=r.length;e.l=r.filter((e=>t!==e)),n===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Sf=(e,t,r)=>gp(e.l,[t,r]);class _f{constructor(e,t){this.client=e,this.clock=t}}const Cf=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,Tf=(e,t)=>new _f(e,t),Mf=e=>{for(const[t,r]of e.doc.share.entries())if(r===e)return t;throw dp()},Af=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class Ef{constructor(e,t,r,n=0){this.type=e,this.tname=t,this.item=r,this.assoc=n}}class Of{constructor(e,t,r=0){this.type=e,this.index=t,this.assoc=r}}const Nf=(e,t,r)=>{let n=null,i=null;return null===e._item?i=Mf(e):n=Tf(e._item.id.client,e._item.id.clock),new Ef(n,i,t,r)},Rf=(e,t,r=0)=>{let n=e._start;if(r<0){if(0===t)return Nf(e,null,r);t--}for(;null!==n;){if(!n.deleted&&n.countable){if(n.length>t)return Nf(e,Tf(n.id.client,n.id.clock+t),r);t-=n.length}if(null===n.right&&r<0)return Nf(e,n.lastId,r);n=n.right}return Nf(e,null,r)},Df=(e,t)=>{const r=t.store,n=e.item,i=e.type,o=e.tname,s=e.assoc;let a=null,l=0;if(null!==n){if(qf(r,n.client)<=n.clock)return null;const e=Eg(r,n),t=e.item;if(!(t instanceof Dg))return null;if(a=t.parent,null===a._item||!a._item.deleted){l=t.deleted||!t.countable?0:e.diff+(s>=0?0:1);let r=t.left;for(;null!==r;)!r.deleted&&r.countable&&(l+=r.length),r=r.left}}else{if(null!==o)a=t.get(o);else{if(null===i)throw dp();{if(qf(r,i.client)<=i.clock)return null;const{item:e}=Eg(r,i);if(!(e instanceof Dg&&e.content instanceof Ag))return null;a=e.content.type}}l=s>=0?a._length:0}return((e,t,r=0)=>new Of(e,t,r))(a,l,e.assoc)};class zf{constructor(e,t){this.ds=e,this.sv=t}}const If=(e,t)=>new zf(e,t);If(Kp(),new Map);const Bf=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Hp(t.ds,e.id),Lf=(e,t)=>{const r=ju(e.meta,Lf,Vu),n=e.doc.store;r.has(t)||(t.sv.forEach(((t,r)=>{t<qf(n,r)&&Hf(e,Tf(r,t))})),$p(e,t.ds,(e=>{})),r.add(t))};class Pf{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Ff=e=>{const t=new Map;return e.clients.forEach(((e,r)=>{const n=e[e.length-1];t.set(r,n.id.clock+n.length)})),t},qf=(e,t)=>{const r=e.clients.get(t);if(void 0===r)return 0;const n=r[r.length-1];return n.id.clock+n.length},Uf=(e,t)=>{let r=e.clients.get(t.id.client);if(void 0===r)r=[],e.clients.set(t.id.client,r);else{const e=r[r.length-1];if(e.id.clock+e.length!==t.id.clock)throw dp()}r.push(t)},jf=(e,t)=>{let r=0,n=e.length-1,i=e[n],o=i.id.clock;if(o===t)return n;let s=Ju(t/(o+i.length-1)*n);for(;r<=n;){if(i=e[s],o=i.id.clock,o<=t){if(t<o+i.length)return s;r=s+1}else n=s-1;s=Ju((r+n)/2)}throw dp()},Vf=(e,t)=>{const r=e.clients.get(t.client);return r[jf(r,t.clock)]},$f=(e,t,r)=>{const n=jf(t,r),i=t[n];return i.id.clock<r&&i instanceof Dg?(t.splice(n+1,0,Ng(e,i,r-i.id.clock)),n+1):n},Hf=(e,t)=>{const r=e.doc.store.clients.get(t.client);return r[$f(e,r,t.clock)]},Wf=(e,t,r)=>{const n=t.clients.get(r.client),i=jf(n,r.clock),o=n[i];return r.clock!==o.id.clock+o.length-1&&o.constructor!==hg&&n.splice(i+1,0,Ng(e,o,r.clock-o.id.clock+1)),o},Gf=(e,t,r,n,i)=>{if(0===n)return;const o=r+n;let s,a=$f(e,t,r);do{s=t[a++],o<s.id.clock+s.length&&$f(e,t,o),i(s)}while(a<t.length&&t[a].id.clock<o)};class Jf{constructor(e,t,r){this.doc=e,this.deleteSet=new Vp,this.beforeState=Ff(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const Kf=(e,t)=>!(0===t.deleteSet.clients.size&&!((e,t)=>{for(const[r,n]of e)if(t(n,r))return!0;return!1})(t.afterState,((e,r)=>t.beforeState.get(r)!==e)))&&(Wp(t.deleteSet),((e,t)=>{hf(e,t.doc.store,t.beforeState)})(e,t),Xp(e,t.deleteSet),!0),Yf=(e,t,r)=>{const n=t._item;(null===n||n.id.clock<(e.beforeState.get(n.id.client)||0)&&!n.deleted)&&ju(e.changed,t,Vu).add(r)},Xf=(e,t)=>{const r=e[t-1],n=e[t];r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)&&(e.splice(t,1),n instanceof Dg&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r))},Zf=(e,t)=>{if(t<e.length){const r=e[t],n=r.doc,i=n.store,o=r.deleteSet,s=r._mergeStructs;try{Wp(o),r.afterState=Ff(r.doc.store),n._transaction=null,n.emit("beforeObserverCalls",[r,n]);const a=[];r.changed.forEach(((e,t)=>a.push((()=>{null!==t._item&&t._item.deleted||t._callObserver(r,e)})))),a.push((()=>{r.changedParentTypes.forEach(((e,t)=>a.push((()=>{null!==t._item&&t._item.deleted||((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t})),e.sort(((e,t)=>e.path.length-t.path.length)),Sf(t._dEH,e,r))})))),a.push((()=>n.emit("afterTransaction",[r,n])))})),gp(a,[])}finally{n.gc&&((e,t,r)=>{for(const[n,i]of e.clients.entries()){const e=t.clients.get(n);for(let n=i.length-1;n>=0;n--){const o=i[n],s=o.clock+o.len;for(let n=jf(e,o.clock),i=e[n];n<e.length&&i.id.clock<s;i=e[++n]){const i=e[n];if(o.clock+o.len<=i.id.clock)break;i instanceof Dg&&i.deleted&&!i.keep&&r(i)&&i.gc(t,!1)}}}})(o,i,n.gcFilter),((e,t)=>{e.clients.forEach(((e,r)=>{const n=t.clients.get(r);for(let t=e.length-1;t>=0;t--){const r=e[t];for(let e=Xu(n.length-1,1+jf(n,r.clock+r.len-1)),t=n[e];e>0&&t.id.clock>=r.clock;t=n[--e])Xf(n,e)}}))})(o,i),r.afterState.forEach(((e,t)=>{const n=r.beforeState.get(t)||0;if(n!==e){const e=i.clients.get(t),r=Zu(jf(e,n),1);for(let t=e.length-1;t>=r;t--)Xf(e,t)}}));for(let e=0;e<s.length;e++){const{client:t,clock:r}=s[e].id,n=i.clients.get(t),o=jf(n,r);o+1<n.length&&Xf(n,o+1),o>0&&Xf(n,o)}if(r.local||r.afterState.get(n.clientID)===r.beforeState.get(n.clientID)||(Ip(Op,Sp,"[yjs] ",_p,Ap,"Changed the client-id because another client seems to be using it."),n.clientID=ef()),n.emit("afterTransactionCleanup",[r,n]),n._observers.has("update")){const e=new af;Kf(e,r)&&n.emit("update",[e.toUint8Array(),r.origin,n,r])}if(n._observers.has("updateV2")){const e=new cf;Kf(e,r)&&n.emit("updateV2",[e.toUint8Array(),r.origin,n,r])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=r;(a.size>0||c.size>0||l.size>0)&&(a.forEach((e=>{e.clientID=n.clientID,null==e.collectionid&&(e.collectionid=n.collectionid),n.subdocs.add(e)})),c.forEach((e=>n.subdocs.delete(e))),n.emit("subdocs",[{loaded:l,added:a,removed:c},n,r]),c.forEach((e=>e.destroy()))),e.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,e])):Zf(e,t+1)}}},Qf=(e,t,r=null,n=!0)=>{const i=e._transactionCleanups;let o=!1;null===e._transaction&&(o=!0,e._transaction=new Jf(e,r,n),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{t(e._transaction)}finally{o&&i[0]===e._transaction&&Zf(i,0)}};class em{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const tm=(e,t,r)=>{let n=null,i=null;const o=e.doc,s=e.scope;if(Qf(o,(r=>{for(;t.length>0&&null===n;){const i=o.store,a=t.pop(),l=new Set,c=[];let h=!1;$p(r,a.insertions,(e=>{if(e instanceof Dg){if(null!==e.redone){let{item:t,diff:n}=Eg(i,e.id);n>0&&(t=Hf(r,Tf(t.id.client,t.id.clock+n))),e=t}!e.deleted&&s.some((t=>Af(t,e)))&&c.push(e)}})),$p(r,a.deletions,(e=>{e instanceof Dg&&s.some((t=>Af(t,e)))&&!Hp(a.insertions,e.id)&&l.add(e)})),l.forEach((e=>{h=null!==Rg(r,e,l,a.insertions)||h}));for(let t=c.length-1;t>=0;t--){const n=c[t];e.deleteFilter(n)&&(n.delete(r),h=!0)}n=h?a:null}r.changed.forEach(((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)})),i=r}),e),null!=n){const t=i.changedParentTypes;e.emit("stack-item-popped",[{stackItem:n,type:r,changedParentTypes:t},e])}return n};class rm extends Gu{constructor(e,{captureTimeout:t=500,deleteFilter:r=(()=>!0),trackedOrigins:n=new Set([null])}={}){super(),this.scope=e instanceof Array?e:[e],this.deleteFilter=r,n.add(this),this.trackedOrigins=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=this.scope[0].doc,this.lastChange=0,this.doc.on("afterTransaction",(e=>{if(!(this.scope.some((t=>e.changedParentTypes.has(t)))&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const r=this.undoing,n=this.redoing,i=r?this.redoStack:this.undoStack;r?this.stopCapturing():n||(this.redoStack=[]);const o=new Vp;e.afterState.forEach(((t,r)=>{const n=e.beforeState.get(r)||0,i=t-n;i>0&&Jp(o,r,n,i)}));const s=ap();let a=!1;if(s-this.lastChange<t&&i.length>0&&!r&&!n){const t=i[i.length-1];t.deletions=Gp([t.deletions,e.deleteSet]),t.insertions=Gp([t.insertions,o])}else i.push(new em(e.deleteSet,o)),a=!0;r||n||(this.lastChange=s),$p(e,e.deleteSet,(e=>{e instanceof Dg&&this.scope.some((t=>Af(t,e)))&&Og(e,!0)})),a&&this.emit("stack-item-added",[{stackItem:i[i.length-1],origin:e.origin,type:r?"redo":"undo",changedParentTypes:e.changedParentTypes},this])}))}clear(){this.doc.transact((e=>{const t=t=>{$p(e,t.deletions,(e=>{e instanceof Dg&&this.scope.some((t=>Af(t,e)))&&Og(e,!1)}))};this.undoStack.forEach(t),this.redoStack.forEach(t)})),this.undoStack=[],this.redoStack=[]}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=tm(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=tm(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}}class nm{constructor(e,t){this.gen=function*(e){const t=xd(e.restDecoder);for(let r=0;r<t;r++){const t=xd(e.restDecoder),r=e.readClient();let n=xd(e.restDecoder);for(let i=0;i<t;i++){const t=e.readInfo();if(10===t){const t=xd(e.restDecoder);yield new Bg(Tf(r,n),t),n+=t}else if(0!=(31&t)){const i=0==(192&t),o=new Dg(Tf(r,n),null,128==(128&t)?e.readLeftID():null,null,64==(64&t)?e.readRightID():null,i?e.readParentInfo()?e.readString():e.readLeftID():null,i&&32==(32&t)?e.readString():null,zg(e,t));yield o,n+=o.length}else{const t=e.readLen();yield new hg(Tf(r,n),t),n+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Bg);return this.curr}}class im{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const om=e=>am(e,nf,af),sm=(e,t)=>{if(e.constructor===hg){const{client:r,clock:n}=e.id;return new hg(Tf(r,n+t),e.length-t)}if(e.constructor===Bg){const{client:r,clock:n}=e.id;return new Bg(Tf(r,n+t),e.length-t)}{const r=e,{client:n,clock:i}=r.id;return new Dg(Tf(n,i+t),null,Tf(n,i+t-1),null,r.rightOrigin,r.parent,r.parentSub,r.content.splice(t))}},am=(e,t=of,r=cf)=>{if(1===e.length)return e[0];const n=e.map((e=>new t(vd(e))));let i=n.map((e=>new nm(e,!0))),o=null;const s=new r,a=new im(s);for(;i=i.filter((e=>null!==e.curr)),i.sort(((e,t)=>{if(e.curr.id.client===t.curr.id.client){const r=e.curr.id.clock-t.curr.id.clock;return 0===r?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===Bg?1:-1:r}return t.curr.id.client-e.curr.id.client})),0!==i.length;){const e=i[0],t=e.curr.id.client;if(null!==o){let r=e.curr,n=!1;for(;null!==r&&r.id.clock+r.length<=o.struct.id.clock+o.struct.length&&r.id.client>=o.struct.id.client;)r=e.next(),n=!0;if(null===r||r.id.client!==t||n&&r.id.clock>o.struct.id.clock+o.struct.length)continue;if(t!==o.struct.id.client)hm(a,o.struct,o.offset),o={struct:r,offset:0},e.next();else if(o.struct.id.clock+o.struct.length<r.id.clock)if(o.struct.constructor===Bg)o.struct.length=r.id.clock+r.length-o.struct.id.clock;else{hm(a,o.struct,o.offset);const e=r.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Bg(Tf(t,o.struct.id.clock+o.struct.length),e),offset:0}}else{const t=o.struct.id.clock+o.struct.length-r.id.clock;t>0&&(o.struct.constructor===Bg?o.struct.length-=t:r=sm(r,t)),o.struct.mergeWith(r)||(hm(a,o.struct,o.offset),o={struct:r,offset:0},e.next())}}else o={struct:e.curr,offset:0},e.next();for(let r=e.curr;null!==r&&r.id.client===t&&r.id.clock===o.struct.id.clock+o.struct.length&&r.constructor!==Bg;r=e.next())hm(a,o.struct,o.offset),o={struct:r,offset:0}}null!==o&&(hm(a,o.struct,o.offset),o=null),um(a);const l=n.map((e=>Zp(e))),c=Gp(l);return Xp(s,c),s.toUint8Array()},lm=(e,t,r=of,n=cf)=>{const i=gf(t),o=new n,s=new im(o),a=new r(vd(e)),l=new nm(a,!1);for(;l.curr;){const e=l.curr,t=e.id.client,r=i.get(t)||0;if(l.curr.constructor!==Bg)if(e.id.clock+e.length>r)for(hm(s,e,Zu(r-e.id.clock,0)),l.next();l.curr&&l.curr.id.client===t;)hm(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===t&&l.curr.id.clock+l.curr.length<=r;)l.next();else l.next()}um(s);const c=Zp(a);return Xp(o,c),o.toUint8Array()},cm=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:Pd(e.encoder.restEncoder)}),e.encoder.restEncoder=Ld(),e.written=0)},hm=(e,t,r)=>{e.written>0&&e.currClient!==t.id.client&&cm(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),Ud(e.encoder.restEncoder,t.id.clock+r)),t.write(e.encoder,r),e.written++},um=e=>{cm(e);const t=e.encoder.restEncoder;Ud(t,e.clientStructs.length);for(let r=0;r<e.clientStructs.length;r++){const n=e.clientStructs[r];Ud(t,n.written),$d(t,n.restEncoder)}},dm=e=>((e,t,r)=>{const n=new t(vd(e)),i=new nm(n,!1),o=new r,s=new im(o);for(let l=i.curr;null!==l;l=i.next())hm(s,l,0);um(s);const a=Zp(n);return Xp(o,a),o.toUint8Array()})(e,of,af);class pm{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null}get path(){return fm(this.currentTarget,this.target)}deletes(e){return Hp(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((r=>{if(null!==r){const n=t._map.get(r);let i,o;if(this.adds(n)){let e=n.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(n)){if(null===e||!this.deletes(e))return;i="delete",o=$u(e.content.getContent())}else null!==e&&this.deletes(e)?(i="update",o=$u(e.content.getContent())):(i="add",o=void 0)}else{if(!this.deletes(n))return;i="delete",o=$u(n.content.getContent())}e.set(r,{action:i,oldValue:o})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){const t=this.target,r=Vu(),n=Vu(),i=[];e={added:r,deleted:n,delta:i,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const o=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==e&&void 0!==e.delete||(o(),e={delete:0}),e.delete+=i.length,n.add(i)):this.adds(i)?(null!==e&&void 0!==e.insert||(o(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),r.add(i)):(null!==e&&void 0!==e.retain||(o(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&o()}this._changes=e}return e}}const fm=(e,t)=>{const r=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)r.unshift(t._item.parentSub);else{let e=0,n=t._item.parent._start;for(;n!==t._item&&null!==n;)n.deleted||e++,n=n.right;r.unshift(e)}t=t._item.parent}return r};let mm=0;class gm{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=mm++}}const ym=(e,t,r)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=r,e.timestamp=mm++},vm=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const r=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,r)=>Ku(t-e.index)<Ku(t-r.index)?e:r));let n=e._start,i=0;for(null!==r&&(n=r.p,i=r.index,(e=>{e.timestamp=mm++})(r));null!==n.right&&i<t;){if(!n.deleted&&n.countable){if(t<i+n.length)break;i+=n.length}n=n.right}for(;null!==n.left&&i>t;)n=n.left,!n.deleted&&n.countable&&(i-=n.length);for(;null!==n.left&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(i-=n.length);return null!==r&&Ku(r.index-i)<n.parent.length/80?(ym(r,n,i),r):((e,t,r)=>{if(e.length>=80){const n=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return ym(n,t,r),n}{const n=new gm(t,r);return e.push(n),n}})(e._searchMarker,n,i)},bm=(e,t,r)=>{for(let n=e.length-1;n>=0;n--){const i=e[n];if(r>0){let t=i.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(n,1);continue}i.p=t,t.marker=!0}(t<i.index||r>0&&t===i.index)&&(i.index=Zu(t,i.index+r))}},wm=(e,t,r)=>{const n=e,i=t.changedParentTypes;for(;ju(i,e,(()=>[])).push(r),null!==e._item;)e=e._item.parent;Sf(n._eH,r,t)};class xm{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=wf(),this._dEH=wf(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw up()}clone(){throw up()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){xf(this._eH,e)}observeDeep(e){xf(this._dEH,e)}unobserve(e){kf(this._eH,e)}unobserveDeep(e){kf(this._dEH,e)}toJSON(){}}const km=(e,t,r)=>{t<0&&(t=e._length+t),r<0&&(r=e._length+r);let n=r-t;const i=[];let o=e._start;for(;null!==o&&n>0;){if(o.countable&&!o.deleted){const e=o.content.getContent();if(e.length<=t)t-=e.length;else{for(let r=t;r<e.length&&n>0;r++)i.push(e[r]),n--;t=0}}o=o.right}return i},Sm=e=>{const t=[];let r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){const e=r.content.getContent();for(let r=0;r<e.length;r++)t.push(e[r])}r=r.right}return t},_m=(e,t)=>{const r=[];let n=e._start;for(;null!==n;){if(n.countable&&Bf(n,t)){const e=n.content.getContent();for(let t=0;t<e.length;t++)r.push(e[t])}n=n.right}return r},Cm=(e,t)=>{let r=0,n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const i=n.content.getContent();for(let n=0;n<i.length;n++)t(i[n],r++,e)}n=n.right}},Tm=(e,t)=>{const r=[];return Cm(e,((n,i)=>{r.push(t(n,i,e))})),r},Mm=e=>{let t=e._start,r=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(null===r){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};r=t.content.getContent(),n=0,t=t.right}const e=r[n++];return r.length<=n&&(r=null),{done:!1,value:e}}}},Am=(e,t)=>{const r=vm(e,t);let n=e._start;for(null!==r&&(n=r.p,t-=r.index);null!==n;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},Em=(e,t,r,n)=>{let i=r;const o=e.doc,s=o.clientID,a=o.store,l=null===r?t._start:r.right;let c=[];const h=()=>{c.length>0&&(i=new Dg(Tf(s,qf(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new vg(c)),i.integrate(e,0),c=[])};n.forEach((r=>{if(null===r)c.push(r);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(r);break;default:switch(h(),r.constructor){case Uint8Array:case ArrayBuffer:i=new Dg(Tf(s,qf(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new ug(new Uint8Array(r))),i.integrate(e,0);break;case tf:i=new Dg(Tf(s,qf(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new fg(r)),i.integrate(e,0);break;default:if(!(r instanceof xm))throw new Error("Unexpected content type in insert operation");i=new Dg(Tf(s,qf(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Ag(r)),i.integrate(e,0)}}})),h()},Om=hp("Length exceeded!"),Nm=(e,t,r,n)=>{if(r>t._length)throw Om;if(0===r)return t._searchMarker&&bm(t._searchMarker,r,n.length),Em(e,t,null,n);const i=r,o=vm(t,r);let s=t._start;for(null!==o&&(s=o.p,0===(r-=o.index)&&(s=s.prev,r+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(r<=s.length){r<s.length&&Hf(e,Tf(s.id.client,s.id.clock+r));break}r-=s.length}return t._searchMarker&&bm(t._searchMarker,i,n.length),Em(e,t,s,n)},Rm=(e,t,r,n)=>{if(0===n)return;const i=r,o=n,s=vm(t,r);let a=t._start;for(null!==s&&(a=s.p,r-=s.index);null!==a&&r>0;a=a.right)!a.deleted&&a.countable&&(r<a.length&&Hf(e,Tf(a.id.client,a.id.clock+r)),r-=a.length);for(;n>0&&null!==a;)a.deleted||(n<a.length&&Hf(e,Tf(a.id.client,a.id.clock+n)),a.delete(e),n-=a.length),a=a.right;if(n>0)throw Om;t._searchMarker&&bm(t._searchMarker,i,-o+n)},Dm=(e,t,r)=>{const n=t._map.get(r);void 0!==n&&n.delete(e)},zm=(e,t,r,n)=>{const i=t._map.get(r)||null,o=e.doc,s=o.clientID;let a;if(null==n)a=new vg([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:a=new vg([n]);break;case Uint8Array:a=new ug(n);break;case tf:a=new fg(n);break;default:if(!(n instanceof xm))throw new Error("Unexpected content type");a=new Ag(n)}new Dg(Tf(s,qf(o.store,s)),i,i&&i.lastId,null,null,t,r,a).integrate(e,0)},Im=(e,t)=>{const r=e._map.get(t);return void 0===r||r.deleted?void 0:r.content.getContent()[r.length-1]},Bm=e=>{const t={};return e._map.forEach(((e,r)=>{e.deleted||(t[r]=e.content.getContent()[e.length-1])})),t},Lm=(e,t)=>{const r=e._map.get(t);return void 0!==r&&!r.deleted},Pm=e=>{return t=e.entries(),r=e=>!e[1].deleted,qp((()=>{let e;do{e=t.next()}while(!e.done&&!r(e.value));return e}));var t,r};class Fm extends pm{constructor(e,t){super(e,t),this._transaction=t}}class qm extends xm{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new qm;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new qm}clone(){const e=new qm;return e.insert(0,this.toArray().map((e=>e instanceof xm?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),wm(this,e,new Fm(this,e))}insert(e,t){null!==this.doc?Qf(this.doc,(r=>{Nm(r,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?Qf(this.doc,(t=>{((e,t,r)=>{let n=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(n)for(;n.right;)n=n.right;Em(e,t,n,r)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?Qf(this.doc,(r=>{Rm(r,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return Am(this,e)}toArray(){return Sm(this)}slice(e=0,t=this.length){return km(this,e,t)}toJSON(){return this.map((e=>e instanceof xm?e.toJSON():e))}map(e){return Tm(this,e)}forEach(e){Cm(this,e)}[Symbol.iterator](){return Mm(this)}_write(e){e.writeTypeRef(xg)}}class Um extends pm{constructor(e,t,r){super(e,t),this.keysChanged=r}}class jm extends xm{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new jm}clone(){const e=new jm;return this.forEach(((t,r)=>{e.set(r,t instanceof xm?t.clone():t)})),e}_callObserver(e,t){wm(this,e,new Um(this,e,t))}toJSON(){const e={};return this._map.forEach(((t,r)=>{if(!t.deleted){const n=t.content.getContent()[t.length-1];e[r]=n instanceof xm?n.toJSON():n}})),e}get size(){return[...Pm(this._map)].length}keys(){return Up(Pm(this._map),(e=>e[0]))}values(){return Up(Pm(this._map),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return Up(Pm(this._map),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){return this._map.forEach(((t,r)=>{t.deleted||e(t.content.getContent()[t.length-1],r,this)})),{}}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?Qf(this.doc,(t=>{Dm(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?Qf(this.doc,(r=>{zm(r,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return Im(this,e)}has(e){return Lm(this,e)}clear(){null!==this.doc?Qf(this.doc,(e=>{this.forEach((function(t,r,n){Dm(e,n,r)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(kg)}}const Vm=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&((e,t)=>e===t||fp(e)===fp(t)&&((e,t)=>{for(const r in e)if(!t(e[r],r))return!1;return!0})(e,((e,r)=>(void 0!==e||mp(t,r))&&t[r]===e)))(e,t);class $m{constructor(e,t,r,n){this.left=e,this.right=t,this.index=r,this.currentAttributes=n}forward(){if(null===this.right&&dp(),this.right.content.constructor===gg)this.right.deleted||Jm(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const Hm=(e,t,r)=>{for(;null!==t.right&&r>0;){if(t.right.content.constructor===gg)t.right.deleted||Jm(t.currentAttributes,t.right.content);else t.right.deleted||(r<t.right.length&&Hf(e,Tf(t.right.id.client,t.right.id.clock+r)),t.index+=t.right.length,r-=t.right.length);t.left=t.right,t.right=t.right.right}return t},Wm=(e,t,r)=>{const n=new Map,i=vm(t,r);if(i){const t=new $m(i.p.left,i.p,i.index,n);return Hm(e,t,r-i.index)}{const i=new $m(null,t._start,0,n);return Hm(e,i,r)}},Gm=(e,t,r,n)=>{for(;null!==r.right&&(!0===r.right.deleted||r.right.content.constructor===gg&&Vm(n.get(r.right.content.key),r.right.content.value));)r.right.deleted||n.delete(r.right.content.key),r.forward();const i=e.doc,o=i.clientID;n.forEach(((n,s)=>{const a=r.left,l=r.right,c=new Dg(Tf(o,qf(i.store,o)),a,a&&a.lastId,l,l&&l.id,t,null,new gg(s,n));c.integrate(e,0),r.right=c,r.forward()}))},Jm=(e,t)=>{const{key:r,value:n}=t;null===n?e.delete(r):e.set(r,n)},Km=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===gg&&Vm(t[e.right.content.key]||null,e.right.content.value));)e.forward()},Ym=(e,t,r,n)=>{const i=e.doc,o=i.clientID,s=new Map;for(const a in n){const l=n[a],c=r.currentAttributes.get(a)||null;if(!Vm(c,l)){s.set(a,c);const{left:n,right:h}=r;r.right=new Dg(Tf(o,qf(i.store,o)),n,n&&n.lastId,h,h&&h.id,t,null,new gg(a,l)),r.right.integrate(e,0),r.forward()}}return s},Xm=(e,t,r,n,i)=>{r.currentAttributes.forEach(((e,t)=>{void 0===i[t]&&(i[t]=null)}));const o=e.doc,s=o.clientID;Km(r,i);const a=Ym(e,t,r,i),l=n.constructor===String?new bg(n):n instanceof xm?new Ag(n):new mg(n);let{left:c,right:h,index:u}=r;t._searchMarker&&bm(t._searchMarker,r.index,l.getLength()),h=new Dg(Tf(s,qf(o.store,s)),c,c&&c.lastId,h,h&&h.id,t,null,l),h.integrate(e,0),r.right=h,r.index=u,r.forward(),Gm(e,t,r,a)},Zm=(e,t,r,n,i)=>{const o=e.doc,s=o.clientID;Km(r,i);const a=Ym(e,t,r,i);for(;n>0&&null!==r.right;){if(!r.right.deleted)switch(r.right.content.constructor){case gg:{const{key:t,value:n}=r.right.content,o=i[t];void 0!==o&&(Vm(o,n)?a.delete(t):a.set(t,n),r.right.delete(e));break}default:n<r.right.length&&Hf(e,Tf(r.right.id.client,r.right.id.clock+n)),n-=r.right.length}r.forward()}if(n>0){let i="";for(;n>0;n--)i+="\n";r.right=new Dg(Tf(s,qf(o.store,s)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,t,null,new bg(i)),r.right.integrate(e,0),r.forward()}Gm(e,t,r,a)},Qm=(e,t,r,n,i)=>{let o=r;const s=Uu(i);for(;o&&(!o.countable||o.deleted);)o.deleted||o.content.constructor!==gg||Jm(s,o.content),o=o.right;let a=0,l=!1;for(;t!==o;){if(r===t&&(l=!0),!t.deleted){const r=t.content;switch(r.constructor){case gg:{const{key:o,value:c}=r;(s.get(o)||null)===c&&(n.get(o)||null)!==c||(t.delete(e),a++,l||(i.get(o)||null)!==c||(n.get(o)||null)===c||i.delete(o));break}}}t=t.right}return a},eg=(e,t,r)=>{const n=r,i=Uu(t.currentAttributes),o=t.right;for(;r>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case Ag:case mg:case bg:r<t.right.length&&Hf(e,Tf(t.right.id.client,t.right.id.clock+r)),r-=t.right.length,t.right.delete(e)}t.forward()}o&&Qm(e,o,t.right,i,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&bm(s._searchMarker,t.index,-n+r),t};class tg extends pm{constructor(e,t,r){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,r.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];Qf(e,(e=>{const r=new Map,n=new Map;let i=this.target._start,o=null;const s={};let a="",l=0,c=0;const h=()=>{if(null!==o){let e;switch(o){case"delete":e={delete:c},c=0;break;case"insert":e={insert:a},r.size>0&&(e.attributes={},r.forEach(((t,r)=>{null!==t&&(e.attributes[r]=t)}))),a="";break;case"retain":if(e={retain:l},Object.keys(s).length>0){e.attributes={};for(const t in s)e.attributes[t]=s[t]}l=0}t.push(e),o=null}};for(;null!==i;){switch(i.content.constructor){case Ag:case mg:this.adds(i)?this.deletes(i)||(h(),o="insert",a=i.content.getContent()[0],h()):this.deletes(i)?("delete"!==o&&(h(),o="delete"),c+=1):i.deleted||("retain"!==o&&(h(),o="retain"),l+=1);break;case bg:this.adds(i)?this.deletes(i)||("insert"!==o&&(h(),o="insert"),a+=i.content.str):this.deletes(i)?("delete"!==o&&(h(),o="delete"),c+=i.length):i.deleted||("retain"!==o&&(h(),o="retain"),l+=i.length);break;case gg:{const{key:t,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){const l=r.get(t)||null;Vm(l,a)?null!==a&&i.delete(e):("retain"===o&&h(),Vm(a,n.get(t)||null)?delete s[t]:s[t]=a)}}else if(this.deletes(i)){n.set(t,a);const e=r.get(t)||null;Vm(e,a)||("retain"===o&&h(),s[t]=e)}else if(!i.deleted){n.set(t,a);const r=s[t];void 0!==r&&(Vm(r,a)?null!==r&&i.delete(e):("retain"===o&&h(),null===a?delete s[t]:s[t]=a))}i.deleted||("insert"===o&&h(),Jm(r,i.content));break}}i=i.right}for(h();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class rg extends xm{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(hv){console.error(hv)}this._pending=null}_copy(){return new rg}clone(){const e=new rg;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const r=new tg(this,e,t),n=e.doc;if(wm(this,e,r),!e.local){let t=!1;for(const[r,i]of e.afterState.entries()){const o=e.beforeState.get(r)||0;if(i!==o&&(Gf(e,n.store.clients.get(r),o,i,(e=>{e.deleted||e.content.constructor!==gg||(t=!0)})),t))break}t||$p(e,e.deleteSet,(e=>{e instanceof hg||t||e.parent===this&&e.content.constructor===gg&&(t=!0)})),Qf(n,(e=>{t?(e=>{let t=0;Qf(e.doc,(r=>{let n=e._start,i=e._start,o=qu();const s=Uu(o);for(;i;)!1===i.deleted&&(i.content.constructor===gg?Jm(s,i.content):(t+=Qm(r,n,i,o,s),o=Uu(s),n=i)),i=i.right}))})(this):$p(e,e.deleteSet,(t=>{t instanceof hg||t.parent===this&&((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const r=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===gg){const n=t.content.key;r.has(n)?t.delete(e):r.add(n)}t=t.left}})(e,t)}))}))}}toString(){let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===bg&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?Qf(this.doc,(r=>{const n=new $m(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const o=e[i];if(void 0!==o.insert){const s=t||"string"!=typeof o.insert||i!==e.length-1||null!==n.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!=typeof s||s.length>0)&&Xm(r,this,n,s,o.attributes||{})}else void 0!==o.retain?Zm(r,this,n,o.retain,o.attributes||{}):void 0!==o.delete&&eg(r,n,o.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,r){const n=[],i=new Map,o=this.doc;let s="",a=this._start;function l(){if(s.length>0){const e={};let t=!1;i.forEach(((r,n)=>{t=!0,e[n]=r}));const r={insert:s};t&&(r.attributes=e),n.push(r),s=""}}return Qf(o,(o=>{for(e&&Lf(o,e),t&&Lf(o,t);null!==a;){if(Bf(a,e)||void 0!==t&&Bf(a,t))switch(a.content.constructor){case bg:{const n=i.get("ychange");void 0===e||Bf(a,e)?void 0===t||Bf(a,t)?void 0!==n&&(l(),i.delete("ychange")):void 0!==n&&n.user===a.id.client&&"added"===n.state||(l(),i.set("ychange",r?r("added",a.id):{type:"added"})):void 0!==n&&n.user===a.id.client&&"removed"===n.state||(l(),i.set("ychange",r?r("removed",a.id):{type:"removed"})),s+=a.content.str;break}case Ag:case mg:{l();const e={insert:a.content.getContent()[0]};if(i.size>0){const t={};e.attributes=t,i.forEach(((e,r)=>{t[r]=e}))}n.push(e);break}case gg:Bf(a,e)&&(l(),Jm(i,a.content))}a=a.right}l()}),Lf),n}insert(e,t,r){if(t.length<=0)return;const n=this.doc;null!==n?Qf(n,(n=>{const i=Wm(n,this,e);r||(r={},i.currentAttributes.forEach(((e,t)=>{r[t]=e}))),Xm(n,this,i,t,r)})):this._pending.push((()=>this.insert(e,t,r)))}insertEmbed(e,t,r={}){const n=this.doc;null!==n?Qf(n,(n=>{const i=Wm(n,this,e);Xm(n,this,i,t,r)})):this._pending.push((()=>this.insertEmbed(e,t,r)))}delete(e,t){if(0===t)return;const r=this.doc;null!==r?Qf(r,(r=>{eg(r,Wm(r,this,e),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,r){if(0===t)return;const n=this.doc;null!==n?Qf(n,(n=>{const i=Wm(n,this,e);null!==i.right&&Zm(n,this,i,t,r)})):this._pending.push((()=>this.format(e,t,r)))}removeAttribute(e){null!==this.doc?Qf(this.doc,(t=>{Dm(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?Qf(this.doc,(r=>{zm(r,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return Im(this,e)}getAttributes(e){return Bm(this)}_write(e){e.writeTypeRef(Sg)}}class ng{constructor(e,t=(()=>!0)){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==og&&t.constructor!==ig||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class ig extends xm{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ig}clone(){const e=new ig;return e.insert(0,this.toArray().map((e=>e instanceof xm?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new ng(this,e)}querySelector(e){e=e.toUpperCase();const t=new ng(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),Array.from(new ng(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){wm(this,e,new sg(this,t,e))}toString(){return Tm(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},r){const n=e.createDocumentFragment();return void 0!==r&&r._createAssociation(n,this),Cm(this,(i=>{n.insertBefore(i.toDOM(e,t,r),null)})),n}insert(e,t){null!==this.doc?Qf(this.doc,(r=>{Nm(r,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)Qf(this.doc,(r=>{const n=e&&e instanceof xm?e._item:e;Em(r,this,n,t)}));else{const r=this._prelimContent,n=null===e?0:r.findIndex((t=>t===e))+1;if(0===n&&null!==e)throw hp("Reference item not found");r.splice(n,0,...t)}}delete(e,t=1){null!==this.doc?Qf(this.doc,(r=>{Rm(r,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return Sm(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Am(this,e)}slice(e=0,t=this.length){return km(this,e,t)}_write(e){e.writeTypeRef(Cg)}}class og extends ig{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new og(this.nodeName)}clone(){const e=new og(this.nodeName),t=this.getAttributes();for(const r in t)e.setAttribute(r,t[r]);return e.insert(0,this.toArray().map((e=>e instanceof xm?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],r=[];for(const o in e)r.push(o);r.sort();const n=r.length;for(let o=0;o<n;o++){const n=r[o];t.push(n+'="'+e[n]+'"')}const i=this.nodeName.toLocaleLowerCase();return`<${i}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${i}>`}removeAttribute(e){null!==this.doc?Qf(this.doc,(t=>{Dm(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?Qf(this.doc,(r=>{zm(r,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return Im(this,e)}hasAttribute(e){return Lm(this,e)}getAttributes(e){return Bm(this)}toDOM(e=document,t={},r){const n=e.createElement(this.nodeName),i=this.getAttributes();for(const o in i)n.setAttribute(o,i[o]);return Cm(this,(i=>{n.appendChild(i.toDOM(e,t,r))})),void 0!==r&&r._createAssociation(n,this),n}_write(e){e.writeTypeRef(_g),e.writeKey(this.nodeName)}}class sg extends pm{constructor(e,t,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class ag extends jm{constructor(e){super(),this.hookName=e}_copy(){return new ag(this.hookName)}clone(){const e=new ag(this.hookName);return this.forEach(((t,r)=>{e.set(r,t)})),e}toDOM(e=document,t={},r){const n=t[this.hookName];let i;return i=void 0!==n?n.createDom(this):document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),void 0!==r&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(Tg),e.writeKey(this.hookName)}}class lg extends rg{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new lg}clone(){const e=new lg;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,r){const n=e.createTextNode(this.toString());return void 0!==r&&r._createAssociation(n,this),n}toString(){return this.toDelta().map((e=>{const t=[];for(const n in e.attributes){const r=[];for(const t in e.attributes[n])r.push({key:t,value:e.attributes[n][t]});r.sort(((e,t)=>e.key<t.key?-1:1)),t.push({nodeName:n,attrs:r})}t.sort(((e,t)=>e.nodeName<t.nodeName?-1:1));let r="";for(let n=0;n<t.length;n++){const e=t[n];r+=`<${e.nodeName}`;for(let t=0;t<e.attrs.length;t++){const n=e.attrs[t];r+=` ${n.key}="${n.value}"`}r+=">"}r+=e.insert;for(let n=t.length-1;n>=0;n--)r+=`</${t[n].nodeName}>`;return r})).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Mg)}}class cg{constructor(e,t){this.id=e,this.length=t}get deleted(){throw up()}mergeWith(e){return!1}write(e,t,r){throw up()}integrate(e,t){throw up()}}class hg extends cg{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Uf(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class ug{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ug(this.content)}splice(e){throw up()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class dg{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new dg(this.len)}splice(e){const t=new dg(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){Jp(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const pg=(e,t)=>new tf(l(a({guid:e},t),{shouldLoad:t.shouldLoad||t.autoLoad||!1}));class fg{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new fg(pg(this.doc.guid,this.opts))}splice(e){throw up()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class mg{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new mg(this.embed)}splice(e){throw up()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class gg{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new gg(this.key,this.value)}splice(e){throw up()}mergeWith(e){return!1}integrate(e,t){t.parent._searchMarker=null}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class yg{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new yg(this.arr)}splice(e){const t=new yg(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const r=this.arr.length;e.writeLen(r-t);for(let n=t;n<r;n++){const t=this.arr[n];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}class vg{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new vg(this.arr)}splice(e){const t=new vg(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const r=this.arr.length;e.writeLen(r-t);for(let n=t;n<r;n++){const t=this.arr[n];e.writeAny(t)}}getRef(){return 8}}class bg{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new bg(this.str)}splice(e){const t=new bg(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const wg=[e=>new qm,e=>new jm,e=>new rg,e=>new og(e.readKey()),e=>new ig,e=>new ag(e.readKey()),e=>new lg],xg=0,kg=1,Sg=2,_g=3,Cg=4,Tg=5,Mg=6;class Ag{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ag(this.type._copy())}splice(e){throw up()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const Eg=(e,t)=>{let r,n=t,i=0;do{i>0&&(n=Tf(n.client,n.clock+i)),r=Vf(e,n),i=n.clock-r.id.clock,n=r.redone}while(null!==n&&r instanceof Dg);return{item:r,diff:i}},Og=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},Ng=(e,t,r)=>{const{client:n,clock:i}=t.id,o=new Dg(Tf(n,i+r),t,Tf(n,i+r-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(r));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),null!==t.redone&&(o.redone=Tf(t.redone.client,t.redone.clock+r)),t.right=o,null!==o.right&&(o.right.left=o),e._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),t.length=r,o},Rg=(e,t,r,n)=>{const i=e.doc,o=i.store,s=i.clientID,a=t.redone;if(null!==a)return Hf(e,a);let l,c=t.parent._item,h=null;if(null!==c&&!0===c.deleted){if(null===c.redone&&(!r.has(c)||null===Rg(e,c,r,n)))return null;for(;null!==c.redone;)c=Hf(e,c.redone)}const u=null===c?t.parent:c.content.type;if(null===t.parentSub){for(h=t.left,l=t;null!==h;){let t=h;for(;null!==t&&t.parent._item!==c;)t=null===t.redone?null:Hf(e,t.redone);if(null!==t&&t.parent._item===c){h=t;break}h=h.left}for(;null!==l;){let t=l;for(;null!==t&&t.parent._item!==c;)t=null===t.redone?null:Hf(e,t.redone);if(null!==t&&t.parent._item===c){l=t;break}l=l.right}}else if(l=null,t.right){for(h=t;null!==h&&null!==h.right&&Hp(n,h.right.id);)h=h.right;for(;null!==h&&null!==h.redone;)h=Hf(e,h.redone);if(null===h||h.parent._item!==c)return null;if(h&&null!==h.right)return null}else h=u._map.get(t.parentSub)||null;const d=qf(o,s),p=Tf(s,d),f=new Dg(p,h,h&&h.lastId,l,l&&l.id,u,t.parentSub,t.content.copy());return t.redone=p,Og(f,!0),f.integrate(e,0),f};class Dg extends cg{constructor(e,t,r,n,i,o,s,a){super(e,a.getLength()),this.origin=r,this.left=t,this.right=n,this.rightOrigin=i,this.parent=o,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=qf(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=qf(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===_f&&this.id.client!==this.parent.client&&this.parent.clock>=qf(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Wf(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Hf(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===hg||this.right&&this.right.constructor===hg)&&(this.parent=null),this.parent){if(this.parent.constructor===_f){const e=Vf(t,this.parent);e.constructor===hg?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===Dg&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Dg&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Wf(e,e.doc.store,Tf(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,r=this.left;if(null!==r)t=r.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const n=new Set,i=new Set;for(;null!==t&&t!==this.right;){if(i.add(t),n.add(t),Cf(this.origin,t.origin)){if(t.id.client<this.id.client)r=t,n.clear();else if(Cf(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!i.has(Vf(e.doc.store,t.origin)))break;n.has(Vf(e.doc.store,t.origin))||(r=t,n.clear())}t=t.right}this.left=r}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Uf(e.doc.store,this),this.content.integrate(e,this),Yf(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new hg(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:Tf(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Cf(e.origin,this.lastId)&&this.right===e&&Cf(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),Jp(e.deleteSet,this.id.client,this.id.clock,this.length),Yf(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw dp();this.content.gc(e),t?((e,t,r)=>{const n=e.clients.get(t.id.client);n[jf(n,t.id.clock)]=r})(e,this,new hg(this.id,this.length)):this.content=new dg(this.length)}write(e,t){const r=t>0?Tf(this.id.client,this.id.clock+t-1):this.origin,n=this.rightOrigin,i=this.parentSub,o=31&this.content.getRef()|(null===r?0:128)|(null===n?0:64)|(null===i?0:32);if(e.writeInfo(o),null!==r&&e.writeLeftID(r),null!==n&&e.writeRightID(n),null===r&&null===n){const t=this.parent;if(void 0!==t._item){const r=t._item;if(null===r){const r=Mf(t);e.writeParentInfo(!0),e.writeString(r)}else e.writeParentInfo(!1),e.writeLeftID(r.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===_f?(e.writeParentInfo(!1),e.writeLeftID(t)):dp();null!==i&&e.writeString(i)}this.content.write(e,t)}}const zg=(e,t)=>Ig[31&t](e),Ig=[()=>{dp()},e=>new dg(e.readLen()),e=>{const t=e.readLen(),r=[];for(let n=0;n<t;n++){const t=e.readString();"undefined"===t?r.push(void 0):r.push(JSON.parse(t))}return new yg(r)},e=>new ug(e.readBuf()),e=>new bg(e.readString()),e=>new mg(e.readJSON()),e=>new gg(e.readString(),e.readJSON()),e=>new Ag(wg[e.readTypeRef()](e)),e=>{const t=e.readLen(),r=[];for(let n=0;n<t;n++)r.push(e.readAny());return new vg(r)},e=>new fg(pg(e.readString(),e.readAny())),()=>{dp()}];class Bg extends cg{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){dp()}write(e,t){e.writeInfo(10),Ud(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const Lg="undefined"!=typeof window?window:"undefined"!=typeof global?global:{};!0===Lg["__ $YJS$ __"]&&console.warn("Yjs was already imported. Importing different versions of Yjs often leads to issues."),Lg["__ $YJS$ __"]=!0;class Pg extends Gu{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const e=ap();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach(((r,n)=>{n!==this.clientID&&3e4<=e-r.lastUpdated&&this.states.has(n)&&t.push(n)})),t.length>0&&Fg(this,t,"timeout")}),Ju(3e3)),e.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,r=this.meta.get(t),n=void 0===r?0:r.clock+1,i=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:n,lastUpdated:ap()});const o=[],s=[],a=[],l=[];null===e?l.push(t):null==i?null!=e&&o.push(t):(s.push(t),vp(i,e)||a.push(t)),(o.length>0||a.length>0||l.length>0)&&this.emit("change",[{added:o,updated:a,removed:l},"local"]),this.emit("update",[{added:o,updated:s,removed:l},"local"])}setLocalStateField(e,t){const r=this.getLocalState();null!==r&&this.setLocalState(l(a({},r),{[e]:t}))}getStates(){return this.states}}const Fg=(e,t,r)=>{const n=[];for(let i=0;i<t.length;i++){const r=t[i];if(e.states.has(r)){if(e.states.delete(r),r===e.clientID){const t=e.meta.get(r);e.meta.set(r,{clock:t.clock+1,lastUpdated:ap()})}n.push(r)}}n.length>0&&(e.emit("change",[{added:[],updated:[],removed:n},r]),e.emit("update",[{added:[],updated:[],removed:n},r]))},qg=(e,t,r=e.states)=>{const n=t.length,i=Ld();Ud(i,n);for(let o=0;o<n;o++){const n=t[o],s=r.get(n)||null,a=e.meta.get(n).clock;Ud(i,n),Ud(i,a),Vd(i,JSON.stringify(s))}return Pd(i)},Ug=()=>{let e=!0;return(t,r)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==r&&r()}},jg=(e,t)=>{let r=0,n=0;for(;r<e.length&&r<t.length&&e[r]===t[r];)r++;if(r!==e.length||r!==t.length)for(;n+r<e.length&&n+r<t.length&&e[e.length-n-1]===t[t.length-n-1];)n++;return{index:r,remove:e.length-r-n,insert:t.slice(r,t.length-n)}},Vg=new Ol("y-sync"),$g=new Ol("y-undo");new Ol("yjs-cursor");const Hg=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!Hp(t.ds,e.id),Wg=[{light:"#ecd44433",dark:"#ecd444"}],Gg=(e,t,r)=>{if(!e.has(r)){if(e.size<t.length){const r=Vu();e.forEach((e=>r.add(e))),t=t.filter((e=>!r.has(e)))}e.set(r,(n=t)[Ju(np()*n.length)])}var n;return e.get(r)},Jg=(e,{colors:t=Wg,colorMapping:r=new Map,permanentUserData:n=null}={})=>{let i=!1;const o=new Ml({props:{editable:e=>{const t=Vg.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:Vg,state:{init:(i,o)=>({type:e,doc:e.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,colors:t,colorMapping:r,permanentUserData:n}),apply:(e,t)=>{const r=e.getMeta(Vg);if(void 0!==r){t=Object.assign({},t);for(const e in r)t[e]=r[e]}return t.isChangeOrigin=void 0!==r&&!!r.isChangeOrigin,null!==t.binding&&(void 0===r||null==r.snapshot&&null==r.prevSnapshot||setTimeout((()=>{null==r.restore?t.binding._renderSnapshot(r.snapshot,r.prevSnapshot,t):(t.binding._renderSnapshot(r.snapshot,r.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,t.binding._prosemirrorChanged(t.binding.prosemirrorView.state.doc))}),0)),t}},view:t=>{const r=new Yg(e,t);return setTimeout((()=>{r._forceRerender(),t.dispatch(t.state.tr.setMeta(Vg,{binding:r}))}),0),{update:()=>{const e=o.getState(t.state);null==e.snapshot&&null==e.prevSnapshot&&(i||null!==t.state.doc.content.findDiffStart(t.state.doc.type.createAndFill().content))&&(i=!0,r._prosemirrorChanged(t.state.doc))},destroy:()=>{r.destroy()}}}});return o},Kg=(e,t)=>({anchor:dy(t.selection.anchor,e.type,e.mapping),head:dy(t.selection.head,e.type,e.mapping)});class Yg{constructor(e,t){this.type=e,this.prosemirrorView=t,this.mux=Ug(),this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&(this.beforeTransactionSelection=Kg(this,t.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),e.observeDeep(this._observeFunction),this._domSelectionInView=null}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(dd&&null===this._domSelectionInView&&(setTimeout((()=>{this._domSelectionInView=null}),0),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection(),t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);0===t.getClientRects().length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);const r=t.getBoundingClientRect(),n=kp.documentElement;return r.bottom>=0&&r.right>=0&&r.left<=(window.innerWidth||n.clientWidth||0)&&r.top<=(window.innerHeight||n.clientHeight||0)}renderSnapshot(e,t){t||(t=If(Kp(),new Map)),this.prosemirrorView.dispatch(this.prosemirrorView.state.tr.setMeta(Vg,{snapshot:e,prevSnapshot:t}))}unrenderSnapshot(){this.mapping=new Map,this.mux((()=>{const e=this.type.toArray().map((e=>Zg(e,this.prosemirrorView.state.schema,this.mapping))).filter((e=>null!==e)),t=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ts(new bs(e),0,0));t.setMeta(Vg,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(t)}))}_forceRerender(){this.mapping=new Map,this.mux((()=>{const e=this.type.toArray().map((e=>Zg(e,this.prosemirrorView.state.schema,this.mapping))).filter((e=>null!==e)),t=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ts(new bs(e),0,0));this.prosemirrorView.dispatch(t.setMeta(Vg,{isChangeOrigin:!0}))}))}_renderSnapshot(e,t,r){var n;e||(n=this.doc,e=If(Yp(n.store),Ff(n.store))),this.mapping=new Map,this.mux((()=>{this.doc.transact((n=>{const i=r.permanentUserData;i&&i.dss.forEach((e=>{$p(n,e,(e=>{}))}));const o=(e,t)=>{const n="added"===e?i.getUserByClientId(t.client):i.getUserByDeletedId(t);return{user:n,type:e,color:Gg(r.colorMapping,r.colors,n)}},s=_m(this.type,new zf(t.ds,e.sv)).map((r=>!r._item.deleted||Hg(r._item,e)||Hg(r._item,t)?Zg(r,this.prosemirrorView.state.schema,new Map,e,t,o):null)).filter((e=>null!==e)),a=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ts(new bs(s),0,0));this.prosemirrorView.dispatch(a.setMeta(Vg,{isChangeOrigin:!0}))}),Vg)}))}_typeChanged(e,t){const r=Vg.getState(this.prosemirrorView.state);0!==e.length&&null==r.snapshot&&null==r.prevSnapshot?this.mux((()=>{const e=(e,t)=>this.mapping.delete(t);$p(t,t.deleteSet,(e=>e.constructor===Dg&&this.mapping.delete(e.content.type))),t.changed.forEach(e),t.changedParentTypes.forEach(e);const r=this.type.toArray().map((e=>Xg(e,this.prosemirrorView.state.schema,this.mapping))).filter((e=>null!==e));let n=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ts(new bs(r),0,0));((e,t,r)=>{if(null!==t&&null!==t.anchor&&null!==t.head){const n=fy(r.doc,r.type,t.anchor,r.mapping),i=fy(r.doc,r.type,t.head,r.mapping);null!==n&&null!==i&&(e=e.setSelection(hl.create(e.doc,n,i)))}})(n,this.beforeTransactionSelection,this),n=n.setMeta(Vg,{isChangeOrigin:!0}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&n.scrollIntoView(),this.prosemirrorView.dispatch(n)})):this.renderSnapshot(r.snapshot,r.prevSnapshot)}_prosemirrorChanged(e){this.mux((()=>{this.doc.transact((()=>{hy(this.doc,this.type,e,this.mapping),this.beforeTransactionSelection=Kg(this,this.prosemirrorView.state)}),Vg)}))}destroy(){this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const Xg=(e,t,r,n,i,o)=>{const s=r.get(e);if(void 0===s){if(e instanceof og)return Zg(e,t,r,n,i,o);throw up()}return s},Zg=(e,t,r,n,i,o)=>{const s=[],a=e=>{if(e.constructor===og){const a=Xg(e,t,r,n,i,o);null!==a&&s.push(a)}else{const a=Qg(e,t,r,n,i,o);null!==a&&a.forEach((e=>{null!==e&&s.push(e)}))}};void 0===n||void 0===i?e.toArray().forEach(a):_m(e,new zf(i.ds,n.sv)).forEach(a);try{const a=e.getAttributes(n);void 0!==n&&(Hg(e._item,n)?Hg(e._item,i)||(a.ychange=o?o("added",e._item.id):{type:"added"}):a.ychange=o?o("removed",e._item.id):{type:"removed"});const l=t.node(e.nodeName,a,s);return r.set(e,l),l}catch(hv){return e.doc.transact((t=>{e._item.delete(t)}),Vg),r.delete(e),null}},Qg=(e,t,r,n,i,o)=>{const s=[],a=e.toDelta(n,i,o);try{for(let e=0;e<a.length;e++){const r=a[e],n=[];for(const e in r.attributes)n.push(t.mark(e,r.attributes[e]));s.push(t.text(r.insert,n))}}catch(hv){return e.doc.transact((t=>{e._item.delete(t)}),Vg),null}return s},ey=(e,t)=>e instanceof Array?((e,t)=>{const r=new lg,n=e.map((e=>({insert:e.text,attributes:cy(e.marks)})));return r.applyDelta(n),t.set(r,e),r})(e,t):((e,t)=>{const r=new og(e.type.name);for(const n in e.attrs){const t=e.attrs[n];null!==t&&"ychange"!==n&&r.setAttribute(n,t)}return r.insert(0,ny(e).map((e=>ey(e,t)))),t.set(r,e),r})(e,t),ty=e=>"object"==typeof e&&null!==e,ry=(e,t)=>{const r=Object.keys(e).filter((t=>null!==e[t]));let n=r.length===Object.keys(t).filter((e=>null!==t[e])).length;for(let i=0;i<r.length&&n;i++){const o=r[i],s=e[o],a=t[o];n="ychange"===o||s===a||ty(s)&&ty(a)&&ry(s,a)}return n},ny=e=>{const t=e.content.content,r=[];for(let n=0;n<t.length;n++){const e=t[n];if(e.isText){const e=[];for(let r=t[n];n<t.length&&r.isText;r=t[++n])e.push(r);n--,r.push(e)}else r.push(e)}return r},iy=(e,t)=>{const r=e.toDelta();return r.length===t.length&&r.every(((e,r)=>e.insert===t[r].text&&pp(e.attributes||{}).length===t[r].marks.length&&t[r].marks.every((t=>ry(e.attributes[t.type.name]||{},t.attrs)))))},oy=(e,t)=>{if(e instanceof og&&!(t instanceof Array)&&uy(e,t)){const r=ny(t);return e._length===r.length&&ry(e.getAttributes(),t.attrs)&&e.toArray().every(((e,t)=>oy(e,r[t])))}return e instanceof lg&&t instanceof Array&&iy(e,t)},sy=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every(((e,r)=>t[r]===e)),ay=(e,t,r)=>{const n=e.toArray(),i=ny(t),o=i.length,s=n.length,a=Xu(s,o);let l=0,c=0,h=!1;for(;l<a;l++){const e=n[l],t=i[l];if(sy(r.get(e),t))h=!0;else if(!oy(e,t))break}for(;l+c<a;c++){const e=n[s-c-1],t=i[o-c-1];if(sy(r.get(e),t))h=!0;else if(!oy(e,t))break}return{equalityFactor:l+c,foundMappedChild:h}},ly=(e,t,r)=>{r.set(e,t);const{nAttrs:n,str:i}=(e=>{let t="",r=e._start;const n={};for(;null!==r;)r.deleted||(r.countable&&r.content instanceof bg?t+=r.content.str:r.content instanceof gg&&(n[r.content.key]=null)),r=r.right;return{str:t,nAttrs:n}})(e),o=t.map((e=>({insert:e.text,attributes:Object.assign({},n,cy(e.marks))}))),{insert:s,remove:a,index:l}=jg(i,o.map((e=>e.insert)).join(""));e.delete(l,a),e.insert(l,s),e.applyDelta(o.map((e=>({retain:e.insert.length,attributes:e.attributes}))))},cy=e=>{const t={};return e.forEach((e=>{"ychange"!==e.type.name&&(t[e.type.name]=e.attrs)})),t},hy=(e,t,r,n)=>{if(t instanceof og&&t.nodeName!==r.type.name)throw new Error("node name mismatch!");if(n.set(t,r),t instanceof og){const e=t.getAttributes(),n=r.attrs;for(const r in n)null!==n[r]?e[r]!==n[r]&&"ychange"!==r&&t.setAttribute(r,n[r]):t.removeAttribute(r);for(const r in e)void 0===n[r]&&t.removeAttribute(r)}const i=ny(r),o=i.length,s=t.toArray(),a=s.length,l=Xu(o,a);let c=0,h=0;for(;c<l;c++){const e=s[c],t=i[c];if(!sy(n.get(e),t)){if(!oy(e,t))break;n.set(e,t)}}for(;h+c+1<l;h++){const e=s[a-h-1],t=i[o-h-1];if(!sy(n.get(e),t)){if(!oy(e,t))break;n.set(e,t)}}e.transact((()=>{for(;a-c-h>0&&o-c-h>0;){const r=s[c],l=i[c],u=s[a-h-1],d=i[o-h-1];if(r instanceof lg&&l instanceof Array)iy(r,l)||ly(r,l,n),c+=1;else{let i=r instanceof og&&uy(r,l),o=u instanceof og&&uy(u,d);if(i&&o){const e=ay(r,l,n),t=ay(u,d,n);e.foundMappedChild&&!t.foundMappedChild?o=!1:!e.foundMappedChild&&t.foundMappedChild||e.equalityFactor<t.equalityFactor?i=!1:o=!1}i?(hy(e,r,l,n),c+=1):o?(hy(e,u,d,n),h+=1):(t.delete(c,1),t.insert(c,[ey(l,n)]),c+=1)}}const r=a-c-h;if(r>0&&t.delete(c,r),c+h<o){const e=[];for(let t=c;t<o-h;t++)e.push(ey(i[t],n));t.insert(c,e)}}),Vg)},uy=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name,dy=(e,t,r)=>{if(0===e)return Rf(t,0);let n=null===t._first?null:t._first.content.type;for(;null!==n&&t!==n;){if(n instanceof lg){if(n._length>=e)return Rf(n,e);if(e-=n._length,null!==n._item&&null!==n._item.next)n=n._item.next.content.type;else{do{n=null===n._item?null:n._item.parent,e--}while(n!==t&&null!==n&&null!==n._item&&null===n._item.next);null!==n&&n!==t&&(n=null===n._item?null:n._item.next.content.type)}}else{const i=(r.get(n)||{nodeSize:0}).nodeSize;if(null!==n._first&&e<i)n=n._first.content.type,e--;else{if(1===e&&0===n._length&&i>1)return new Ef(null===n._item?null:n._item.id,null===n._item?Mf(n):null,null);if(e-=i,null!==n._item&&null!==n._item.next)n=n._item.next.content.type;else{if(0===e)return n=null===n._item?n:n._item.parent,new Ef(null===n._item?null:n._item.id,null===n._item?Mf(n):null,null);do{n=n._item.parent,e--}while(n!==t&&null===n._item.next);n!==t&&(n=n._item.next.content.type)}}}if(null===n)throw dp();if(0===e&&n.constructor!==lg&&n!==t)return py(n._item.parent,n._item)}return Rf(t,t._length)},py=(e,t)=>{let r=null,n=null;return null===e._item?n=Mf(e):r=Tf(e._item.id.client,e._item.id.clock),new Ef(r,n,t.id)},fy=(e,t,r,n)=>{const i=Df(r,e);if(null===i||i.type!==t&&!Af(t,i.type._item))return null;let o=i.type,s=0;if(o.constructor===lg)s=i.index;else if(null===o._item||!o._item.deleted){let e=o._first,t=0;for(;t<o._length&&t<i.index&&null!==e;){if(!e.deleted){const r=e.content.type;t++,s+=r instanceof lg?r._length:n.get(r).nodeSize}e=e.right}s+=1}for(;o!==t&&null!==o._item;){const e=o._item.parent;if(null===e._item||!e._item.deleted){s+=1;let t=e._first;for(;null!==t;){const e=t.content.type;if(e===o)break;t.deleted||(s+=e instanceof lg?e._length:n.get(e).nodeSize),t=t.right}}o=e}return s-1},my=e=>{const t=$g.getState(e).undoManager;if(null!=t)return t.undo(),!0},gy=e=>{const t=$g.getState(e).undoManager;if(null!=t)return t.redo(),!0},yy=new Set(["paragraph"]),vy=({protectedNodes:e=yy,trackedOrigins:t=[],undoManager:r=null}={})=>new Ml({key:$g,state:{init:(n,i)=>{const o=Vg.getState(i),s=r||new rm(o.type,{trackedOrigins:new Set([Vg].concat(t)),deleteFilter:t=>((e,t)=>!(e instanceof Dg&&e.content instanceof Ag&&(e.content.type instanceof rg||e.content.type instanceof og&&t.has(e.content.type.nodeName))&&0!==e.content.type._length))(t,e)});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(e,t,r,n)=>{const i=Vg.getState(n).binding,o=t.undoManager,s=o.undoStack.length>0,a=o.redoStack.length>0;return i?{undoManager:o,prevSel:Kg(i,r),hasUndoOps:s,hasRedoOps:a}:s!==t.hasUndoOps||a!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:o.undoStack.length>0,hasRedoOps:o.redoStack.length>0}):t}},view:e=>{const t=Vg.getState(e.state),r=$g.getState(e.state).undoManager;return r.on("stack-item-added",(({stackItem:r})=>{const n=t.binding;n&&r.meta.set(n,$g.getState(e.state).prevSel)})),r.on("stack-item-popped",(({stackItem:e})=>{const r=t.binding;r&&(r.beforeTransactionSelection=e.meta.get(r)||r.beforeTransactionSelection)})),{destroy:()=>{r.destroy()}}}}),by=e=>{if(e.shouldConnect&&null===e.ws){const t=new WebSocket(e.url),r=e.binaryType;let n=null;r&&(t.binaryType=r),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=t=>{e.lastMessageReceived=ap();const r=t.data,i="string"==typeof r?JSON.parse(r):r;i&&"pong"===i.type&&(clearTimeout(n),n=setTimeout(o,15e3)),e.emit("message",[i,e])};const i=t=>{null!==e.ws&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:t},e])):e.unsuccessfulReconnects++,setTimeout(by,Xu(1200*Yu(e.unsuccessfulReconnects+1),2500),e)),clearTimeout(n)},o=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>i(null),t.onerror=e=>i(e),t.onopen=()=>{e.lastMessageReceived=ap(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),n=setTimeout(o,15e3)}}};class wy extends Gu{constructor(e,{binaryType:t}={}){super(),this.url=e,this.ws=null,this.binaryType=t||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval((()=>{this.connected&&3e4<ap()-this.lastMessageReceived&&this.ws.close()}),15e3),by(this)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.connected||null!==this.ws||by(this)}}const xy=new Map;const ky="undefined"==typeof BroadcastChannel?class{constructor(e){var t;this.room=e,this.onmessage=null,t=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:zd(t.newValue||"")}),cd||addEventListener("storage",t)}postMessage(e){hd.setItem(this.room,Dd(new Uint8Array(e)))}}:BroadcastChannel,Sy=e=>ju(xy,e,(()=>{const t=new Set,r=new ky(e);return r.onmessage=e=>t.forEach((t=>t(e.data))),{bc:r,subs:t}}));var _y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Cy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ty,My,Ay,Ey={exports:{}},Oy=Ey.exports=(Ty=Math.floor,My=Math.abs,Ay=Math.pow,function(){function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){if(!a&&Cy)return Cy(s);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};t[s][0].call(c.exports,(function(e){return i(t[s][1][e]||e)}),c,c.exports,e,t,r,n)}return r[s].exports}for(var o=Cy,s=0;s<n.length;s++)i(n[s]);return i}return e}()({1:[function(e,t,r){function n(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function i(e,t,r){return 3*(t+r)/4-r}function o(e){var t,r,o=n(e),s=o[0],a=o[1],l=new u(i(e,s,a)),c=0,d=0<a?s-4:s;for(r=0;r<d;r+=4)t=h[e.charCodeAt(r)]<<18|h[e.charCodeAt(r+1)]<<12|h[e.charCodeAt(r+2)]<<6|h[e.charCodeAt(r+3)],l[c++]=255&t>>16,l[c++]=255&t>>8,l[c++]=255&t;return 2===a&&(t=h[e.charCodeAt(r)]<<2|h[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===a&&(t=h[e.charCodeAt(r)]<<10|h[e.charCodeAt(r+1)]<<4|h[e.charCodeAt(r+2)]>>2,l[c++]=255&t>>8,l[c++]=255&t),l}function s(e){return c[63&e>>18]+c[63&e>>12]+c[63&e>>6]+c[63&e]}function a(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(16711680&e[o]<<16)+(65280&e[o+1]<<8)+(255&e[o+2]),i.push(s(n));return i.join("")}function l(e){for(var t,r=e.length,n=r%3,i=[],o=16383,s=0,l=r-n;s<l;s+=o)i.push(a(e,s,s+o>l?l:s+o));return 1===n?(t=e[r-1],i.push(c[t>>2]+c[63&t<<4]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(c[t>>10]+c[63&t>>4]+c[63&t<<2]+"=")),i.join("")}r.byteLength=function(e){var t=n(e),r=t[0],i=t[1];return 3*(r+i)/4-i},r.toByteArray=o,r.fromByteArray=l;for(var c=[],h=[],u="undefined"==typeof Uint8Array?Array:Uint8Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,f=d.length;p<f;++p)c[p]=d[p],h[d.charCodeAt(p)]=p;h[45]=62,h[95]=63},{}],2:[function(){},{}],3:[function(e,t,r){(function(){(function(){var t=String.fromCharCode,n=Math.min;function i(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,r)}function s(e,t,r){if("string"==typeof e)return h(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);var i=p(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e,t,r){return a(e),0>=e||void 0===t?i(e):"string"==typeof r?i(e).fill(t,r):i(e).fill(t)}function c(e){return a(e),i(0>e?0:0|f(e))}function h(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|m(e,t),n=i(r),s=n.write(e,t);return s!==r&&(n=n.slice(0,s)),n}function u(e){for(var t=0>e.length?0:0|f(e.length),r=i(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){if(0>t||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r)).__proto__=o.prototype,n}function p(e){if(o.isBuffer(e)){var t=0|f(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0:"number"!=typeof e.length||W(e.length)?i(0):u(e)}function f(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function m(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(i)return n?-1:q(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),0>=r)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return M(this,t,r);case"ascii":return E(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:-2147483648>r&&(r=-2147483648),W(r=+r)&&(r=i?0:e.length-1),0>r&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(0>r){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var s,a=1,l=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=(n+"").toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>e.length||2>t.length)return-1;a=2,l/=2,c/=2,r/=2}if(i){var h=-1;for(s=r;s<l;s++)if(o(e,s)!==o(t,-1===h?0:s-h))-1!==h&&(s-=s-h),h=-1;else if(-1===h&&(h=s),s-h+1===c)return h*a}else for(r+c>l&&(r=l-c),s=r;0<=s;s--){for(var u=!0,d=0;d<c;d++)if(o(e,s+d)!==o(t,d)){u=!1;break}if(u)return s}return-1}function w(e,t,r,n){r=+r||0;var i=e.length-r;n?(n=+n)>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s,a=0;a<n;++a){if(W(s=parseInt(t.substr(2*a,2),16)))return a;e[r+a]=s}return a}function x(e,t,r,n){return $(q(t,e.length-r),e,r,n)}function k(e,t,r,n){return $(U(t),e,r,n)}function S(e,t,r,n){return k(e,t,r,n)}function _(e,t,r,n){return $(V(t),e,r,n)}function C(e,t,r,n){return $(j(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,r))}function M(e,t,r){r=n(e.length,r);for(var i=[],o=t;o<r;){var s,a,l,c,h=e[o],u=null,d=239<h?4:223<h?3:191<h?2:1;o+d<=r&&(1===d?128>h&&(u=h):2===d?128==(192&(s=e[o+1]))&&127<(c=(31&h)<<6|63&s)&&(u=c):3===d?(s=e[o+1],a=e[o+2],128==(192&s)&&128==(192&a)&&2047<(c=(15&h)<<12|(63&s)<<6|63&a)&&(55296>c||57343<c)&&(u=c)):4===d&&(s=e[o+1],a=e[o+2],l=e[o+3],128==(192&s)&&128==(192&a)&&128==(192&l)&&65535<(c=(15&h)<<18|(63&s)<<12|(63&a)<<6|63&l)&&1114112>c&&(u=c))),null===u?(u=65533,d=1):65535<u&&(u-=65536,i.push(55296|1023&u>>>10),u=56320|1023&u),i.push(u),o+=d}return A(i)}function A(e){var r=e.length;if(r<=4096)return t.apply(String,e);for(var n="",i=0;i<r;)n+=t.apply(String,e.slice(i,i+=4096));return n}function E(e,r,i){var o="";i=n(e.length,i);for(var s=r;s<i;++s)o+=t(127&e[s]);return o}function O(e,r,i){var o="";i=n(e.length,i);for(var s=r;s<i;++s)o+=t(e[s]);return o}function N(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=F(e[o]);return i}function R(e,r,n){for(var i=e.slice(r,n),o="",s=0;s<i.length;s+=2)o+=t(i[s]+256*i[s+1]);return o}function D(e,t,r){if(e%1!=0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function z(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function I(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("Index out of range")}function B(e,t,r,n,i){return t=+t,r>>>=0,i||I(e,t,r,4),J.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,i){return t=+t,r>>>=0,i||I(e,t,r,8),J.write(e,t,r,n,52,8),r+8}function P(e){if(2>(e=(e=e.split("=")[0]).trim().replace(K,"")).length)return"";for(;e.length%4!=0;)e+="=";return e}function F(e){return 16>e?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if(55295<(r=e.charCodeAt(s))&&57344>r){if(!i){if(56319<r){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&o.push(239,191,189);continue}i=r;continue}if(56320>r){-1<(t-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,128>r){if(0>(t-=1))break;o.push(r)}else if(2048>r){if(0>(t-=2))break;o.push(192|r>>6,128|63&r)}else if(65536>r){if(0>(t-=3))break;o.push(224|r>>12,128|63&r>>6,128|63&r)}else{if(!(1114112>r))throw new Error("Invalid code point");if(0>(t-=4))break;o.push(240|r>>18,128|63&r>>12,128|63&r>>6,128|63&r)}}return o}function U(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function j(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!(0>(t-=2));++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}function V(e){return G.toByteArray(P(e))}function $(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!=e}var G=e("base64-js"),J=e("ieee754");r.Buffer=o,r.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},r.INSPECT_MAX_BYTES=50,r.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){return o.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){return o.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,r){return s(e,t,r)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,r){return l(e,t,r)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(H(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,s=0,a=n(r,i);s<a;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:i<r?1:0},o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(H(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?M(this,0,e):g.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,i,s){if(H(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),0>t||r>e.length||0>i||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(s>>>=0)-(i>>>=0),l=(r>>>=0)-(t>>>=0),c=n(a,l),h=this.slice(i,s),u=e.slice(t,r),d=0;d<c;++d)if(h[d]!==u[d]){a=h[d],l=u[d];break}return a<l?-1:l<a?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),0<e.length&&(0>r||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":return k(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;0>(e=~~e)?0>(e+=r)&&(e=0):e>r&&(e=r),0>(t=void 0===t?r:~~t)?0>(t+=r)&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=o.prototype,n},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Ay(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||D(e,t,this.length);for(var n=t,i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Ay(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||z(this,e,t,r,Ay(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=255&e/i;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||z(this,e,t,r,Ay(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=255&e/o;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||z(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Ay(2,8*r-1);z(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)0>e&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=255&(e/s>>0)-a;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Ay(2,8*r-1);z(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;0<=--o&&(s*=256);)0>e&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=255&(e/s>>0)-a;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||z(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||z(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=i-1;0<=s;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&128>i||"latin1"===n)&&(e=i)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=o.isBuffer(e)?e:o.from(e,n),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%l]}return this};var K=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(e,t,r){(function(n){(function(){function i(){let e;try{e=r.storage.getItem("debug")}catch(t){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"===e||(n++,"%c"===e&&(i=n))})),e.splice(i,0,r)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(t){}},r.load=i,r.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(e){}}(),r.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=e("./common")(r);const{formatters:o}=t.exports;o.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this)}).call(this,e("_process"))},{"./common":5,_process:12}],5:[function(e,t){t.exports=function(t){function r(e){function t(...e){if(!t.enabled)return;const n=t,o=+new Date,s=o-(i||o);n.diff=s,n.prev=i,n.curr=o,i=o,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,i)=>{if("%%"===t)return"%";a++;const o=r.formatters[i];if("function"==typeof o){const r=e[a];t=o.call(n,r),e.splice(a,1),a--}return t})),r.formatArgs.call(n,e),(n.log||r.log).apply(n,e)}let i,o=null;return t.namespace=e,t.useColors=r.useColors(),t.color=r.selectColor(e),t.extend=n,t.destroy=r.destroy,Object.defineProperty(t,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?r.enabled(e):o,set:e=>{o=e}}),"function"==typeof r.init&&r.init(t),t}function n(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){const e=[...r.names.map(i),...r.skips.map(i).map((e=>"-"+e))].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((e=>{r[e]=t[e]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[My(t)%r.colors.length]},r.enable(r.load()),r}},{ms:11}],6:[function(e,t){function r(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}t.exports=function(e,t,n){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"==typeof t&&(n=t,t=""),t&&(n.code=t);try{return r(e,n)}catch(i){n.message=e.message,n.stack=e.stack;const t=function(){};return t.prototype=Object.create(Object.getPrototypeOf(e)),r(new t,n)}}},{}],7:[function(e,t){function r(e){console&&console.warn&&console.warn(e)}function n(){n.init.call(this)}function i(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function s(e,t,n,s){var a,l,c;if(i(n),void 0===(l=e._events)?(l=e._events=Object.create(null),e._eventsCount=0):(void 0!==l.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),l=e._events),c=l[t]),void 0===c)c=l[t]=n,++e._eventsCount;else if("function"==typeof c?c=l[t]=s?[n,c]:[c,n]:s?c.unshift(n):c.push(n),0<(a=o(e))&&c.length>a&&!c.warned){c.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=c.length,r(h)}return e}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=a.bind(n);return i.listener=r,n.wrapFn=i,i}function c(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?p(i):u(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function u(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function d(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function p(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function f(e,t,r){"function"==typeof e.on&&m(e,"error",t,r)}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}var g,y="object"==typeof Reflect?Reflect:null,v=y&&"function"==typeof y.apply?y.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};g=y&&"function"==typeof y.ownKeys?y.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var b=Number.isNaN||function(e){return e!=e};t.exports=n,t.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&f(e,i,{once:!0})}))},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var w=10;Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(e){if("number"!=typeof e||0>e||b(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");w=e}}),n.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||b(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return o(this)},n.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(0<t.length&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)v(a,this,t);else{var l=a.length,c=u(a,l);for(r=0;r<l;++r)v(c[r],this,t)}return!0},n.prototype.addListener=function(e,t){return s(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return s(this,e,t,!0)},n.prototype.once=function(e,t){return i(t),this.on(e,l(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return i(t),this.prependListener(e,l(this,e,t)),this},n.prototype.removeListener=function(e,t){var r,n,o,s,a;if(i(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,s=r.length-1;0<=s;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener,o=s;break}if(0>o)return this;0===o?r.shift():d(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;0<=n;n--)this.removeListener(e,t[n]);return this},n.prototype.listeners=function(e){return c(this,e,!0)},n.prototype.rawListeners=function(e){return c(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},n.prototype.listenerCount=h,n.prototype.eventNames=function(){return 0<this._eventsCount?g(this._events):[]}},{}],8:[function(e,t){t.exports=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],9:[function(e,t,r){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,c=l>>1,h=-7,u=r?i-1:0,d=r?-1:1,p=e[t+u];for(u+=d,o=p&(1<<-h)-1,p>>=-h,h+=a;0<h;o=256*o+e[t+u],u+=d,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;0<h;s=256*s+e[t+u],u+=d,h-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Ay(2,n),o-=c}return(p?-1:1)*s*Ay(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,l,c=Math.LN2,h=Math.log,u=8*o-i-1,d=(1<<u)-1,p=d>>1,f=23===i?Ay(2,-24)-Ay(2,-77):0,m=n?0:o-1,g=n?1:-1,y=0>t||0===t&&0>1/t?1:0;for(t=My(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=d):(s=Ty(h(t)/c),1>t*(l=Ay(2,-s))&&(s--,l*=2),2<=(t+=1<=s+p?f/l:f*Ay(2,1-p))*l&&(s++,l/=2),s+p>=d?(a=0,s=d):1<=s+p?(a=(t*l-1)*Ay(2,i),s+=p):(a=t*Ay(2,p-1)*Ay(2,i),s=0));8<=i;e[r+m]=255&a,m+=g,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;e[r+m]=255&s,m+=g,s/=256,u-=8);e[r+m-g]|=128*y}},{}],10:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},{}],11:[function(e,t){var r=Math.round;function n(e){if(!(100<(e+="").length)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();return"years"===n||"year"===n||"yrs"===n||"yr"===n||"y"===n?315576e5*r:"weeks"===n||"week"===n||"w"===n?6048e5*r:"days"===n||"day"===n||"d"===n?864e5*r:"hours"===n||"hour"===n||"hrs"===n||"hr"===n||"h"===n?36e5*r:"minutes"===n||"minute"===n||"mins"===n||"min"===n||"m"===n?6e4*r:"seconds"===n||"second"===n||"secs"===n||"sec"===n||"s"===n?1e3*r:"milliseconds"===n||"millisecond"===n||"msecs"===n||"msec"===n||"ms"===n?r:void 0}}}function i(e){var t=My(e);return 864e5<=t?r(e/864e5)+"d":36e5<=t?r(e/36e5)+"h":6e4<=t?r(e/6e4)+"m":1e3<=t?r(e/1e3)+"s":e+"ms"}function o(e){var t=My(e);return 864e5<=t?s(e,t,864e5,"day"):36e5<=t?s(e,t,36e5,"hour"):6e4<=t?s(e,t,6e4,"minute"):1e3<=t?s(e,t,1e3,"second"):e+" ms"}function s(e,t,n,i){return r(e/n)+" "+i+(t>=1.5*n?"s":"")}t.exports=function(e,t){t=t||{};var r=typeof e;if("string"==r&&0<e.length)return n(e);if("number"===r&&isFinite(e))return t.long?o(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],12:[function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(h===setTimeout)return setTimeout(e,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(n){return h.call(this,e,0)}}}function o(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(r){return u.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?f=p.concat(f):g=-1,f.length&&a())}function a(){if(!m){var e=i(s);m=!0;for(var t=f.length;t;){for(p=f,f=[];++g<t;)p&&p[g].run();g=-1,t=f.length}p=null,m=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var h,u,d=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(e){h=r}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(e){u=n}}();var p,f=[],m=!1,g=-1;d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new l(e,t)),1!==f.length||m||i(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(){return[]},d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],13:[function(e,t){(function(e){(function(){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let r;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"==typeof window?e:window):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))}).call(this)}).call(this,void 0===_y?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:_y)},{}],14:[function(e,t){(function(r,n){(function(){var i=e("safe-buffer").Buffer,o=n.crypto||n.msCrypto;t.exports=o&&o.getRandomValues?function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(e);if(0<e)if(65536<e)for(var s=0;s<e;s+=65536)o.getRandomValues(n.slice(s,s+65536));else o.getRandomValues(n);return"function"==typeof t?r.nextTick((function(){t(null,n)})):n}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,e("_process"),void 0===_y?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:_y)},{_process:12,"safe-buffer":30}],15:[function(e,t){function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function n(e,t,n){function i(e,r,n){return"string"==typeof t?t:t(e,r,n)}n||(n=Error);var o=function(e){function t(t,r,n){return e.call(this,i(t,r,n))||this}return r(t,e),t}(n);o.prototype.name=n.name,o.prototype.code=e,l[e]=o}function i(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return e+""})),2<r?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")}function o(e,t,r){return e.substr(!r||0>r?0:+r,t.length)===t}function s(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function a(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}var l={};n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,l;if("string"==typeof t&&o(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",s(e," argument"))l="The ".concat(e," ").concat(n," ").concat(i(t,"type"));else{var c=a(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(i(t,"type"))}return l+=". Received type ".concat(typeof r)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=l},{}],16:[function(e,t){(function(r){(function(){function n(e){return this instanceof n?(a.call(this,e),l.call(this,e),this.allowHalfOpen=!0,void(e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i))))):new n(e)}function i(){this._writableState.ended||r.nextTick(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=n;var a=e("./_stream_readable"),l=e("./_stream_writable");e("inherits")(n,a);for(var c,h=s(l.prototype),u=0;u<h.length;u++)c=h[u],n.prototype[c]||(n.prototype[c]=l.prototype[c]);Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(e,t){function r(e){return this instanceof r?void n.call(this,e):new r(e)}t.exports=r;var n=e("./_stream_transform");e("inherits")(r,n),r.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":19,inherits:10}],18:[function(e,t){(function(r,n){(function(){function i(e){return D.from(e)}function o(e){return D.isBuffer(e)||e instanceof z}function s(e,t,r){return"function"==typeof e.prependListener?e.prependListener(t,r):void(e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r))}function a(t,r,n){E=E||e("./_stream_duplex"),t=t||{},"boolean"!=typeof n&&(n=r instanceof E),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=U(this,t,"readableHighWaterMark",n),this.buffer=new F,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!B&&(B=e("string_decoder/").StringDecoder),this.decoder=new B(t.encoding),this.encoding=t.encoding)}function l(t){if(E=E||e("./_stream_duplex"),!(this instanceof l))return new l(t);var r=this instanceof E;this._readableState=new a(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),R.call(this)}function c(e,t,r,n,o){O("readableAddChunk",t);var s,a=e._readableState;if(null===t)a.reading=!1,f(e,a);else if(o||(s=u(a,t)),s)G(e,s);else if(a.objectMode||t&&0<t.length)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===D.prototype||(t=i(t)),n)a.endEmitted?G(e,new W):h(e,a,t,!0);else if(a.ended)G(e,new $);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?h(e,a,t,!1):y(e,a)):h(e,a,t,!1)}else n||(a.reading=!1,y(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function h(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&m(e)),y(e,t)}function u(e,t){var r;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new V("chunk",["string","Buffer","Uint8Array"],t)),r}function d(e){return 1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e==e?(e>t.highWaterMark&&(t.highWaterMark=d(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function f(e,t){if(O("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?m(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,g(e)))}}function m(e){var t=e._readableState;O("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(O("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(g,e))}function g(e){var t=e._readableState;O("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,_(e)}function y(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(v,e,t))}function v(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(O("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function b(e){return function(){var t=e._readableState;O("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&N(e,"data")&&(t.flowing=!0,_(e))}}function w(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function x(e){O("readable nexttick read 0"),e.read(0)}function k(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(S,e,t))}function S(e,t){O("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),_(e),t.flowing&&!t.reading&&e.read(0)}function _(e){var t=e._readableState;for(O("flow",t.flowing);t.flowing&&null!==e.read(););}function C(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function T(e){var t=e._readableState;O("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(M,t,e))}function M(e,t){if(O("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function A(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}var E,O;t.exports=l,l.ReadableState=a,e("events").EventEmitter;var N=function(e,t){return e.listeners(t).length},R=e("./internal/streams/stream"),D=e("buffer").Buffer,z=n.Uint8Array||function(){},I=e("util");O=I&&I.debuglog?I.debuglog("stream"):function(){};var B,L,P,F=e("./internal/streams/buffer_list"),q=e("./internal/streams/destroy"),U=e("./internal/streams/state").getHighWaterMark,j=e("../errors").codes,V=j.ERR_INVALID_ARG_TYPE,$=j.ERR_STREAM_PUSH_AFTER_EOF,H=j.ERR_METHOD_NOT_IMPLEMENTED,W=j.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(l,R);var G=q.errorOrDestroy,J=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=q.destroy,l.prototype._undestroy=q.undestroy,l.prototype._destroy=function(e,t){t(e)},l.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=D.from(e,t),t=""),r=!0),c(this,e,t,!1,r)},l.prototype.unshift=function(e){return c(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(t){B||(B=e("string_decoder/").StringDecoder);var r=new B(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this},l.prototype.read=function(e){O("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return O("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?T(this):m(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&T(this),null;var n,i=t.needReadable;return O("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&O("length less than watermark",i=!0),t.ended||t.reading?O("reading or ended",i=!1):i&&(O("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=p(r,t))),null===(n=0<e?C(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),r!==e&&t.ended&&T(this)),null!==n&&this.emit("data",n),n},l.prototype._read=function(){G(this,new H("_read()"))},l.prototype.pipe=function(e,t){function n(e,t){O("onunpipe"),e===d&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){O("onend"),e.end()}function o(){O("cleanup"),e.removeListener("close",c),e.removeListener("finish",h),e.removeListener("drain",m),e.removeListener("error",l),e.removeListener("unpipe",n),d.removeListener("end",i),d.removeListener("end",u),d.removeListener("data",a),g=!0,p.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&m()}function a(t){O("ondata");var r=e.write(t);O("dest.write",r),!1===r&&((1===p.pipesCount&&p.pipes===e||1<p.pipesCount&&-1!==A(p.pipes,e))&&!g&&(O("false write response, pause",p.awaitDrain),p.awaitDrain++),d.pause())}function l(t){O("onerror",t),u(),e.removeListener("error",l),0===N(e,"error")&&G(e,t)}function c(){e.removeListener("finish",h),u()}function h(){O("onfinish"),e.removeListener("close",c),u()}function u(){O("unpipe"),d.unpipe(e)}var d=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,O("pipe count=%d opts=%j",p.pipesCount,t);var f=t&&!1===t.end||e===r.stdout||e===r.stderr?u:i;p.endEmitted?r.nextTick(f):d.once("end",f),e.on("unpipe",n);var m=b(d);e.on("drain",m);var g=!1;return d.on("data",a),s(e,"error",l),e.once("close",c),e.once("finish",h),e.emit("pipe",d),p.flowing||(O("pipe resume"),d.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=A(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},l.prototype.on=function(e,t){var n=R.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"==e&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,O("on readable",i.length,i.reading),i.length?m(this):!i.reading&&r.nextTick(x,this)),n},l.prototype.addListener=l.prototype.on,l.prototype.removeListener=function(e,t){var n=R.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(w,this),n},l.prototype.removeAllListeners=function(e){var t=R.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&r.nextTick(w,this),t},l.prototype.resume=function(){var e=this._readableState;return e.flowing||(O("resume"),e.flowing=!e.readableListening,k(this,e)),e.paused=!1,this},l.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},l.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(O("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){O("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||!(r.objectMode||i&&i.length)||t.push(i)||(n=!0,e.pause())})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<J.length;o++)e.on(J[o],this.emit.bind(this,J[o]));return this._read=function(t){O("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){return void 0===L&&(L=e("./internal/streams/async_iterator")),L(this)}),Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),l._fromList=C,Object.defineProperty(l.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(l.from=function(t,r){return void 0===P&&(P=e("./internal/streams/from")),P(l,t,r)})}).call(this)}).call(this,e("_process"),void 0===_y?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:_y)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(e,t){function r(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new l);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function n(e){return this instanceof n?(u.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",i)):new n(e)}function i(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush((function(t,r){o(e,t,r)}))}function o(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new h;if(e._transformState.transforming)throw new c;return e.push(null)}t.exports=n;var s=e("../errors").codes,a=s.ERR_METHOD_NOT_IMPLEMENTED,l=s.ERR_MULTIPLE_CALLBACK,c=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=s.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");e("inherits")(n,u),n.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},n.prototype._transform=function(e,t,r){r(new a("_transform()"))},n.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},n.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(e,t){(function(r,n){(function(){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){T(t,e)}}function o(e){return N.from(e)}function s(e){return N.isBuffer(e)||e instanceof R}function a(){}function l(t,r,n){M=M||e("./_stream_duplex"),t=t||{},"boolean"!=typeof n&&(n=r instanceof M),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=z(this,t,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function c(t){var r=this instanceof(M=M||e("./_stream_duplex"));return r||A.call(c,this)?(this._writableState=new l(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),void O.call(this)):new c(t)}function h(e,t){var n=new j;$(e,n),r.nextTick(t,n)}function u(e,t,n,i){var o;return null===n?o=new U:"string"!=typeof n&&!t.objectMode&&(o=new B("chunk",["string","Buffer"],n)),!o||($(e,o),r.nextTick(i,o),!1)}function d(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=N.from(t,r)),t}function p(e,t,r,n,i,o){if(!r){var s=d(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(e,t,!1,a,n,i,o);return l}function f(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new q("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function m(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(_,e,t),e._writableState.errorEmitted=!0,$(e,i)):(o(i),e._writableState.errorEmitted=!0,$(e,i),_(e,t))}function g(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new P;if(g(n),t)m(e,n,i,t,o);else{var s=x(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),i?r.nextTick(v,e,n,s,o):v(e,n,s,o)}}function v(e,t,r,n){r||b(e,t),t.pendingcb--,n(),_(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,l=!0;r;)o[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;o.allBuffers=l,f(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,h=r.encoding,u=r.callback;if(f(e,t,!1,t.objectMode?1:c.length,c,h,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final((function(r){t.pendingcb--,r&&$(e,r),t.prefinished=!0,e.emit("prefinish"),_(e,t)}))}function S(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(k,e,t)))}function _(e,t){var r=x(t);if(r&&(S(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function C(e,t,n){t.ending=!0,_(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function T(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}var M;t.exports=c,c.WritableState=l;var A,E={deprecate:e("util-deprecate")},O=e("./internal/streams/stream"),N=e("buffer").Buffer,R=n.Uint8Array||function(){},D=e("./internal/streams/destroy"),z=e("./internal/streams/state").getHighWaterMark,I=e("../errors").codes,B=I.ERR_INVALID_ARG_TYPE,L=I.ERR_METHOD_NOT_IMPLEMENTED,P=I.ERR_MULTIPLE_CALLBACK,F=I.ERR_STREAM_CANNOT_PIPE,q=I.ERR_STREAM_DESTROYED,U=I.ERR_STREAM_NULL_VALUES,j=I.ERR_STREAM_WRITE_AFTER_END,V=I.ERR_UNKNOWN_ENCODING,$=D.errorOrDestroy;e("inherits")(c,O),l.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l.prototype,"buffer",{get:E.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return!!A.call(this,e)||!(this!==c)&&e&&e._writableState instanceof l}})):A=function(e){return e instanceof this},c.prototype.pipe=function(){$(this,new F)},c.prototype.write=function(e,t,r){var n=this._writableState,i=!1,l=!n.objectMode&&s(e);return l&&!N.isBuffer(e)&&(e=o(e)),"function"==typeof t&&(r=t,t=null),l?t="buffer":!t&&(t=n.defaultEncoding),"function"!=typeof r&&(r=a),n.ending?h(this,r):(l||u(this,n,e,r))&&(n.pendingcb++,i=p(this,n,l,e,t,r)),i},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&w(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new V(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,r){r(new L("_write()"))},c.prototype._writev=null,c.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||C(this,n,r),this},Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=D.destroy,c.prototype._undestroy=D.undestroy,c.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),void 0===_y?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:_y)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(e,t){(function(r){(function(){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return{value:e,done:t}}function o(e){var t=e[h];if(null!==t){var r=e[g].read();null!==r&&(e[f]=null,e[h]=null,e[u]=null,t(i(r,!1)))}}function s(e){r.nextTick(o,e)}function a(e,t){return function(r,n){e.then((function(){return t[p]?void r(i(void 0,!0)):void t[m](r,n)}),n)}}var l,c=e("./end-of-stream"),h=Symbol("lastResolve"),u=Symbol("lastReject"),d=Symbol("error"),p=Symbol("ended"),f=Symbol("lastPromise"),m=Symbol("handlePromise"),g=Symbol("stream"),y=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((n(l={get stream(){return this[g]},next:function(){var e=this,t=this[d];if(null!==t)return Promise.reject(t);if(this[p])return Promise.resolve(i(void 0,!0));if(this[g].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[d]?n(e[d]):t(i(void 0,!0))}))}));var n,o=this[f];if(o)n=new Promise(a(o,this));else{var s=this[g].read();if(null!==s)return Promise.resolve(i(s,!1));n=new Promise(this[m])}return this[f]=n,n}},Symbol.asyncIterator,(function(){return this})),n(l,"return",(function(){var e=this;return new Promise((function(t,r){e[g].destroy(null,(function(e){return e?void r(e):void t(i(void 0,!0))}))}))})),l),y);t.exports=function(e){var t,r=Object.create(v,(n(t={},g,{value:e,writable:!0}),n(t,h,{value:null,writable:!0}),n(t,u,{value:null,writable:!0}),n(t,d,{value:null,writable:!0}),n(t,p,{value:e._readableState.endEmitted,writable:!0}),n(t,m,{value:function(e,t){var n=r[g].read();n?(r[f]=null,r[h]=null,r[u]=null,e(i(n,!1))):(r[h]=e,r[u]=t)},writable:!0}),t));return r[f]=null,c(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[u];return null!==t&&(r[f]=null,r[h]=null,r[u]=null,t(e)),void(r[d]=e)}var n=r[h];null!==n&&(r[f]=null,r[h]=null,r[u]=null,n(i(void 0,!0))),r[p]=!0})),e.on("readable",s.bind(null,r)),r}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":24,_process:12}],22:[function(e,t){function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?r(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r,n=0;n<t.length;n++)(r=t[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function l(e,t,r){c.prototype.copy.call(e,t,r)}var c=e("buffer").Buffer,h=e("util").inspect,u=h&&h.custom||"inspect";t.exports=function(){function e(){o(this,e),this.head=null,this.tail=null,this.length=0}return a(e,[{key:"push",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t=c.allocUnsafe(e>>>0),r=this.head,n=0;r;)l(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(n+=o===i.length?i:i.slice(0,e),0==(e-=o)){o===i.length?(++r,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,this.head=r.next?r.next:this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return h(this,n({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:3,util:2}],23:[function(e,t){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(o?o(t):t&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(n,s):(s._writableState.errorEmitted=!0,e.nextTick(r,s,t)):e.nextTick(r,s,t):o?(e.nextTick(n,s),o(t)):e.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:12}],24:[function(e,t){function r(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function n(){}function i(e){return e.setHeader&&"function"==typeof e.abort}function o(e,t,a){if("function"==typeof t)return o(e,null,t);t||(t={}),a=r(a||n);var l=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,h=function(){e.writable||d()},u=e._writableState&&e._writableState.finished,d=function(){c=!1,u=!0,l||a.call(e)},p=e._readableState&&e._readableState.endEmitted,f=function(){l=!1,p=!0,c||a.call(e)},m=function(t){a.call(e,t)},g=function(){var t;return l&&!p?(e._readableState&&e._readableState.ended||(t=new s),a.call(e,t)):c&&!u?(e._writableState&&e._writableState.ended||(t=new s),a.call(e,t)):void 0},y=function(){e.req.on("finish",d)};return i(e)?(e.on("complete",d),e.on("abort",g),e.req?y():e.on("request",y)):c&&!e._writableState&&(e.on("end",h),e.on("close",h)),e.on("end",f),e.on("finish",d),!1!==t.error&&e.on("error",m),e.on("close",g),function(){e.removeListener("complete",d),e.removeListener("abort",g),e.removeListener("request",y),e.req&&e.req.removeListener("finish",d),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",d),e.removeListener("end",f),e.removeListener("error",m),e.removeListener("close",g)}}var s=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=o},{"../../../errors":15}],25:[function(e,t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(e,t){function r(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}function n(e){if(e)throw e}function i(e){return e.setHeader&&"function"==typeof e.abort}function o(t,n,o,s){s=r(s);var a=!1;t.on("close",(function(){a=!0})),void 0===c&&(c=e("./end-of-stream")),c(t,{readable:n,writable:o},(function(e){return e?s(e):(a=!0,void s())}));var l=!1;return function(e){if(!a)return l?void 0:(l=!0,i(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new d("pipe")))}}function s(e){e()}function a(e,t){return e.pipe(t)}function l(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():n}var c,h=e("../../../errors").codes,u=h.ERR_MISSING_ARGS,d=h.ERR_STREAM_DESTROYED;t.exports=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=l(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new u("streams");var i,c=t.map((function(e,r){var a=r<t.length-1;return o(e,a,0<r,(function(e){i||(i=e),e&&c.forEach(s),a||(c.forEach(s),n(i))}))}));return t.reduce(a)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(e,t){function r(e,t,r){return null==e.highWaterMark?t?e[r]:null:e.highWaterMark}var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,i,o){var s=r(t,o,i);if(null!=s){if(!isFinite(s)||Ty(s)!==s||0>s)throw new n(o?i:"highWaterMark",s);return Ty(s)}return e.objectMode?16:16384}}},{"../../../errors":15}],28:[function(e,t){t.exports=e("events").EventEmitter},{events:7}],29:[function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return s(e,t,r)}
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var o=e("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=o:(n(o,r),r.Buffer=i),i.prototype=Object.create(s.prototype),n(s,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0===t?n.fill(0):"string"==typeof r?n.fill(t,r):n.fill(t),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:3}],31:[function(e,t,r){function n(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=n(e);if("string"!=typeof t&&(g.isEncoding===y||!y(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){var t;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=h,this.end=u,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=d,this.end=p,t=3;break;default:return this.write=f,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(t)}function s(e){return 127>=e?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);return 0<=i?(0<i&&(e.lastNeed=i-1),i):--n<r||-2===i?0:0<=(i=s(t[n]))?(0<i&&(e.lastNeed=i-2),i):--n<r||-2===i?0:0<=(i=s(t[n]))?(0<i&&(2===i?i=0:e.lastNeed=i-3),i):0}function l(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function c(e){var t=this.lastTotal-this.lastNeed,r=l(this,e);return void 0===r?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):r}function h(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(55296<=n&&56319>=n)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}var g=e("safe-buffer").Buffer,y=g.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};r.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":30}],32:[function(e,t){(function(e){(function(){function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null!=r&&"true"===(r+"").toLowerCase()}t.exports=function(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}}).call(this)}).call(this,void 0===_y?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:_y)},{}],"/":[function(e,t){function r(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function n(e){console.warn(e)}
/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const i=e("debug")("simple-peer"),o=e("get-browser-rtc"),s=e("randombytes"),a=e("readable-stream"),l=e("queue-microtask"),c=e("err-code"),{Buffer:h}=e("buffer"),u=65536;class d extends a.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||d.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},d.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:o(),!this._wrtc)throw"undefined"==typeof window?c(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):c(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void this.destroy(c(t,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch((e=>{this.destroy(c(e,"ERR_PC_PEER_IDENTITY"))})),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach((e=>{this.addStream(e)})),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((e=>{this._addIceCandidate(e)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((e=>{this.destroy(c(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(c(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch((e=>{!t.address||t.address.endsWith(".local")?n("Ignoring unsupported ICE candidate."):this.destroy(c(e,"ERR_ADD_ICE_CANDIDATE"))}))}send(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(r){this.destroy(c(r,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach((t=>{this.addTrack(t,e)}))}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const r=this._senderMap.get(e)||new Map;let n=r.get(t);if(n)throw n.removed?c(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):c(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");n=this._pc.addTrack(e,t),r.set(t,n),this._senderMap.set(e,r),this._needsNegotiation()}replaceTrack(e,t,r){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const n=this._senderMap.get(e),i=n?n.get(r):null;if(!i)throw c(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,n),null==i.replaceTrack?this.destroy(c(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):i.replaceTrack(t)}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const r=this._senderMap.get(e),n=r?r.get(t):null;if(!n)throw c(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{n.removed=!0,this._pc.removeTrack(n)}catch(i){"NS_ERROR_UNEXPECTED"===i.name?this._sendersAwaitingStable.push(n):this.destroy(c(i,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach((t=>{this.removeTrack(t,e)}))}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,l((()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1})))}negotiate(){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,(()=>{}))}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),l((()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(r){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(r){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()})))}_setupData(e){if(!e.channel)return this.destroy(c(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=u),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error(`Datachannel error: ${e.message} ${e.filename}:${e.lineno}:${e.colno}`);this.destroy(c(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1}),5e3)}_read(){}_write(e,t,r){if(this.destroyed)return r(c(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(n){return this.destroy(c(n,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>u?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=r):r(null)}else this._debug("write before connect"),this._chunk=e,this._cb=r}_onFinish(){if(!this.destroyed){const e=()=>{setTimeout((()=>this.destroy()),1e3)};this._connected?e():this.once("connect",e)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=r(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(c(e,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=r(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then((()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(c(e,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(c(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(c(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(c(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((t=>{Object.assign(e,t)})),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((r=>{const n=[];r.forEach((e=>{n.push(t(e))})),e(null,n)}),(t=>e(t))):0<this._pc.getStats.length?this._pc.getStats((r=>{if(this.destroyed)return;const n=[];r.result().forEach((e=>{const r={};e.names().forEach((t=>{r[t]=e.stat(t)})),r.id=e.id,r.type=e.type,r.timestamp=e.timestamp,n.push(t(r))})),e(null,n)}),(t=>e(t))):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats(((t,r)=>{if(this.destroyed)return;t&&(r=[]);const n={},i={},o={};let s=!1;r.forEach((e=>{("remotecandidate"===e.type||"remote-candidate"===e.type)&&(n[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(i[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(o[e.id]=e)}));const a=e=>{s=!0;let t=i[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=+t.port):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=+t.portNumber):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=+t[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let r=n[e.remoteCandidateId];r&&(r.ip||r.address)?(this.remoteAddress=r.ip||r.address,this.remotePort=+r.port):r&&r.ipAddress?(this.remoteAddress=r.ipAddress,this.remotePort=+r.portNumber):"string"==typeof e.googRemoteAddress&&(r=e.googRemoteAddress.split(":"),this.remoteAddress=r[0],this.remotePort=+r[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(r.forEach((e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)})),s||Object.keys(o).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(l){return this.destroy(c(l,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)}))};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>u)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=h.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach((t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some((e=>e.id===t.id))||(this._remoteStreams.push(t),l((()=>{this._debug("on stream"),this.emit("stream",t)})))}))}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],i.apply(null,e)}}d.WEBRTC_SUPPORT=!!o(),d.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},d.channelConfig={},t.exports=d},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/"));const Ny=(e,t)=>{Ud(e,0);const r=(e=>vf(e,new sf))(t);Hd(e,r)},Ry=(e,t,r)=>{Ud(e,1),Hd(e,mf(t,r))},Dy=(e,t,r)=>{try{pf(t,bd(e),r)}catch(n){console.error("Caught error while handling a Yjs update",n)}},zy=Dy,Iy=(e,t,r,n)=>{const i=xd(e);switch(i){case 0:((e,t,r)=>{Ry(t,r,bd(e))})(e,t,r);break;case 1:Dy(e,r,n);break;case 2:zy(e,r,n);break;default:throw new Error("Unknown message type")}return i},By=(e,t)=>{if(!t)return cp(e);const r=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,e).then((e=>{const t=Ld();return Vd(t,"AES-GCM"),Hd(t,r),Hd(t,new Uint8Array(e)),Pd(t)}))},Ly=(e,t)=>{if(!t)return cp(e);const r=vd(e);var n;"AES-GCM"!==Sd(r)&&(n=hp("Unknown encryption algorithm"),Promise.reject(n));const i=bd(r),o=bd(r);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},t,o).then((e=>new Uint8Array(e)))},Py=(e=>{const t=Lp[Pp],r=md("log"),n=null!==r&&("*"===r||"true"===r||new RegExp(r,"gi").test(e));return Pp=(Pp+1)%Lp.length,e+=": ",n?(...r)=>{const n=ap(),i=n-Fp;Fp=n,Ip(t,e,Np,...r.map((e=>"string"==typeof e||"symbol"==typeof e?e:JSON.stringify(e))),t," +"+i+"ms")}:yp})("y-webrtc"),Fy=new Map,qy=new Map,Uy=e=>{let t=!0;e.webrtcConns.forEach((e=>{e.synced||(t=!1)})),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),Py("synced ",Sp,e.name,_p," with all peers"))},jy=(e,t,r)=>{const n=vd(t),i=Ld(),o=xd(n);if(void 0===e)return null;const s=e.awareness,a=e.doc;let l=!1;switch(o){case 0:{Ud(i,0);const t=Iy(n,i,a,e);1!==t||e.synced||r(),0===t&&(l=!0);break}case 3:Ud(i,1),Hd(i,qg(s,Array.from(s.getStates().keys()))),l=!0;break;case 1:((e,t,r)=>{const n=vd(t),i=ap(),o=[],s=[],a=[],l=[],c=xd(n);for(let h=0;h<c;h++){const t=xd(n);let r=xd(n);const c=JSON.parse(Sd(n)),h=e.meta.get(t),u=e.states.get(t),d=void 0===h?0:h.clock;(d<r||d===r&&null===c&&e.states.has(t))&&(null===c?t===e.clientID&&null!=e.getLocalState()?r++:e.states.delete(t):e.states.set(t,c),e.meta.set(t,{clock:r,lastUpdated:i}),void 0===h&&null!==c?o.push(t):void 0!==h&&null===c?l.push(t):null!==c&&(vp(c,u)||a.push(t),s.push(t)))}(o.length>0||a.length>0||l.length>0)&&e.emit("change",[{added:o,updated:a,removed:l},r]),(o.length>0||s.length>0||l.length>0)&&e.emit("update",[{added:o,updated:s,removed:l},r])})(s,bd(n),e);break;case 4:{const t=1===wd(n),r=Sd(n);if(r!==e.peerId&&(e.bcConns.has(r)&&!t||!e.bcConns.has(r)&&t)){const n=[],i=[];t?(e.bcConns.add(r),i.push(r)):(e.bcConns.delete(r),n.push(r)),e.provider.emit("peers",[{added:i,removed:n,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),Jy(e)}break}default:return console.error("Unable to compute message"),i}return l?i:null},Vy=(e,t)=>{Py("send message to ",Sp,e.remotePeerId,_p,Tp," (",e.room.name,")",Np);try{e.peer.send(Pd(t))}catch(hv){}};class $y{constructor(e,t,r,n){Py("establishing connection to ",Sp,r),this.room=n,this.remotePeerId=r,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new Oy(a({initiator:t},n.provider.peerOpts)),this.peer.on("signal",(t=>{Yy(e,n,{to:r,from:n.peerId,type:"signal",signal:t})})),this.peer.on("connect",(()=>{Py("connected to ",Sp,r),this.connected=!0;const e=n.provider.doc,t=n.awareness,i=Ld();Ud(i,0),Ny(i,e),Vy(this,i);const o=t.getStates();if(o.size>0){const e=Ld();Ud(e,1),Hd(e,qg(t,Array.from(o.keys()))),Vy(this,e)}})),this.peer.on("close",(()=>{this.connected=!1,this.closed=!0,n.webrtcConns.has(this.remotePeerId)&&(n.webrtcConns.delete(this.remotePeerId),n.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(n.webrtcConns.keys()),bcPeers:Array.from(n.bcConns)}])),Uy(n),this.peer.destroy(),Py("closed connection to ",Sp,r),Gy(n)})),this.peer.on("error",(e=>{Py("Error in connection to ",Sp,r,": ",e),Gy(n)})),this.peer.on("data",(e=>{const t=((e,t)=>{const r=e.room;return Py("received message from ",Sp,e.remotePeerId,Tp," (",r.name,")",_p,Np),jy(r,t,(()=>{e.synced=!0,Py("synced ",Sp,r.name,_p," with ",Sp,e.remotePeerId),Uy(r)}))})(this,e);null!==t&&Vy(this,t)}))}destroy(){this.peer.destroy()}}const Hy=(e,t)=>By(t,e.key).then((t=>e.mux((()=>((e,t)=>{const r=Sy(e);r.bc.postMessage(t),r.subs.forEach((e=>e(t)))})(e.name,t))))),Wy=(e,t)=>{e.bcconnected&&Hy(e,t),((e,t)=>{Py("broadcast message in ",Sp,e.name,_p),e.webrtcConns.forEach((e=>{try{e.peer.send(t)}catch(hv){}}))})(e,t)},Gy=e=>{Fy.forEach((t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&Yy(t,e,{type:"announce",from:e.peerId}))}))},Jy=e=>{if(e.provider.filterBcConns){const t=Ld();Ud(t,4),qd(t,1),Vd(t,e.peerId),Hy(e,Pd(t))}};class Ky{constructor(e,t,r,n){this.peerId=sp(),this.doc=e,this.awareness=t.awareness,this.provider=t,this.synced=!1,this.name=r,this.key=n,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Ug(),this.bcconnected=!1,this._bcSubscriber=e=>Ly(new Uint8Array(e),n).then((e=>this.mux((()=>{const t=jy(this,e,(()=>{}));t&&Hy(this,Pd(t))})))),this._docUpdateHandler=(e,t)=>{const r=Ld();Ud(r,0),((e,t)=>{Ud(e,2),Hd(e,t)})(r,e),Wy(this,Pd(r))},this._awarenessUpdateHandler=({added:e,updated:t,removed:r},n)=>{const i=e.concat(t).concat(r),o=Ld();Ud(o,1),Hd(o,qg(this.awareness,i)),Wy(this,Pd(o))},window.addEventListener("beforeunload",(()=>{Fg(this.awareness,[e.clientID],"window unload"),qy.forEach((e=>{e.disconnect()}))}))}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Gy(this);const e=this.name;var t,r;t=e,r=this._bcSubscriber,Sy(t).subs.add(r),this.bcconnected=!0,Jy(this);const n=Ld();Ud(n,0),Ny(n,this.doc),Hy(this,Pd(n));const i=Ld();Ud(i,0),Ry(i,this.doc),Hy(this,Pd(i));const o=Ld();Ud(o,3),Hy(this,Pd(o));const s=Ld();Ud(s,1),Hd(s,qg(this.awareness,[this.doc.clientID])),Hy(this,Pd(s))}disconnect(){Fy.forEach((e=>{e.connected&&e.send({type:"unsubscribe",topics:[this.name]})})),Fg(this.awareness,[this.doc.clientID],"disconnect");const e=Ld();var t,r;Ud(e,4),qd(e,0),Vd(e,this.peerId),Hy(this,Pd(e)),t=this.name,r=this._bcSubscriber,Sy(t).subs.delete(r),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach((e=>e.destroy()))}destroy(){this.disconnect()}}const Yy=(e,t,r)=>{t.key?((e,t)=>{const r=Ld();return Jd(r,e),By(Pd(r),t)})(r,t.key).then((r=>{e.send({type:"publish",topic:t.name,data:Dd(r)})})):e.send({type:"publish",topic:t.name,data:r})};class Xy extends wy{constructor(e){super(e),this.providers=new Set,this.on("connect",(()=>{Py(`connected (${e})`);const t=Array.from(qy.keys());this.send({type:"subscribe",topics:t}),qy.forEach((e=>Yy(this,e,{type:"announce",from:e.peerId})))})),this.on("message",(e=>{if("publish"===e.type){const n=e.topic,i=qy.get(n);if(null==i||"string"!=typeof n)return;const o=e=>{const t=i.webrtcConns,r=i.peerId;if(null==e||e.from===r||void 0!==e.to&&e.to!==r||i.bcConns.has(e.from))return;const n=t.has(e.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[e.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(e.type){case"announce":t.size<i.provider.maxConns&&(ju(t,e.from,(()=>new $y(this,!0,e.from,i))),n());break;case"signal":e.to===r&&(ju(t,e.from,(()=>new $y(this,!1,e.from,i))).peer.signal(e.signal),n())}};i.key?"string"==typeof e.data&&(t=zd(e.data),r=i.key,Ly(t,r).then((e=>Td(vd(new Uint8Array(e)))))).then(o):o(e.data)}var t,r})),this.on("disconnect",(()=>Py(`disconnect (${e})`)))}}class Zy extends Gu{constructor(e,t,{signaling:r=["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"],password:n=null,awareness:i=new Pg(t),maxConns:o=20+Ju(15*np()),filterBcConns:s=!0,peerOpts:a={}}={}){super(),this.roomName=e,this.doc=t,this.filterBcConns=s,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=r,this.signalingConns=[],this.maxConns=o,this.peerOpts=a,this.key=n?((e,t)=>{const r=od(e).buffer,n=od(t).buffer;return crypto.subtle.importKey("raw",r,"PBKDF2",!1,["deriveKey"]).then((e=>crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])))})(n,e):cp(null),this.room=null,this.key.then((r=>{this.room=((e,t,r,n)=>{if(qy.has(r))throw hp(`A Yjs Doc connected to room "${r}" already exists!`);const i=new Ky(e,t,r,n);return qy.set(r,i),i})(t,this,e,r),this.shouldConnect?this.room.connect():this.room.disconnect()})),this.connect(),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach((e=>{const t=ju(Fy,e,(()=>new Xy(e)));this.signalingConns.push(t),t.providers.add(this)})),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach((e=>{e.providers.delete(this),0===e.providers.size&&(e.destroy(),Fy.delete(e.url))})),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then((()=>{this.room.destroy(),qy.delete(this.roomName)})),super.destroy()}}const Qy=e=>lp(((t,r)=>{e.onerror=e=>r(new Error(e.target.error)),e.onblocked=()=>location.reload(),e.onsuccess=e=>t(e.target.result)})),ev=(e,t,r="readwrite")=>{const n=e.transaction(t,r);return t.map((e=>sv(n,e)))},tv=(e,t)=>Qy(e.count(t)),rv=(e,t)=>Qy(e.delete(t)),nv=(e,t)=>Qy(e.add(t)),iv=(e,t=null)=>((e,t,r)=>{let n=null;return ov(e,t,(e=>(n=e,!1)),r).then((()=>n))})(e,t,"prev"),ov=(e,t,r,n="next")=>((e,t)=>lp(((r,n)=>{e.onerror=n,e.onsuccess=e=>{const n=e.target.result;if(null===n||!1===t(n))return r();n.continue()}})))(e.openKeyCursor(t,n),(e=>r(e.key))),sv=(e,t)=>e.objectStore(t),av=e=>{const[t]=ev(e.db,["updates"]);return(r=t,i=e._dbref,o=!1,n=IDBKeyRange.lowerBound(i,o),Qy(r.getAll(n))).then((t=>e._mux((()=>Qf(e.doc,(()=>{t.forEach((t=>pf(e.doc,t)))}),e,!1))))).then((()=>iv(t).then((t=>{e._dbref=t+1})))).then((()=>tv(t).then((t=>{e._dbsize=t})))).then((()=>t));var r,n,i,o},lv=(e,t=!0)=>av(e).then((r=>{(t||e._dbsize>=500)&&nv(r,mf(e.doc)).then((()=>{return rv(r,(t=e._dbref,n=!0,IDBKeyRange.upperBound(t,n)));var t,n})).then((()=>tv(r).then((t=>{e._dbsize=t}))))}));class cv extends Gu{constructor(e,t){super(),this.doc=t,this.name=e,this._mux=Ug(),this._dbref=0,this._dbsize=0,this.db=null,this.synced=!1,this._db=((e,t)=>lp(((r,n)=>{const i=indexedDB.open(e);i.onupgradeneeded=e=>t(e.target.result),i.onerror=e=>n(hp(e.target.error)),i.onblocked=()=>location.reload(),i.onsuccess=e=>{const t=e.target.result;t.onversionchange=()=>{t.close()},"undefined"!=typeof addEventListener&&addEventListener("unload",(()=>t.close())),r(t)}})))(e,(e=>((e,t)=>t.forEach((t=>e.createObjectStore.apply(e,t))))(e,[["updates",{autoIncrement:!0}],["custom"]]))),this.whenSynced=this._db.then((e=>{this.db=e;const r=mf(t);return av(this).then((e=>nv(e,r))).then((()=>(this.emit("synced",[this]),this.synced=!0,this)))})),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=e=>this._mux((()=>{if(this.db){const[t]=ev(this.db,["updates"]);nv(t,e),++this._dbsize>=500&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout((()=>{lv(this,!1),this._storeTimeoutId=null}),this._storeTimeout))}})),t.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._db.then((e=>{e.close()}))}clearData(){return this.destroy().then((()=>{(e=>{Qy(indexedDB.deleteDatabase(e))})(this.name)}))}get(e){return this._db.then((t=>{const[r]=ev(t,["custom"],"readonly");return((e,t)=>Qy(e.get(t)))(r,e)}))}set(e,t){return this._db.then((r=>{const[n]=ev(r,["custom"]);return((e,t,r)=>Qy(e.put(t,r)))(n,t,e)}))}del(e){return this._db.then((t=>{const[r]=ev(t,["custom"]);return rv(r,e)}))}}export{E as A,Y as B,W as C,tf as D,Sl as E,G as F,X as G,cv as I,ee as S,Zy as W,T as a,w as b,A as c,x as d,k as e,v as f,C as g,D as h,Q as i,ga as j,zi as k,vy as l,bo as m,c as n,Pu as o,fs as p,R as q,gy as r,f as s,vu as t,my as u,I as v,J as w,_ as x,Jg as y,K as z};
